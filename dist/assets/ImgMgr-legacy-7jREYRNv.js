System.register(["./index-legacy-DG3SNjgO.js"],(function(e,t){"use strict";var n,a,r;return{setters:[e=>{n=e.aq,a=e.ar,r=e.as}],execute:function(){e({a:o,c:async function(e,t,n){return new Promise((a=>{const r=document.createElement("input");r.type="file",r.accept="image/*",r.capture="camera",r.addEventListener("change",(async r=>{var s;const i=null===(s=r.target)||void 0===s?void 0:s.files[0];if(!i)return void a(null);const l=new FileReader;l.onload=r=>{const s=r.target.result,i=new Image;i.src=s,i.onload=()=>{void 0===n&&(n=i.width),void 0===t&&(t=i.height);const{drawWidth:r,drawHeight:s}=o(i,n,t),l=document.createElement("canvas");l.width=r,l.height=s,console.log("canvas",s,r);const d=l.getContext("2d");d?(d.clearRect(0,0,n,t),d.drawImage(i,0,0,r,s),l.toBlob((t=>{const n=new FileReader;n.onload=async()=>{const t=n.result,r=await c(e,t);return a(parseInt(r))},n.readAsDataURL(t)}),"image/webp")):a(null)}},l.readAsDataURL(i)})),r.click()}))},d:async function(e){console.log("delImage",e);const n=await r(e);return t.remove("img_"+e),n},g:async function(e){let a=t.get("img_"+e);return null===a&&(a=await n(e),a&&t.set("img_"+e,a,600)),a},l:async function(e,t,n){return new Promise((a=>{const r=document.createElement("input");r.type="file",r.accept="image/*",r.addEventListener("change",(async r=>{var s;const i=null===(s=r.target)||void 0===s?void 0:s.files[0];if(!i)return void a(null);const l=new FileReader;l.onload=r=>{const s=r.target.result,i=new Image;i.src=s,i.onload=()=>{void 0===n&&(n=i.width),void 0===t&&(t=i.height);const{drawWidth:r,drawHeight:s}=o(i,n,t),l=document.createElement("canvas");l.width=r,l.height=s,console.log("canvas",s,r);const d=l.getContext("2d");d?(d.clearRect(0,0,n,t),d.drawImage(i,0,0,r,s),l.toBlob((t=>{const n=new FileReader;n.onload=async()=>{const t=n.result,r=await c(e,t);return a(parseInt(r))},n.readAsDataURL(t)}),"image/webp")):a(null)}},l.readAsDataURL(i)})),r.click()}))}});class t{static set(e,t,n){const a=Date.now()+1e3*n;localStorage.setItem(e,JSON.stringify({value:t,expires:a}))}static get(e){const t=JSON.parse(localStorage.getItem(e)||"null");return t&&t.expires>Date.now()?t.value:(this.remove(e),null)}static remove(e){localStorage.removeItem(e)}static has(e){return!!this.get(e)}}function o(e,t,n){const a=e.width/e.height;let r,o;return a>t/n?(r=t,o=t/a):(o=n,r=n*a),{dx:(t-r)/2,dy:(n-o)/2,drawWidth:r,drawHeight:o}}async function c(e,n){const r=await a(e,n);return t.remove("img_"+e),r}}}}));
