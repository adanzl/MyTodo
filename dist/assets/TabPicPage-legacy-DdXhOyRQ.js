System.register(["./index-legacy-BbZnQQmz.js","./ImgMgr-legacy-CmOChMDH.js"],(function(e,l){"use strict";var n,a,t,o,u,i,c,d,s,r,f,v,g,h,_,m,C,k,b,w,y,x,P,p,T,j,I;return{setters:[e=>{n=e.d,a=e.C,t=e.D,o=e.aD,u=e.r,i=e.o,c=e.c,d=e.a,s=e.b,r=e.u,f=e.h,v=e.j,g=e.e,h=e.f,_=e.F,m=e.a6,C=e.z,k=e.t,b=e.y,w=e.x,y=e.aE,x=e.T,P=e.aF,p=e.a3},e=>{T=e.l,j=e.a,I=e.d}],execute:function(){const l=["width","height"],R=["src"];e("default",n({__name:"TabPicPage",setup(e){const n=a(),z=a(400),D=a(300),F=a([]);t((()=>{o().then((e=>{F.value=e,console.log("picList",F.value)}))}));const E=async()=>{T(void 0,D.value,z.value).then((e=>{console.log("setPic id: ",e),null!==e&&o().then((e=>{F.value=e}))}))};return(e,a)=>{const t=u("ion-title"),H=u("ion-header"),K=u("ion-button"),L=u("ion-buttons"),M=u("ion-item"),O=u("ion-label"),S=u("ion-icon"),W=u("ion-list"),q=u("ion-content");return i(),c(r(P),{class:"main-bg",id:"main-content"},{default:d((()=>[s(H,null,{default:d((()=>[s(r(m),null,{default:d((()=>[s(t,null,{default:d((()=>a[0]||(a[0]=[f("Tab Pic")]))),_:1})])),_:1})])),_:1}),s(M,{collapse:"condense"},{default:d((()=>[s(r(m),null,{default:d((()=>[s(t,{size:"large"},{default:d((()=>a[1]||(a[1]=[f("Tab 2")]))),_:1}),s(L,{slot:"end"},{default:d((()=>[s(K,{onClick:E},{default:d((()=>a[2]||(a[2]=[f("选择图片")]))),_:1})])),_:1})])),_:1})])),_:1}),v("canvas",{ref_key:"canvasRef",ref:n,width:z.value,height:D.value},null,8,l),s(q,null,{default:d((()=>[s(W,null,{default:d((()=>[(i(!0),g(_,null,h(F.value,((e,l)=>(i(),c(r(C),{key:l},{default:d((()=>[s(M,{onClick:l=>((e,l)=>{const a=new Image;a.src=l.data,a.onload=()=>{if(n.value){const e=n.value.getContext("2d");if(e){const{dx:l,dy:n,drawWidth:t,drawHeight:o}=j(a,z.value,D.value);e.clearRect(0,0,z.value,D.value),e.drawImage(a,l,n,t,o)}}}})(0,e)},{default:d((()=>[s(O,null,{default:d((()=>[f(k(e.id),1)])),_:2},1024),v("img",{src:e.data,class:"max-w-16 max-h-16"},null,8,R)])),_:2},1032,["onClick"]),s(r(b),{side:"end"},{default:d((()=>[s(r(w),{onClick:l=>((e,l)=>{T(l.id,D.value,z.value).then((e=>{console.log("setPic id: ",e),null!==e&&o().then((e=>{F.value=e}))}))})(0,e)},{default:d((()=>[s(S,{icon:r(y)},null,8,["icon"])])),_:2},1032,["onClick"]),s(r(w),{color:"danger",onClick:l=>(async(e,l)=>{const n=await p.create({header:"Confirm",message:"确认删除这张图片么 ["+l.id+"]",buttons:[{text:"OK",handler:()=>{console.log("btnRemoveClk",l.id),I(l.id).then((e=>{console.log("delPic",e),o().then((e=>{F.value=e}))}))}},"Cancel"]});await n.present()})(0,e)},{default:d((()=>[s(S,{icon:r(x)},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}}))}}}));
