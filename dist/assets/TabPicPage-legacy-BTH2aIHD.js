System.register(["./index-legacy-DwxWt7OM.js","./ImgMgr-legacy-vtla9_37.js"],(function(e,l){"use strict";var n,t,a,o,u,i,c,d,s,r,f,g,v,h,_,C,m,b,k,y,w,x,P,p,j,I,R;return{setters:[e=>{n=e.d,t=e.C,a=e.D,o=e.aq,u=e.o,i=e.c,c=e.a,d=e.b,s=e.u,r=e.h,f=e.j,g=e.e,v=e.r,h=e.F,_=e.f,C=e.a1,m=e.z,b=e.t,k=e.y,y=e.x,w=e.ar,x=e.P,P=e.as,p=e.Y},e=>{j=e.l,I=e.a,R=e.d}],execute:function(){const l=["width","height"],T=["src"];e("default",n({__name:"TabPicPage",setup(e){const n=t(),z=t(400),q=t(300),D=t([]);a((()=>{o().then((e=>{D.value=e,console.log("picList",D.value)}))}));const F=async()=>{j(void 0,q.value,z.value).then((e=>{console.log("setPic id: ",e),null!==e&&o().then((e=>{D.value=e}))}))};return(e,t)=>{const a=_("ion-title"),H=_("ion-header"),K=_("ion-button"),L=_("ion-buttons"),M=_("ion-item"),O=_("ion-label"),S=_("ion-icon"),W=_("ion-list"),Y=_("ion-content");return u(),i(s(P),{class:"main-bg"},{default:c((()=>[d(H,null,{default:c((()=>[d(s(C),null,{default:c((()=>[d(a,null,{default:c((()=>t[0]||(t[0]=[r("Tab Pic")]))),_:1})])),_:1})])),_:1}),d(M,{collapse:"condense"},{default:c((()=>[d(s(C),null,{default:c((()=>[d(a,{size:"large"},{default:c((()=>t[1]||(t[1]=[r("Tab 2")]))),_:1}),d(L,{slot:"end"},{default:c((()=>[d(K,{onClick:F},{default:c((()=>t[2]||(t[2]=[r("选择图片")]))),_:1})])),_:1})])),_:1})])),_:1}),f("canvas",{ref_key:"canvasRef",ref:n,width:z.value,height:q.value},null,8,l),d(Y,null,{default:c((()=>[d(W,null,{default:c((()=>[(u(!0),g(h,null,v(D.value,((e,l)=>(u(),i(s(m),{key:l},{default:c((()=>[d(M,{onClick:l=>((e,l)=>{const t=new Image;t.src=l.data,t.onload=()=>{if(n.value){const e=n.value.getContext("2d");if(e){const{dx:l,dy:n,drawWidth:a,drawHeight:o}=I(t,z.value,q.value);e.clearRect(0,0,z.value,q.value),e.drawImage(t,l,n,a,o)}}}})(0,e)},{default:c((()=>[d(O,null,{default:c((()=>[r(b(e.id),1)])),_:2},1024),f("img",{src:e.data,style:{height:"60px"}},null,8,T)])),_:2},1032,["onClick"]),d(s(k),{side:"end"},{default:c((()=>[d(s(y),{onClick:l=>((e,l)=>{j(l.id,q.value,z.value).then((e=>{console.log("setPic id: ",e),null!==e&&o().then((e=>{D.value=e}))}))})(0,e)},{default:c((()=>[d(S,{icon:s(w)},null,8,["icon"])])),_:2},1032,["onClick"]),d(s(y),{color:"danger",onClick:l=>(async(e,l)=>{const n=await p.create({header:"Confirm",message:"确认删除这张图片么 ["+l.id+"]",buttons:[{text:"OK",handler:()=>{console.log("btnRemoveClk",l.id),R(l.id).then((e=>{console.log("delPic",e),o().then((e=>{D.value=e}))}))}},"Cancel"]});await n.present()})(0,e)},{default:c((()=>[d(S,{icon:s(x)},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}}))}}}));
