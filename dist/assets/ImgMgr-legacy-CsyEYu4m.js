System.register(["./index-legacy-CiG0jpAC.js"],(function(e,t){"use strict";var n,a,o;return{setters:[e=>{n=e.aG,a=e.aH,o=e.aI}],execute:function(){e({a:r,c:async function(e,t,n){return new Promise((a=>{const o=document.createElement("input");o.type="file",o.accept="image/*",o.capture="camera",o.addEventListener("change",(async o=>{var i;const s=null===(i=o.target)||void 0===i?void 0:i.files[0];if(!s)return void a(null);const l=new FileReader;l.onload=o=>{const i=o.target.result,s=new Image;s.src=i,s.onload=()=>{void 0===n&&(n=s.width),void 0===t&&(t=s.height);const{drawWidth:o,drawHeight:i}=r(s,n,t),l=document.createElement("canvas");l.width=o,l.height=i,console.log("canvas",i,o);const d=l.getContext("2d");d?(d.clearRect(0,0,n,t),d.drawImage(s,0,0,o,i),l.toBlob((t=>{const n=new FileReader;n.onload=async()=>{const t=n.result,o=await c(e,t);return a(parseInt(o))},n.readAsDataURL(t)}),"image/webp")):a(null)}},l.readAsDataURL(s)})),o.click()}))},d:async function(e){console.log("delImage",e);const n=await o(e);return t.remove("img_"+e),n},g:async function(e){let a=t.get("img_"+e);return null===a&&(a=await n(e),a&&t.set("img_"+e,a,600)),a},l:async function(e,t,n){return new Promise((a=>{const o=document.createElement("input");o.type="file",o.accept="image/*",o.addEventListener("change",(async o=>{var i;const s=null===(i=o.target)||void 0===i?void 0:i.files[0];if(!s)return void a(null);const l=new FileReader;l.onload=o=>{const i=o.target.result,s=new Image;s.src=i,s.onload=()=>{void 0===n&&(n=s.width),void 0===t&&(t=s.height);const{drawWidth:o,drawHeight:i}=r(s,n,t),l=document.createElement("canvas");l.width=o,l.height=i,console.log("canvas",i,o);const d=l.getContext("2d");d?(d.clearRect(0,0,n,t),d.drawImage(s,0,0,o,i),l.toBlob((t=>{const n=new FileReader;n.onload=async()=>{const t=n.result,o=await c(e,t);return a(parseInt(o))},n.readAsDataURL(t)}),"image/webp")):a(null)}},l.readAsDataURL(s)})),o.click()}))}});class t{static set(e,t,n){const a=Date.now()+1e3*n;localStorage.setItem(e,JSON.stringify({value:t,expires:a}))}static get(e){const t=JSON.parse(localStorage.getItem(e)||"null");return t&&t.expires>Date.now()?t.value:(this.remove(e),null)}static remove(e){localStorage.removeItem(e)}static has(e){return!!this.get(e)}}function r(e,t,n){const a=e.width/e.height;let o,r;return a>t/n?(o=t,r=t/a):(r=n,o=n*a),{dx:(t-o)/2,dy:(n-r)/2,drawWidth:o,drawHeight:r}}async function c(e,n){const o=await a(e,n);return t.remove("img_"+e),o}}}}));
