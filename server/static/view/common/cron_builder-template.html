<el-dialog v-model="visible" title="Cron 表达式生成器" width="700" :before-close="handleClose">
  <div class="space-y-4 m-4">
    <!-- 秒 -->
    <div>
      <div class="text-sm font-medium mb-2">秒 (0-59)</div>
      <div class="flex items-center gap-2">
        <el-radio-group
          v-model="cronBuilder.second"
          @change="updateCronExpression"
          class="flex items-center">
          <el-radio label="*" class="!w-[80px]">每秒钟</el-radio>
          <el-radio label="0" class="!w-[80px]">第0秒</el-radio>
          <el-radio label="30" class="!w-[80px]">第30秒</el-radio>
          <el-radio label="custom" class="!w-[80px]">自定义</el-radio>
        </el-radio-group>
        <el-input
          v-model="cronBuilder.secondCustom"
          placeholder="例如: 0,30 或 */10"
          :disabled="cronBuilder.second !== 'custom'"
          class="!w-[200px]"
          @input="updateCronExpression">
        </el-input>
      </div>
    </div>

    <!-- 分 -->
    <div>
      <div class="text-sm font-medium mb-2">分 (0-59)</div>
      <div class="flex items-center gap-2">
        <el-radio-group
          v-model="cronBuilder.minute"
          @change="updateCronExpression"
          class="flex items-center">
          <el-radio label="*" class="!w-[80px]">每分钟</el-radio>
          <el-radio label="0" class="!w-[80px]">第0分</el-radio>
          <el-radio label="30" class="!w-[80px]">第30分</el-radio>
          <el-radio label="custom" class="!w-[80px]">自定义</el-radio>
        </el-radio-group>
        <el-input
          v-model="cronBuilder.minuteCustom"
          placeholder="例如: 0,30 或 */15"
          :disabled="cronBuilder.minute !== 'custom'"
          class="!w-[200px]"
          @input="updateCronExpression">
        </el-input>
      </div>
    </div>

    <!-- 时 -->
    <div>
      <div class="text-sm font-medium mb-2">时 (0-23)</div>
      <div class="flex items-center gap-2">
        <el-radio-group
          v-model="cronBuilder.hour"
          @change="updateCronExpression"
          class="flex items-center">
          <el-radio label="*" class="!w-[80px]">每小时</el-radio>
          <el-radio label="0" class="!w-[80px]">0点</el-radio>
          <el-radio label="9" class="!w-[80px]">9点</el-radio>
          <el-radio label="custom" class="!w-[80px]">自定义</el-radio>
        </el-radio-group>
        <el-input
          v-model="cronBuilder.hourCustom"
          placeholder="例如: 9,12,18 或 */2"
          :disabled="cronBuilder.hour !== 'custom'"
          class="!w-[200px]"
          @input="updateCronExpression">
        </el-input>
      </div>
    </div>

    <!-- 日 -->
    <div>
      <div class="text-sm font-medium mb-2">日 (1-31)</div>
      <div class="flex items-center gap-2">
        <el-radio-group
          v-model="cronBuilder.day"
          @change="updateCronExpression"
          class="flex items-center">
          <el-radio label="*" class="!w-[80px]">每天</el-radio>
          <el-radio label="1" class="!w-[80px]">每月1号</el-radio>
          <el-radio label="15" class="!w-[80px]">每月15号</el-radio>
          <el-radio label="custom" class="!w-[80px]">自定义</el-radio>
        </el-radio-group>
        <el-input
          v-model="cronBuilder.dayCustom"
          placeholder="例如: 1,15 或 */5"
          :disabled="cronBuilder.day !== 'custom'"
          class="!w-[200px]"
          @input="updateCronExpression">
        </el-input>
      </div>
    </div>

    <!-- 月 -->
    <div>
      <div class="text-sm font-medium mb-2">月 (1-12)</div>
      <div class="flex items-center gap-2">
        <el-radio-group
          v-model="cronBuilder.month"
          @change="updateCronExpression"
          class="flex items-center">
          <el-radio label="*" class="!w-[80px]">每月</el-radio>
          <el-radio label="1" class="!w-[80px]">1月</el-radio>
          <el-radio label="6" class="!w-[80px]">6月</el-radio>
          <el-radio label="custom" class="!w-[80px]">自定义</el-radio>
        </el-radio-group>
        <el-input
          v-model="cronBuilder.monthCustom"
          placeholder="例如: 1,6,12 或 */3"
          :disabled="cronBuilder.month !== 'custom'"
          class="!w-[200px]"
          @input="updateCronExpression">
        </el-input>
      </div>
    </div>

    <!-- 周 -->
    <div>
      <div class="text-sm font-medium mb-2">周 (0-7, 0和7表示周日)</div>
      <div class="flex items-center gap-2">
        <el-radio-group
          v-model="cronBuilder.weekday"
          @change="updateCronExpression"
          class="flex items-center">
          <el-radio label="*" class="!w-[80px]">每天</el-radio>
          <el-radio label="1-5" class="!w-[80px]">工作日</el-radio>
          <el-radio label="0,6" class="!w-[80px]">周末</el-radio>
          <el-radio label="custom" class="!w-[80px]">自定义</el-radio>
        </el-radio-group>
        <el-input
          v-model="cronBuilder.weekdayCustom"
          placeholder="例如: 1,3,5 或 1-5"
          :disabled="cronBuilder.weekday !== 'custom'"
          class="!w-[200px]"
          @input="updateCronExpression">
        </el-input>
      </div>
    </div>

    <!-- 生成的 Cron 表达式 -->
    <div class="border-t pt-4">
      <div class="text-sm font-medium mb-2">生成的 Cron 表达式：</div>
      <el-input v-model="cronBuilder.generated" readonly class="mb-2"> </el-input>
      <div class="flex gap-2">
        <el-button type="primary" size="small" @click="handleApply"> 应用 </el-button>
        <el-button type="info" size="small" @click="handlePreview"> 预览执行时间 </el-button>
      </div>
    </div>

    <!-- 常用示例 -->
    <div class="border-t pt-4">
      <div class="text-sm font-medium mb-2">常用示例：</div>
      <div class="space-y-2">
        <div class="flex items-center gap-2 flex-wrap">
          <el-button size="small" @click="applyExample('0 0 * * *')"> 每天0点 </el-button>
          <el-button size="small" @click="applyExample('0 */30 * * *')"> 每30分钟 </el-button>
          <el-button size="small" @click="applyExample('0 0 9 * * 1-5')"> 工作日9点 </el-button>
          <el-button size="small" @click="applyExample('0 0 0 1 * *')"> 每月1号0点 </el-button>
        </div>
      </div>
    </div>
  </div>
</el-dialog>
