import{g as W}from"./user.B8AP8Fwh.js";import{d as w}from"./dayjs.min.CmIfYB6q.js";import{S as Z}from"./date.DYSMdAfs.js";import{E as q,a as X}from"./index.DWo3i1Hu.js";import{P as ee,as as se,al as te,z as J,aH as j,aI as L,A as N,Q as ae,r as T,aJ as F,Z as oe,s as B,c as u,L as le,aK as R,aL as ne,aM as re,_ as U,d as M,a as g,g as h,J as D,I as y,B as t,a6 as ie,aN as ce,y as de,aO as ue,k as _,b as S,j as z,t as p,f as E,e as $,a9 as pe,a3 as me,aP as he,a2 as fe,w as ve,aQ as be,aR as Ce,M as ye,N as ge,o as _e,F as P,C as x,m as Ie}from"./index.Bk_h8V15.js";import"./forEach.BGjLngKn.js";import"./omit.BYRWldEZ.js";import"./_baseEach.D8pnrPCx.js";import"./_createBaseEach.BDK-o74b.js";import"./_castFunction.fM8EBX0N.js";const Y=n=>ee(n)||se(n)||te(n),ke=J({accordion:Boolean,modelValue:{type:N([Array,String,Number]),default:()=>ae([])},expandIconPosition:{type:N([String]),default:"right"},beforeCollapse:{type:N(Function)}}),Ee={[L]:Y,[j]:Y},G=Symbol("collapseContextKey"),Te="ElCollapse",we=(n,s)=>{const e=T(F(n.modelValue)),i=l=>{e.value=l;const a=n.accordion?e.value[0]:e.value;s(L,a),s(j,a)},r=l=>{if(n.accordion)i([e.value[0]===l?"":l]);else{const a=[...e.value],c=a.indexOf(l);c>-1?a.splice(c,1):a.push(l),i(a)}},d=async l=>{const{beforeCollapse:a}=n;if(!a){r(l);return}const c=a(l);[R(c),ne(c)].includes(!0)||re(Te,"beforeCollapse must return type `Promise<boolean>` or `boolean`"),R(c)?c.then(f=>{f!==!1&&r(l)}).catch(f=>{}):c&&r(l)};return oe(()=>n.modelValue,()=>e.value=F(n.modelValue),{deep:!0}),le(G,{activeNames:e,handleItemClick:d}),{activeNames:e,setActiveNames:i}},Ne=n=>{const s=B("collapse");return{rootKls:u(()=>[s.b(),s.b(`icon-position-${n.expandIconPosition}`)])}},De=M({name:"ElCollapse",__name:"collapse",props:ke,emits:Ee,setup(n,{expose:s,emit:e}){const i=n,r=e,{activeNames:d,setActiveNames:l}=we(i,r),{rootKls:a}=Ne(i);return s({activeNames:d,setActiveNames:l}),(c,v)=>(h(),g("div",{class:y(t(a))},[D(c.$slots,"default")],2))}});var Se=U(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const Ke=J({title:{type:String,default:""},name:{type:N([String,Number]),default:void 0},icon:{type:ce,default:ie},disabled:Boolean}),Oe=n=>{const s=de(G),{namespace:e}=B("collapse"),i=T(!1),r=T(!1),d=ue(),l=u(()=>d.current++),a=u(()=>{var o;return(o=n.name)!=null?o:`${e.value}-id-${d.prefix}-${t(l)}`}),c=u(()=>s?.activeNames.value.includes(t(a)));return{focusing:i,id:l,isActive:c,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:i.value=!0},50)},handleHeaderClick:o=>{if(n.disabled)return;const m=o.target;m?.closest("input, textarea, select")||(s?.handleItemClick(t(a)),i.value=!1,r.value=!0)},handleEnterClick:o=>{const m=o.target;m?.closest("input, textarea, select")||(o.preventDefault(),s?.handleItemClick(t(a)))}}},Pe=(n,{focusing:s,isActive:e,id:i})=>{const r=B("collapse"),d=u(()=>[r.b("item"),r.is("active",t(e)),r.is("disabled",n.disabled)]),l=u(()=>[r.be("item","header"),r.is("active",t(e)),{focusing:t(s)&&!n.disabled}]),a=u(()=>[r.be("item","arrow"),r.is("active",t(e))]),c=u(()=>[r.be("item","title")]),v=u(()=>r.be("item","wrap")),f=u(()=>r.be("item","content")),I=u(()=>r.b(`content-${t(i)}`)),o=u(()=>r.b(`head-${t(i)}`));return{itemTitleKls:c,arrowKls:a,headKls:l,rootKls:d,itemWrapperKls:v,itemContentKls:f,scopedContentId:I,scopedHeadId:o}},xe=["id","aria-expanded","aria-controls","aria-describedby","tabindex","aria-disabled"],$e=["id","aria-hidden","aria-labelledby"],Be=M({name:"ElCollapseItem",__name:"collapse-item",props:Ke,setup(n,{expose:s}){const e=n,{focusing:i,id:r,isActive:d,handleFocus:l,handleHeaderClick:a,handleEnterClick:c}=Oe(e),{arrowKls:v,headKls:f,rootKls:I,itemTitleKls:o,itemWrapperKls:m,itemContentKls:K,scopedContentId:O,scopedHeadId:A}=Pe(e,{focusing:i,isActive:d,id:r});return s({isActive:d}),(C,b)=>(h(),g("div",{class:y(t(I))},[_("div",{id:t(A),class:y(t(f)),"aria-expanded":t(d),"aria-controls":t(O),"aria-describedby":t(O),tabindex:C.disabled?void 0:0,"aria-disabled":C.disabled,role:"button",onClick:b[0]||(b[0]=(...k)=>t(a)&&t(a)(...k)),onKeydown:b[1]||(b[1]=he(fe((...k)=>t(c)&&t(c)(...k),["stop"]),["space","enter"])),onFocus:b[2]||(b[2]=(...k)=>t(l)&&t(l)(...k)),onBlur:b[3]||(b[3]=k=>i.value=!1)},[_("span",{class:y(t(o))},[D(C.$slots,"title",{isActive:t(d)},()=>[z(p(C.title),1)])],2),D(C.$slots,"icon",{isActive:t(d)},()=>[S(t(me),{class:y(t(v))},{default:E(()=>[(h(),$(pe(C.icon)))]),_:1},8,["class"])])],42,xe),S(t(Ce),null,{default:E(()=>[ve(_("div",{id:t(O),role:"region",class:y(t(m)),"aria-hidden":!t(d),"aria-labelledby":t(A)},[_("div",{class:y(t(K))},[D(C.$slots,"default")],2)],10,$e),[[be,t(d)]])]),_:3})],2))}});var Q=U(Be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const Me=ye(Se,{CollapseItem:Q}),Ve=ge(Q);class H{week=[];constructor(){this.week=[]}}class Ae{id=-1;name="";order=0;score=0;imgIds=[];constructor(){this.id=-1,this.name="",this.order=0,this.score=0,this.imgIds=[]}static Copy(s){return{id:s.id,name:s.name,order:s.order,score:s.score,imgIds:s.imgIds?.concat()||[]}}}class Fe{id=-1;startTs;endTs;allDay=!0;reminder=0;repeat=0;repeatData=new H;repeatEndTs;title;color=0;priority=-1;groupId=-1;order=0;score;subtasks=[];constructor(){this.id=-1,this.startTs=void 0,this.endTs=void 0,this.allDay=!0,this.reminder=0,this.repeat=0,this.repeatData=new H,this.repeatEndTs=void 0,this.title=void 0,this.color=0,this.priority=-1,this.groupId=-1,this.order=0,this.score=void 0,this.subtasks=[],this.startTs=w().startOf("day"),this.endTs=w().startOf("day")}static Copy(s){const e=JSON.parse(JSON.stringify(s));if(e.startTs=e.startTs?w(e.startTs):void 0,e.endTs=e.endTs?w(e.endTs):void 0,e.repeatEndTs=e.repeatEndTs?w(e.repeatEndTs):void 0,e.subtasks=[],s.subtasks)for(const i of s.subtasks)e.subtasks.push(Ae.Copy(i));return e}}class V{id=-1;name="";userId=-1;schedules=[];save={};constructor(){this.id=-1,this.name="",this.userId=-1,this.schedules=[],this.save={}}static Copy(s){const e=new V;e.id=s.id,e.name=s.name,e.schedules=[];for(const i of s.schedules)e.schedules.push(Fe.Copy(i));return e.save=JSON.parse(JSON.stringify(s.save)),e}}const Re={class:"m-4"},Ze=M({__name:"Info",setup(n){const s=T(1),e=T([{id:1,name:"灿灿日程"},{id:2,name:"昭昭日程"}]),i=T(new V),r=u(()=>e.value.find(l=>l.id===s.value)||e.value[0]),d=async()=>{const l=r.value;console.log("onUserChange",l);try{const a=await W(l.id);console.log("getSave",a),i.value=a}catch(a){console.error(a),Ie.error(JSON.stringify(a))}};return _e(()=>{console.log("Info组件已挂载")}),(l,a)=>{const c=X,v=q,f=Ve,I=Me;return h(),g("div",Re,[a[1]||(a[1]=_("h1",null,"选择用户",-1)),S(v,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value=o),size:"large",class:"mt-4",onChange:d},{default:E(()=>[(h(!0),g(P,null,x(e.value,o=>(h(),$(c,{key:o.id,value:o.id},{default:E(()=>[z(p(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),S(I,null,{default:E(()=>[(h(!0),g(P,null,x(i.value.schedules,o=>(h(),$(f,{key:o.id,title:"["+o.id+"]"+o.title},{default:E(()=>[_("p",null," range: "+p(o?.startTs?.format("YYYY-MM-DD"))+" - "+p(o?.endTs?.format("YYYY-MM-DD"))+" allDay:"+p(o.allDay)+" order:"+p(o.order),1),_("p",null," Remind: "+p(o.reminder)+" | Repeat: "+p(o.repeat)+" | RepeatEnd: "+p(t(Z)(o.repeatEndTs)),1),(h(!0),g(P,null,x(o.subtasks,(m,K)=>(h(),g("p",{key:K},"["+p(m.id)+"]"+p(m.name),1))),128))]),_:2},1032,["title"]))),128))]),_:1})])}}});export{Ze as default};
