import{P as ke,al as Ee,z as Ke,aH as ot,bq as We,aI as Ve,br as pt,A as Ce,c6 as st,D as De,y as bt,r as N,c as E,Z as ne,$ as Te,bV as yt,ag as se,ae as rt,af as oe,_ as Xe,d as ve,s as je,bL as He,bM as $e,a as K,g as w,b as O,f as $,k as A,I as T,B as i,t as J,bm as ht,O as de,as as Se,v as wt,bs as Ct,Y as Et,bu as kt,aM as St,b8 as qe,o as it,U as Bt,bt as Vt,G as Mt,L as Pt,e as D,l as q,F as Me,C as Ie,a2 as ce,M as Lt,aw as Tt,c7 as _e,aW as he,w as Le,a9 as we,aP as Pe,J as Ne,aQ as Fe,j as te,a0 as $t,c8 as It,a3 as ut,h as dt,a1 as Ft,i as Ye,c9 as Rt,R as Ue,bv as Ze,ca as Je,bo as Qe,bd as zt,c2 as Oe,ak as At,bO as ct,cb as ft,cc as et,cd as mt,ar as tt,ax as Nt,aS as vt,bB as Ut,m as Re,bw as Ot,by as xt,aZ as Kt,aV as Wt,ba as Xt}from"./index.Bk_h8V15.js";import{c as jt,f as Ht,u as Yt,g as Gt,E as Dt}from"./index.BFmhhbKo.js";import"./dayjs.min.CmIfYB6q.js";import{v as qt}from"./directive.XQ77cII-.js";import{d as nt,E as _t,b as Zt,a as Jt}from"./index.DkJRzER-.js";import{E as Qt}from"./index.CwcOvHZ1.js";const gt=Symbol("sliderContextKey"),en=Ke({modelValue:{type:Ce([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:De,inputSize:De,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Ce(Function),default:void 0},disabled:{type:Boolean,default:void 0},range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Ce(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:st,default:"top"},marks:{type:Ce(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...pt(["ariaLabel"])}),ze=e=>ke(e)||Ee(e)&&e.every(ke),tn={[Ve]:ze,[We]:ze,[ot]:ze},nn=Ke({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:st,default:"top"}}),ln={[Ve]:e=>ke(e)},an=(e,t,n)=>{const l=N(),o=N(!1),s=E(()=>t.value instanceof Function),u=E(()=>s.value&&t.value(e.modelValue)||e.modelValue),c=nt(()=>{n.value&&(o.value=!0)},50),v=nt(()=>{n.value&&(o.value=!1)},50);return{tooltip:l,tooltipVisible:o,formatValue:u,displayTooltip:c,hideTooltip:v}},on=(e,t,n)=>{const{disabled:l,min:o,max:s,step:u,showTooltip:c,persistent:v,precision:r,sliderSize:b,formatTooltip:a,emitChange:C,resetSize:B,updateDragging:U}=bt(gt),{tooltip:R,tooltipVisible:W,formatValue:I,displayTooltip:X,hideTooltip:Y}=an(e,a,c),G=N(),z=E(()=>`${(e.modelValue-o.value)/(s.value-o.value)*100}%`),m=E(()=>e.vertical?{bottom:z.value}:{left:z.value}),f=()=>{t.hovering=!0,X()},y=()=>{t.hovering=!1,t.dragging||Y()},L=M=>{l.value||(M.preventDefault(),H(M),window.addEventListener("mousemove",Z),window.addEventListener("touchmove",Z),window.addEventListener("mouseup",ee),window.addEventListener("touchend",ee),window.addEventListener("contextmenu",ee),G.value.focus())},_=M=>{l.value||(t.newPosition=Number.parseFloat(z.value)+M/(s.value-o.value)*100,le(t.newPosition),C())},p=()=>{_(-u.value)},V=()=>{_(u.value)},d=()=>{_(-u.value*4)},h=()=>{_(u.value*4)},g=()=>{l.value||(le(0),C())},P=()=>{l.value||(le(100),C())},k=M=>{const x=rt(M);let j=!0;switch(x){case oe.left:case oe.down:p();break;case oe.right:case oe.up:V();break;case oe.home:g();break;case oe.end:P();break;case oe.pageDown:d();break;case oe.pageUp:h();break;default:j=!1;break}j&&M.preventDefault()},F=M=>{let x,j;return M.type.startsWith("touch")?(j=M.touches[0].clientY,x=M.touches[0].clientX):(j=M.clientY,x=M.clientX),{clientX:x,clientY:j}},H=M=>{t.dragging=!0,t.isClick=!0;const{clientX:x,clientY:j}=F(M);e.vertical?t.startY=j:t.startX=x,t.startPosition=Number.parseFloat(z.value),t.newPosition=t.startPosition},Z=M=>{if(t.dragging){t.isClick=!1,X(),B();let x;const{clientX:j,clientY:pe}=F(M);e.vertical?(t.currentY=pe,x=(t.startY-t.currentY)/b.value*100):(t.currentX=j,x=(t.currentX-t.startX)/b.value*100),t.newPosition=t.startPosition+x,le(t.newPosition)}},ee=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||Y(),t.isClick||le(t.newPosition),C()},0),window.removeEventListener("mousemove",Z),window.removeEventListener("touchmove",Z),window.removeEventListener("mouseup",ee),window.removeEventListener("touchend",ee),window.removeEventListener("contextmenu",ee))},le=async M=>{if(M===null||Number.isNaN(+M))return;M=yt(M,0,100);const x=Math.floor((s.value-o.value)/u.value),j=x*u.value/(s.value-o.value)*100,pe=j+(100-j)/2;let ae;if(M<j){const S=j/x,re=Math.round(M/S);ae=o.value+re*u.value}else M<pe?ae=o.value+x*u.value:ae=s.value;ae=Number.parseFloat(ae.toFixed(r.value)),ae!==e.modelValue&&n(Ve,ae),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await se(),t.dragging&&X(),R.value.updatePopper()};return ne(()=>t.dragging,M=>{U(M)}),Te(G,"touchstart",L,{passive:!1}),{disabled:l,button:G,tooltip:R,tooltipVisible:W,showTooltip:c,persistent:v,wrapperStyle:m,formatValue:I,handleMouseEnter:f,handleMouseLeave:y,onButtonDown:L,onKeyDown:k,setPosition:le}},sn=["tabindex"],rn=ve({name:"ElSliderButton",__name:"button",props:nn,emits:ln,setup(e,{expose:t,emit:n}){const l=e,o=n,s=je("slider"),u=He({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:l.modelValue}),c=E(()=>a.value?C.value:!1),{disabled:v,button:r,tooltip:b,showTooltip:a,persistent:C,tooltipVisible:B,wrapperStyle:U,formatValue:R,handleMouseEnter:W,handleMouseLeave:I,onButtonDown:X,onKeyDown:Y,setPosition:G}=on(l,u,o),{hovering:z,dragging:m}=$e(u);return t({onButtonDown:X,onKeyDown:Y,setPosition:G,hovering:z,dragging:m}),(f,y)=>(w(),K("div",{ref_key:"button",ref:r,class:T([i(s).e("button-wrapper"),{hover:i(z),dragging:i(m)}]),style:de(i(U)),tabindex:i(v)?void 0:0,onMouseenter:y[0]||(y[0]=(...L)=>i(W)&&i(W)(...L)),onMouseleave:y[1]||(y[1]=(...L)=>i(I)&&i(I)(...L)),onMousedown:y[2]||(y[2]=(...L)=>i(X)&&i(X)(...L)),onFocus:y[3]||(y[3]=(...L)=>i(W)&&i(W)(...L)),onBlur:y[4]||(y[4]=(...L)=>i(I)&&i(I)(...L)),onKeydown:y[5]||(y[5]=(...L)=>i(Y)&&i(Y)(...L))},[O(i(ht),{ref_key:"tooltip",ref:b,visible:i(B),placement:f.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":f.tooltipClass,disabled:!i(a),persistent:c.value},{content:$(()=>[A("span",null,J(i(R)),1)]),default:$(()=>[A("div",{class:T([i(s).e("button"),{hover:i(z),dragging:i(m)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,sn))}});var lt=Xe(rn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const un=Ke({mark:{type:Ce([String,Object]),default:void 0}});var dn=ve({name:"ElSliderMarker",props:un,setup(e){const t=je("slider"),n=E(()=>Se(e.mark)?e.mark:e.mark.label),l=E(()=>Se(e.mark)?void 0:e.mark.style);return()=>wt("div",{class:t.e("marks-text"),style:l.value},n.value)}});const cn=(e,t,n)=>{const{formItem:l}=Ct(),o=Et(),s=N(),u=N(),c={firstButton:s,secondButton:u},v=kt(),r=E(()=>Math.min(t.firstValue,t.secondValue)),b=E(()=>Math.max(t.firstValue,t.secondValue)),a=E(()=>e.range?`${100*(b.value-r.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),C=E(()=>e.range?`${100*(r.value-e.min)/(e.max-e.min)}%`:"0%"),B=E(()=>e.vertical?{height:e.height}:{}),U=E(()=>e.vertical?{height:a.value,bottom:C.value}:{width:a.value,left:C.value}),R=()=>{if(o.value){const p=o.value.getBoundingClientRect();t.sliderSize=p[e.vertical?"height":"width"]}},W=p=>{const V=e.min+p*(e.max-e.min)/100;if(!e.range)return s;let d;return Math.abs(r.value-V)<Math.abs(b.value-V)?d=t.firstValue<t.secondValue?"firstButton":"secondButton":d=t.firstValue>t.secondValue?"firstButton":"secondButton",c[d]},I=p=>{const V=W(p);return V.value.setPosition(p),V},X=p=>{t.firstValue=p??e.min,G(e.range?[r.value,b.value]:p??e.min)},Y=p=>{t.secondValue=p,e.range&&G([r.value,b.value])},G=p=>{n(Ve,p),n(We,p)},z=async()=>{await se(),n(ot,e.range?[r.value,b.value]:e.modelValue)},m=p=>{var V,d,h,g,P,k;if(v.value||t.dragging)return;R();let F=0;if(e.vertical){const H=(h=(d=(V=p.touches)==null?void 0:V.item(0))==null?void 0:d.clientY)!=null?h:p.clientY;F=(o.value.getBoundingClientRect().bottom-H)/t.sliderSize*100}else{const H=(k=(P=(g=p.touches)==null?void 0:g.item(0))==null?void 0:P.clientX)!=null?k:p.clientX,Z=o.value.getBoundingClientRect().left;F=(H-Z)/t.sliderSize*100}if(!(F<0||F>100))return I(F)};return{elFormItem:l,slider:o,firstButton:s,secondButton:u,sliderDisabled:v,minValue:r,maxValue:b,runwayStyle:B,barStyle:U,resetSize:R,setPosition:I,emitChange:z,onSliderWrapperPrevent:p=>{var V,d;((V=c.firstButton.value)!=null&&V.dragging||(d=c.secondButton.value)!=null&&d.dragging)&&p.preventDefault()},onSliderClick:p=>{m(p)&&z()},onSliderDown:async p=>{const V=m(p);V&&(await se(),V.value.onButtonDown(p))},onSliderMarkerDown:p=>{if(v.value||t.dragging)return;I(p)&&z()},setFirstValue:X,setSecondValue:Y}},fn=(e,t,n,l)=>({stops:E(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const u=Math.ceil((e.max-e.min)/e.step),c=100*e.step/(e.max-e.min),v=Array.from({length:u-1}).map((r,b)=>(b+1)*c);return e.range?v.filter(r=>r<100*(n.value-e.min)/(e.max-e.min)||r>100*(l.value-e.min)/(e.max-e.min)):v.filter(r=>r>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:u=>e.vertical?{bottom:`${u}%`}:{left:`${u}%`}}),mn=e=>E(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((n,l)=>n-l).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),vn=(e,t,n,l,o,s)=>{const u=r=>{o(Ve,r),o(We,r)},c=()=>e.range?![n.value,l.value].every((r,b)=>r===t.oldValue[b]):e.modelValue!==t.oldValue,v=()=>{var r,b;e.min>e.max&&St("Slider","min should not be greater than max.");const a=e.modelValue;e.range&&Ee(a)?a[1]<e.min?u([e.min,e.min]):a[0]>e.max?u([e.max,e.max]):a[0]<e.min?u([e.min,a[1]]):a[1]>e.max?u([a[0],e.max]):(t.firstValue=a[0],t.secondValue=a[1],c()&&(e.validateEvent&&((r=s?.validate)==null||r.call(s,"change").catch(C=>qe())),t.oldValue=a.slice())):!e.range&&ke(a)&&!Number.isNaN(a)&&(a<e.min?u(e.min):a>e.max?u(e.max):(t.firstValue=a,c()&&(e.validateEvent&&((b=s?.validate)==null||b.call(s,"change").catch(C=>qe())),t.oldValue=a)))};v(),ne(()=>t.dragging,r=>{r||v()}),ne(()=>e.modelValue,(r,b)=>{t.dragging||Ee(r)&&Ee(b)&&r.every((a,C)=>a===b[C])&&t.firstValue===r[0]&&t.secondValue===r[1]||v()},{deep:!0}),ne(()=>[e.min,e.max],()=>{v()})},gn=(e,t,n)=>{const l=N();return it(async()=>{e.range?(Ee(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!ke(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),Te(window,"resize",n),await se(),n()}),{sliderWrapper:l}},pn=["id","role","aria-label","aria-labelledby"],bn={key:1},yn=ve({name:"ElSlider",__name:"slider",props:en,emits:tn,setup(e,{expose:t,emit:n}){const l=e,o=n,s=je("slider"),{t:u}=Bt(),c=He({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:v,slider:r,firstButton:b,secondButton:a,sliderDisabled:C,minValue:B,maxValue:U,runwayStyle:R,barStyle:W,resetSize:I,emitChange:X,onSliderWrapperPrevent:Y,onSliderClick:G,onSliderDown:z,onSliderMarkerDown:m,setFirstValue:f,setSecondValue:y}=cn(l,c,o),{stops:L,getStopStyle:_}=fn(l,c,B,U),{inputId:p,isLabeledByFormItem:V}=Vt(l,{formItemContext:v}),d=Mt(),h=E(()=>l.inputSize||d.value),g=E(()=>l.ariaLabel||u("el.slider.defaultLabel",{min:l.min,max:l.max})),P=E(()=>l.range?l.rangeStartLabel||u("el.slider.defaultRangeStartLabel"):g.value),k=E(()=>l.formatValueText?l.formatValueText(x.value):`${x.value}`),F=E(()=>l.rangeEndLabel||u("el.slider.defaultRangeEndLabel")),H=E(()=>l.formatValueText?l.formatValueText(j.value):`${j.value}`),Z=E(()=>[s.b(),s.m(d.value),s.is("vertical",l.vertical),{[s.m("with-input")]:l.showInput}]),ee=mn(l);vn(l,c,B,U,o,v);const le=E(()=>{const S=[l.min,l.max,l.step].map(re=>{const be=`${re}`.split(".")[1];return be?be.length:0});return Math.max.apply(null,S)}),{sliderWrapper:M}=gn(l,c,I),{firstValue:x,secondValue:j,sliderSize:pe}=$e(c),ae=S=>{c.dragging=S};return Te(M,"touchstart",Y,{passive:!1}),Te(M,"touchmove",Y,{passive:!1}),Pt(gt,{...$e(l),sliderSize:pe,disabled:C,precision:le,emitChange:X,resetSize:I,updateDragging:ae}),t({onSliderClick:G}),(S,re)=>{var be,Ge;return w(),K("div",{id:S.range?i(p):void 0,ref_key:"sliderWrapper",ref:M,class:T(Z.value),role:S.range?"group":void 0,"aria-label":S.range&&!i(V)?g.value:void 0,"aria-labelledby":S.range&&i(V)?(be=i(v))==null?void 0:be.labelId:void 0},[A("div",{ref_key:"slider",ref:r,class:T([i(s).e("runway"),{"show-input":S.showInput&&!S.range},i(s).is("disabled",i(C))]),style:de(i(R)),onMousedown:re[0]||(re[0]=(...Q)=>i(z)&&i(z)(...Q)),onTouchstartPassive:re[1]||(re[1]=(...Q)=>i(z)&&i(z)(...Q))},[A("div",{class:T(i(s).e("bar")),style:de(i(W))},null,6),O(lt,{id:S.range?void 0:i(p),ref_key:"firstButton",ref:b,"model-value":i(x),vertical:S.vertical,"tooltip-class":S.tooltipClass,placement:S.placement,role:"slider","aria-label":S.range||!i(V)?P.value:void 0,"aria-labelledby":!S.range&&i(V)?(Ge=i(v))==null?void 0:Ge.labelId:void 0,"aria-valuemin":S.min,"aria-valuemax":S.range?i(j):S.max,"aria-valuenow":i(x),"aria-valuetext":k.value,"aria-orientation":S.vertical?"vertical":"horizontal","aria-disabled":i(C),"onUpdate:modelValue":i(f)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),S.range?(w(),D(lt,{key:0,ref_key:"secondButton",ref:a,"model-value":i(j),vertical:S.vertical,"tooltip-class":S.tooltipClass,placement:S.placement,role:"slider","aria-label":F.value,"aria-valuemin":i(x),"aria-valuemax":S.max,"aria-valuenow":i(j),"aria-valuetext":H.value,"aria-orientation":S.vertical?"vertical":"horizontal","aria-disabled":i(C),"onUpdate:modelValue":i(y)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):q("v-if",!0),S.showStops?(w(),K("div",bn,[(w(!0),K(Me,null,Ie(i(L),(Q,ye)=>(w(),K("div",{key:ye,class:T(i(s).e("stop")),style:de(i(_)(Q))},null,6))),128))])):q("v-if",!0),i(ee).length>0?(w(),K(Me,{key:2},[A("div",null,[(w(!0),K(Me,null,Ie(i(ee),(Q,ye)=>(w(),K("div",{key:ye,style:de(i(_)(Q.position)),class:T([i(s).e("stop"),i(s).e("marks-stop")])},null,6))),128))]),A("div",{class:T(i(s).e("marks"))},[(w(!0),K(Me,null,Ie(i(ee),(Q,ye)=>(w(),D(i(dn),{key:ye,mark:Q.mark,style:de(i(_)(Q.position)),onMousedown:ce(ll=>i(m)(Q.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):q("v-if",!0)],38),S.showInput&&!S.range?(w(),D(i(Qt),{key:0,ref:"input","model-value":i(x),class:T(i(s).e("input")),step:S.step,disabled:i(C),controls:S.showInputControls,min:S.min,max:S.max,precision:le.value,size:h.value,"onUpdate:modelValue":i(f),onChange:i(X)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):q("v-if",!0)],10,pn)}}});var hn=Xe(yn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const wn=Lt(hn),Cn=e=>["",...Tt].includes(e),xe="_trap-focus-children",fe=[],at=e=>{if(fe.length===0)return;const t=rt(e),n=fe[fe.length-1][xe];if(n.length>0&&t===oe.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const l=e.shiftKey,o=e.target===n[0],s=e.target===n[n.length-1];o&&l&&(e.preventDefault(),n[n.length-1].focus()),s&&!l&&(e.preventDefault(),n[0].focus())}},En={beforeMount(e){e[xe]=_e(e),fe.push(e),fe.length<=1&&document.addEventListener("keydown",at)},updated(e){se(()=>{e[xe]=_e(e)})},unmounted(){fe.shift(),fe.length===0&&document.removeEventListener("keydown",at)}},kn=ve({name:"ElMessageBox",directives:{TrapFocus:En},components:{ElButton:Ye,ElFocusTrap:Ft,ElInput:dt,ElOverlay:jt,ElIcon:ut,...It},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Cn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:n,zIndex:l,ns:o,size:s}=Rt("message-box",E(()=>e.buttonSize)),{t:u}=n,{nextZIndex:c}=l,v=N(!1),r=He({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Ue(Ze),cancelButtonLoadingIcon:Ue(Ze),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:c()}),b=E(()=>{const k=r.type;return{[o.bm("icon",k)]:k&&Je[k]}}),a=Qe(),C=Qe(),B=E(()=>{const k=r.type;return r.icon||k&&Je[k]||""}),U=E(()=>!!r.message),R=N(),W=N(),I=N(),X=N(),Y=N(),G=E(()=>r.confirmButtonClass);ne(()=>r.inputValue,async k=>{await se(),e.boxType==="prompt"&&k&&d()},{immediate:!0}),ne(()=>v.value,k=>{var F,H;k&&(e.boxType!=="prompt"&&(r.autofocus?I.value=(H=(F=Y.value)==null?void 0:F.$el)!=null?H:R.value:I.value=R.value),r.zIndex=c()),e.boxType==="prompt"&&(k?se().then(()=>{var Z;X.value&&X.value.$el&&(r.autofocus?I.value=(Z=h())!=null?Z:R.value:I.value=R.value)}):(r.editorErrorMessage="",r.validateError=!1))});const z=E(()=>e.draggable),m=E(()=>e.overflow),{isDragging:f}=Ht(R,W,z,m);it(async()=>{await se(),e.closeOnHashChange&&window.addEventListener("hashchange",y)}),zt(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",y)});function y(){v.value&&(v.value=!1,se(()=>{r.action&&t("action",r.action)}))}const L=()=>{e.closeOnClickModal&&V(r.distinguishCancelAndClose?"close":"cancel")},_=Gt(L),p=k=>{if(r.inputType!=="textarea")return k.preventDefault(),V("confirm")},V=k=>{var F;e.boxType==="prompt"&&k==="confirm"&&!d()||(r.action=k,r.beforeClose?(F=r.beforeClose)==null||F.call(r,k,r,y):y())},d=()=>{if(e.boxType==="prompt"){const k=r.inputPattern;if(k&&!k.test(r.inputValue||""))return r.editorErrorMessage=r.inputErrorMessage||u("el.messagebox.error"),r.validateError=!0,!1;const F=r.inputValidator;if(Oe(F)){const H=F(r.inputValue);if(H===!1)return r.editorErrorMessage=r.inputErrorMessage||u("el.messagebox.error"),r.validateError=!0,!1;if(Se(H))return r.editorErrorMessage=H,r.validateError=!0,!1}}return r.editorErrorMessage="",r.validateError=!1,!0},h=()=>{var k,F;const H=(k=X.value)==null?void 0:k.$refs;return(F=H?.input)!=null?F:H?.textarea},g=()=>{V("close")},P=()=>{e.closeOnPressEscape&&g()};return e.lockScroll&&Yt(v,{ns:o}),{...$e(r),ns:o,overlayEvent:_,visible:v,hasMessage:U,typeClass:b,contentId:a,inputId:C,btnSize:s,iconComponent:B,confirmButtonClasses:G,rootRef:R,focusStartRef:I,headerRef:W,inputRef:X,isDragging:f,confirmRef:Y,doClose:y,handleClose:g,onCloseRequested:P,handleWrapperClick:L,handleInputEnter:p,handleAction:V,t:u}}}),Sn=["aria-label","aria-describedby"],Bn=["aria-label"],Vn=["id"];function Mn(e,t,n,l,o,s){const u=he("el-icon"),c=he("el-input"),v=he("el-button"),r=he("el-focus-trap"),b=he("el-overlay");return w(),D($t,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=a=>e.$emit("vanish")),persisted:""},{default:$(()=>[Le(O(b,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:$(()=>[A("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:T(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...a)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...a)),onMousedown:t[9]||(t[9]=(...a)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...a)),onMouseup:t[10]||(t[10]=(...a)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...a))},[O(r,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:$(()=>[A("div",{ref:"rootRef",class:T([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),e.ns.is("dragging",e.isDragging),{[e.ns.m("center")]:e.center}]),style:de(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=ce(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(w(),K("div",{key:0,ref:"headerRef",class:T([e.ns.e("header"),{"show-close":e.showClose}])},[A("div",{class:T(e.ns.e("title"))},[e.iconComponent&&e.center?(w(),D(u,{key:0,class:T([e.ns.e("status"),e.typeClass])},{default:$(()=>[(w(),D(we(e.iconComponent)))]),_:1},8,["class"])):q("v-if",!0),A("span",null,J(e.title),1)],2),e.showClose?(w(),K("button",{key:0,type:"button",class:T(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=a=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=Pe(ce(a=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[O(u,{class:T(e.ns.e("close"))},{default:$(()=>[(w(),D(we(e.closeIcon||"close")))]),_:1},8,["class"])],42,Bn)):q("v-if",!0)],2)):q("v-if",!0),A("div",{id:e.contentId,class:T(e.ns.e("content"))},[A("div",{class:T(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(w(),D(u,{key:0,class:T([e.ns.e("status"),e.typeClass])},{default:$(()=>[(w(),D(we(e.iconComponent)))]),_:1},8,["class"])):q("v-if",!0),e.hasMessage?(w(),K("div",{key:1,class:T(e.ns.e("message"))},[Ne(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(w(),D(we(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(w(),D(we(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0,textContent:J(e.message)},null,8,["for","textContent"]))])],2)):q("v-if",!0)],2),Le(A("div",{class:T(e.ns.e("input"))},[O(c,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=a=>e.inputValue=a),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:T({invalid:e.validateError}),onKeydown:Pe(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),A("div",{class:T(e.ns.e("errormsg")),style:de({visibility:e.editorErrorMessage?"visible":"hidden"})},J(e.editorErrorMessage),7)],2),[[Fe,e.showInput]])],10,Vn),A("div",{class:T(e.ns.e("btns"))},[e.showCancelButton?(w(),D(v,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:T([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=a=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=Pe(ce(a=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:$(()=>[te(J(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size"])):q("v-if",!0),Le(O(v,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:T([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=a=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=Pe(ce(a=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:$(()=>[te(J(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size"]),[[Fe,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Sn)]),_:3},8,["z-index","overlay-class","mask"]),[[Fe,e.visible]])]),_:3})}var Pn=Xe(kn,[["render",Mn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Be=new Map,Ln=e=>{let t=document.body;return e.appendTo&&(Se(e.appendTo)&&(t=document.querySelector(e.appendTo)),tt(e.appendTo)&&(t=e.appendTo),tt(t)||(t=document.body)),t},Tn=(e,t,n=null)=>{const l=O(Pn,e,Oe(e.message)||ct(e.message)?{default:Oe(e.message)?e.message:()=>e.message}:null);return l.appContext=n,ft(l,t),Ln(e).appendChild(t.firstElementChild),l.component},$n=()=>document.createElement("div"),In=(e,t)=>{const n=$n();e.onVanish=()=>{ft(null,n),Be.delete(o)},e.onAction=s=>{const u=Be.get(o);let c;e.showInput?c={value:o.inputValue,action:s}:c=s,e.callback?e.callback(c,l.proxy):s==="cancel"||s==="close"?e.distinguishCancelAndClose&&s!=="cancel"?u.reject("close"):u.reject("cancel"):u.resolve(c)};const l=Tn(e,n,t),o=l.proxy;for(const s in e)et(e,s)&&!et(o.$props,s)&&(s==="closeIcon"&&mt(e[s])?o[s]=Ue(e[s]):o[s]=e[s]);return o.visible=!0,o};function ge(e,t=null){if(!At)return Promise.reject();let n;return Se(e)||ct(e)?e={message:e}:n=e.callback,new Promise((l,o)=>{const s=In(e,t??ge._context);Be.set(s,{options:e,callback:n,resolve:l,reject:o})})}const Fn=["alert","confirm","prompt"],Rn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Fn.forEach(e=>{ge[e]=zn(e)});function zn(e){return(t,n,l,o)=>{let s="";return mt(n)?(l=n,s=""):Nt(n)?s="":s=n,ge(Object.assign({title:s,message:t,type:"",...Rn[e]},l,{boxType:e}),o)}}ge.close=()=>{Be.forEach((e,t)=>{t.doClose()}),Be.clear()};ge._context=null;const ue=ge;ue.install=e=>{ue._context=e._context,e.config.globalProperties.$msgbox=ue,e.config.globalProperties.$messageBox=ue,e.config.globalProperties.$alert=ue.alert,e.config.globalProperties.$confirm=ue.confirm,e.config.globalProperties.$prompt=ue.prompt};const dl=ue;function An(e){if(!e||e<=0)return"";const t=Math.floor(e),n=Math.floor(t/3600),l=Math.floor(t%3600/60),o=t%60;return n>0?`${n}:${String(l).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${l}:${String(o).padStart(2,"0")}`}function Nn(e){if(!e)return"0 B";const t=1024,n=["B","KB","MB","GB"],l=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,l)*100)/100+" "+n[l]}function cl(e,t=!0){return Array.isArray(e)?e.map(n=>{if(!n||typeof n!="object")return null;const l={uri:n.uri||""};return t&&(l.duration=n.duration||null),l}).filter(n=>n!==null):[]}function fl(e){return!Array.isArray(e)||e.length===0?0:e.reduce((t,n)=>{const l=n?.duration;return t+(typeof l=="number"&&l>0?l:0)},0)}function ml(e){if(!e||typeof e!="string"||e.trim()==="")return console.warn("getMediaFileUrl: æ–‡ä»¶è·¯å¾„æ— æ•ˆ",e),"";try{const t=vt.defaults.baseURL||"";if(!t||typeof t!="string")return console.warn("getMediaFileUrl: API baseURLæ— æ•ˆ",t),"";const n=e.startsWith("/")?e.slice(1):e;if(!n||n.trim()==="")return console.warn("getMediaFileUrl: å¤„ç†åŽçš„è·¯å¾„ä¸ºç©º",e),"";const l=n.split("/").map(s=>encodeURIComponent(s)).join("/"),o=`${t}/media/files/${l}`;return o.includes("index.html")||o.endsWith(".html")?(console.error("getMediaFileUrl: ç”Ÿæˆçš„URLåŒ…å«HTMLé¡µé¢",{filePath:e,mediaUrl:o}),""):o}catch(t){return console.error("getMediaFileUrl: ç”ŸæˆURLæ—¶å‡ºé”™",t,{filePath:e}),""}}const Un={class:"m-4"},On={class:"flex items-center gap-2 mb-2"},xn={class:"flex items-center gap-2 mb-2"},Kn={key:0,class:"text-sm text-blue-600 ml-2"},Wn={class:"flex items-center gap-2"},Xn={key:0},jn={key:1},Hn={key:0},Yn={key:1},Gn={class:"flex items-center justify-between"},Dn={class:"text-sm text-gray-500"},qn={key:0},_n={key:1},Zn={class:"flex gap-2 items-center"},Jn={key:0},vl=ve({__name:"FileDialog",props:{visible:{type:Boolean,default:!1},title:{default:"é€‰æ‹©æ–‡ä»¶"},defaultPath:{default:"/mnt/ext_base"},extensions:{default:"audio"},confirmButtonText:{default:"ç¡®å®š"},confirmLoading:{type:Boolean,default:!1},mode:{default:"file"}},emits:["update:visible","confirm","close"],setup(e,{emit:t}){const n=e,l=t,o=N(n.defaultPath),s=N([]),u=N(!1),c=N([]),v=N(!1);let r=n.defaultPath;const b=()=>{const m=o.value;v.value=!!(m&&m!=="/mnt/ext_base"&&m!=="/")},a=async()=>{try{u.value=!0;const m=o.value||n.defaultPath,f=await vt.get("/listDirectory",{params:{path:m,extensions:n.extensions}});f.data.code===0?(s.value=f.data.data||[],b()):Re.error(f.data.msg||"èŽ·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥")}catch(m){Ot(m,"èŽ·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥")}finally{u.value=!1}},C=()=>{const m=o.value;if(m&&m!=="/mnt/ext_base"&&m!=="/"){const f=String(m).split("/").filter(y=>y);f.pop(),o.value=f.length>0?"/"+f.join("/"):"/mnt/ext_base",b(),a()}},B=()=>{o.value=n.defaultPath,b(),a()},U=m=>{if(m.isDirectory){const f=o.value==="/"?`/${m.name}`:`${o.value}/${m.name}`;o.value=f,b(),a()}else R(m)},R=m=>{if(m.isDirectory)return;const f=o.value==="/"?`/${m.name}`:`${o.value}/${m.name}`,y=c.value.indexOf(f);y>-1?c.value.splice(y,1):c.value.push(f)},W=m=>{if(m.isDirectory)return!1;const f=o.value==="/"?`/${m.name}`:`${o.value}/${m.name}`;return c.value.includes(f)},I=()=>{const m=o.value;s.value.forEach(f=>{if(!f.isDirectory){const y=m==="/"?`/${f.name}`:`${m}/${f.name}`;c.value.includes(y)||c.value.push(y)}})},X=()=>{const m=o.value,f=s.value.filter(y=>!y.isDirectory).map(y=>m==="/"?`/${y.name}`:`${m}/${y.name}`);c.value=c.value.filter(y=>!f.includes(y))},Y=()=>{if(String(n.mode||"file").toLowerCase().trim()==="directory"){const f=o.value||n.defaultPath||"/mnt/ext_base";if(String(f).trim()===""){Re.warning("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç›®å½•");return}l("confirm",[String(f)])}else{if(c.value.length===0){Re.warning("è¯·å…ˆé€‰æ‹©è¦æ·»åŠ çš„æ–‡ä»¶");return}l("confirm",[...c.value])}r=o.value,G()},G=()=>{c.value=[],l("close")},z=E(()=>String(n.mode||"file").toLowerCase().trim()==="directory"?!1:c.value.length===0);return ne(()=>n.visible,m=>{m?(o.value=r,c.value=[],a()):c.value=[]}),ne(o,()=>{a()}),(m,f)=>{const y=dt,L=Ye,_=Zt,p=Jt,V=Ut,d=_t,h=Dt,g=qt;return w(),D(h,{"model-value":e.visible,"onUpdate:modelValue":f[1]||(f[1]=P=>m.$emit("update:visible",P)),title:e.title,width:"800","before-close":G},{footer:$(()=>[Ne(m.$slots,"footer",{},()=>[A("div",Gn,[A("span",Dn,[e.mode==="file"?(w(),K("span",qn,"æç¤ºï¼šç‚¹å‡»æ–‡ä»¶å¯åˆ‡æ¢é€‰æ‹©çŠ¶æ€ï¼ŒåŒå‡»ç›®å½•å¯è¿›å…¥")):(w(),K("span",_n,"æç¤ºï¼šé€‰æ‹©ç›®å½•ä½œä¸ºè½¬å­˜ç›®æ ‡ï¼ŒåŒå‡»ç›®å½•å¯è¿›å…¥"))]),A("div",Zn,[Ne(m.$slots,"footer-prepend"),O(L,{onClick:G},{default:$(()=>[...f[8]||(f[8]=[te("å–æ¶ˆ",-1)])]),_:1}),O(L,{type:"primary",onClick:Y,loading:e.confirmLoading,disabled:z.value},{default:$(()=>[te(J(e.confirmButtonText),1),e.mode==="file"?(w(),K("span",Jn," ("+J(c.value.length)+")",1)):q("",!0)]),_:1},8,["loading","disabled"])])])])]),default:$(()=>[A("div",Un,[A("div",On,[O(y,{"model-value":o.value,placeholder:"å½“å‰è·¯å¾„",readonly:""},null,8,["model-value"]),O(L,{type:"primary",onClick:a,loading:u.value},{default:$(()=>[...f[2]||(f[2]=[te(" åˆ·æ–° ",-1)])]),_:1},8,["loading"])]),A("div",xn,[O(L,{size:"small",onClick:C,disabled:!v.value},{default:$(()=>[...f[3]||(f[3]=[te(" ä¸Šä¸€çº§ ",-1)])]),_:1},8,["disabled"]),O(L,{size:"small",onClick:B},{default:$(()=>[...f[4]||(f[4]=[te(" é¦–é¡µ ",-1)])]),_:1}),O(L,{size:"small",onClick:I},{default:$(()=>[...f[5]||(f[5]=[te(" å…¨é€‰ ",-1)])]),_:1}),O(L,{size:"small",onClick:X},{default:$(()=>[...f[6]||(f[6]=[te(" å–æ¶ˆå…¨é€‰ ",-1)])]),_:1}),c.value.length>0?(w(),K("span",Kn," å·²é€‰æ‹© "+J(c.value.length)+" ä¸ªæ–‡ä»¶ ",1)):q("",!0)])]),Le((w(),D(d,{data:s.value,stripe:"",class:"w-full",height:400,onRowClick:U},{default:$(()=>[O(p,{width:"55"},{default:$(({row:P})=>[P.isDirectory?q("",!0):(w(),D(_,{key:0,"model-value":W(P),onChange:k=>R(P),onClick:f[0]||(f[0]=ce(()=>{},["stop"]))},null,8,["model-value","onChange"]))]),_:1}),O(p,{prop:"name",label:"åç§°","min-width":"200"},{default:$(({row:P})=>[A("div",Wn,[P.isDirectory?(w(),K("span",Xn,"ðŸ“")):(w(),K("span",jn,"ðŸ“„")),A("span",null,J(P.name),1)])]),_:1}),O(p,{prop:"size",label:"å¤§å°",width:"100"},{default:$(({row:P})=>[P.isDirectory?(w(),K("span",Yn,"-")):(w(),K("span",Hn,J(i(Nn)(P.size)),1))]),_:1}),O(p,{label:"çŠ¶æ€",width:"100"},{default:$(({row:P})=>[!P.isDirectory&&W(P)?(w(),D(V,{key:0,type:"success",size:"small"},{default:$(()=>[...f[7]||(f[7]=[te(" å·²é€‰æ‹© ",-1)])]),_:1})):q("",!0)]),_:1})]),_:1},8,["data"])),[[g,u.value]])]),_:3},8,["model-value","title"])}}}),Qn={key:0},el={class:"text-xs text-gray-600 flex-shrink-0 min-width-[35px]"},tl=ve({__name:"MediaComponent",props:{file:{},player:{},isPlaying:{type:Boolean,default:!1},progress:{default:0},duration:{default:0},disabled:{type:Boolean,default:!1},widthClass:{default:"w-32"}},emits:["play","seek"],setup(e,{emit:t}){const n=e,l=t,o=B=>B?.uri||B?.path||B?.name||"",s=N(!1),u=E(()=>{if(n.player){const B=o(n.file);return n.player.isFilePlaying(B)}return n.isPlaying}),c=E(()=>{if(n.player){const B=o(n.file);return n.player.getFilePlayProgress(B)}return n.progress}),v=E(()=>{if(n.player){const B=o(n.file),U=n.file?.duration||n.duration;return n.player.getFileDuration(B,U)}return n.duration}),r=E(()=>An(v.value)),b=E(()=>n.disabled||s.value),a=()=>{if(!b.value){if(u.value){l("play",n.file);return}s.value=!0,l("play",n.file)}},C=B=>{if(!n.disabled&&u.value){if(n.player){const U=o(n.file);n.player.seekFile(U,B)}l("seek",n.file,B)}};return ne([u,v],([B,U])=>{B&&U>0&&(s.value=!1)},{immediate:!0}),ne(()=>n.file,()=>{s.value=!1}),(B,U)=>{const R=ut,W=Ye,I=wn;return w(),K("div",{class:T(["flex items-center gap-1.5 bg-gray-50 rounded border-gray-500 pr-1",e.widthClass])},[O(W,{type:"default",plain:"",size:"small",circle:"",onClick:ce(a,["stop"]),disabled:b.value,loading:s.value&&!u.value,class:"!w-6 !h-6 !p-0 flex-shrink-0 mr-1"},{default:$(()=>[u.value?(w(),K("span",Qn,"â¹")):s.value?q("",!0):(w(),D(R,{key:1,class:"!w-3 !h-3"},{default:$(()=>[O(i(xt))]),_:1}))]),_:1},8,["disabled","loading"]),O(I,{"model-value":c.value,min:0,max:100,step:.1,size:"small",class:"flex-1 min-width-[10px] player-slider","show-tooltip":!1,disabled:!u.value||e.disabled,onChange:C,onInput:C,onClick:U[0]||(U[0]=ce(()=>{},["stop"]))},null,8,["model-value","disabled"]),A("span",el,J(r.value),1)],2)}}}),gl=Kt(tl,[["__scopeId","data-v-9b8781cc"]]),me=()=>{},ie=0,Ae=0;function pl(e={}){const{playingFilePath:t=null,playingFileIndex:n=null,callbacks:l={}}=e,o={onPlay:l.onPlay||me,onPause:l.onPause||me,onTimeUpdate:l.onTimeUpdate||me,onDurationUpdate:l.onDurationUpdate||me,onError:l.onError||me,onEnded:l.onEnded||me},s=N(t),u=N(Ae),c=N(ie),v=N(ie),r=N(!1),b=N(n);let a=null,C=null;const B=()=>{a&&(a.currentTime=ie)},U=d=>{d>0&&isFinite(d)&&(v.value=d,o.onDurationUpdate(d))},R=()=>{u.value=Ae,c.value=ie,v.value=ie,r.value=!1},W=()=>{if(a){try{a.paused||a.pause(),a.currentTime=0,a.removeAttribute("src")}catch{}a=null}},I=()=>{if(!a)return;a.addEventListener("play",h=>{const g=h.target;!g||a!==g||(B(),r.value=!0,o.onPlay(g))});const d=h=>{const g=h.target;!g||a!==g||(B(),U(g.duration))};a.addEventListener("loadedmetadata",d),a.addEventListener("loadeddata",d),a.addEventListener("timeupdate",h=>{const g=h.target;if(!g||a!==g)return;const P=g.duration;if(P>0&&isFinite(P)){const k=g.currentTime,F=k/P*100;c.value=k,u.value=F,v.value!==P&&(v.value=P),o.onTimeUpdate(k,P,F)}}),a.addEventListener("pause",h=>{const g=h.target;!g||a!==g||(r.value=!1,g.ended?o.onEnded(g):o.onPause(g))}),a.addEventListener("error",h=>{const g=h.target;!g||a!==g||(console.error("éŸ³é¢‘æ’­æ”¾å¤±è´¥:",h,"URL:",C),r.value=!1,o.onError(h,C||""))}),a.addEventListener("ended",h=>{const g=h.target;!g||a!==g||(r.value=!1,o.onEnded(g))})},X=(d,h={})=>{if(!d||typeof d!="string"||d.trim()===""){console.error("éŸ³é¢‘URLä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆ:",d);return}try{const g=new URL(d,window.location.origin);if(!g.pathname||g.pathname==="/"||g.pathname.endsWith(".html")){console.error("éŸ³é¢‘URLæ ¼å¼æ— æ•ˆï¼Œå¯èƒ½æ˜¯HTMLé¡µé¢:",d);return}}catch{if(d.includes("index.html")||d.endsWith(".html")){console.error("éŸ³é¢‘URLæ ¼å¼æ— æ•ˆï¼Œå¯èƒ½æ˜¯HTMLé¡µé¢:",d);return}}a&&W(),R(),a=new Audio(d),C=d,B(),h.playingFilePath!==void 0&&(s.value=h.playingFilePath),h.playingFileIndex!==void 0&&(b.value=h.playingFileIndex),I()},Y=()=>a?a.play().catch(d=>{throw console.error("æ’­æ”¾å¤±è´¥:",d),d}):(console.warn("éŸ³é¢‘æœªåŠ è½½ï¼Œæ— æ³•æ’­æ”¾"),Promise.reject(new Error("éŸ³é¢‘æœªåŠ è½½"))),G=()=>{a&&a.pause()},z=d=>{if(!a){console.warn("éŸ³é¢‘æœªåŠ è½½ï¼Œæ— æ³•è·³è½¬");return}const h=a.duration;if(h>0&&isFinite(h)&&isFinite(d)){const g=Math.max(0,Math.min(d/100*h,h));a.currentTime=g,c.value=g,u.value=d}};return{get audio(){return a},playingFilePath:s,playProgress:u,currentTime:c,duration:v,isPlaying:r,playingFileIndex:b,load:X,play:Y,pause:G,seek:z,clear:()=>{if(a){try{a.paused||a.pause(),a.currentTime=ie}catch{}W()}C=null,s.value=null,b.value=null,R()},updateCallbacks:d=>{Object.assign(o,d)},isFilePlaying:d=>d?s.value===d&&a!==null&&!a.paused:!1,getFilePlayProgress:d=>!d||s.value!==d||!a?Ae:u.value,getFileCurrentTime:d=>!d||s.value!==d?ie:c.value,getFileDuration:(d,h=ie)=>d&&s.value===d&&v.value||h,seekFile:(d,h)=>{!a||!d||s.value===d&&z(h)}}}function nl(e,t,n={}){const{immediate:l=!1,autoCleanup:o=!0}=n;let s=null,u=t;const c=async()=>{try{await e()}catch(C){Xt.error("[useInterval] å®šæ—¶å™¨å›žè°ƒæ‰§è¡Œå¤±è´¥:",C)}},v=()=>{u===null||u<=0||(r(),l&&c(),s=setInterval(c,u))},r=()=>{s!==null&&(clearInterval(s),s=null)},b=C=>{C!==void 0&&(u=C),v()},a=()=>s!==null;return t!==null&&t>0&&v(),o&&Wt(()=>{r()}),{start:v,stop:r,restart:b,isRunning:a}}function bl(e,t,n={}){let l=t;const o=nl(e,null,{...n,autoCleanup:!0});return{start:()=>{o.restart(l)},stop:o.stop,restart:s=>{s!==void 0&&(l=s),o.restart(l)},isRunning:o.isRunning}}export{wn as E,gl as M,vl as _,dl as a,nl as b,fl as c,Nn as d,bl as e,An as f,ml as g,Cn as i,cl as n,pl as u};
