import{bZ as J,d as se,z as le,s as ae,b as j,v as Me,cK as Q,J as P,A as W,aN as Be,r as D,o as ge,cG as De,bd as Pe,q as oe,_ as ye,U as Ae,y as ue,cL as Oe,c as h,a as ee,g as N,k as H,l as te,I as _,B as o,t as _e,f as F,e as ne,a9 as Fe,cM as $e,a3 as ze,O as pe,aL as Ne,aI as be,cN as Ye,bI as Re,aM as Ve,Z as K,cO as je,cD as Ue,cF as Xe,cP as He,cQ as Ke,cE as We,b5 as qe,V as Ze,bo as ce,cR as Ge,cS as xe,cd as Je,al as Qe,c2 as de,cT as fe,ak as eo,ag as oo,H as to,b7 as no,a0 as so,an as ve,w as lo,a1 as ao,ao as io,aQ as ro,ac as uo,L as co,M as fo}from"./index.Bk_h8V15.js";const Ce=e=>{if(!e)return{onClick:J,onMousedown:J,onMouseup:J};let l=!1,c=!1;return{onClick:u=>{l&&c&&e(u),l=c=!1},onMousedown:u=>{l=u.target===u.currentTarget},onMouseup:u=>{c=u.target===u.currentTarget}}},vo=le({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:W([String,Array,Object])},zIndex:{type:W([String,Number])}}),mo={click:e=>e instanceof MouseEvent},go="overlay";var yo=se({name:"ElOverlay",props:vo,emits:mo,setup(e,{slots:l,emit:c}){const y=ae(go),t=r=>{c("click",r)},{onClick:d,onMousedown:u,onMouseup:g}=Ce(e.customMaskEvent?void 0:t);return()=>e.mask?j("div",{class:[y.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:g},[P(l,"default")],Q.STYLE|Q.CLASS|Q.PROPS,["onClick","onMouseup","onMousedown"]):Me("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[P(l,"default")])}});const po=yo,he=Symbol("dialogInjectionKey"),me="dialog-fade",we=le({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:Be},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),bo={close:()=>!0},Co=(e,l,c,y)=>{const t={offsetX:0,offsetY:0},d=D(!1),u=(f,m)=>{if(e.value){const{offsetX:p,offsetY:b}=t,w=e.value.getBoundingClientRect(),T=w.left,a=w.top,E=w.width,M=w.height,A=document.documentElement.clientWidth,z=document.documentElement.clientHeight,Y=-T+p,R=-a+b,$=A-T-E+p,I=z-a-(M<z?M:0)+b;y?.value||(f=Math.min(Math.max(f,Y),$),m=Math.min(Math.max(m,R),I)),t.offsetX=f,t.offsetY=m,e.value.style.transform=`translate(${oe(f)}, ${oe(m)})`}},g=f=>{const m=f.clientX,p=f.clientY,{offsetX:b,offsetY:w}=t,T=E=>{d.value||(d.value=!0);const M=b+E.clientX-m,A=w+E.clientY-p;u(M,A)},a=()=>{d.value=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",a)},r=()=>{l.value&&e.value&&(l.value.addEventListener("mousedown",g),window.addEventListener("resize",S))},v=()=>{l.value&&e.value&&(l.value.removeEventListener("mousedown",g),window.removeEventListener("resize",S))},k=()=>{t.offsetX=0,t.offsetY=0,e.value&&(e.value.style.transform="")},S=()=>{const{offsetX:f,offsetY:m}=t;u(f,m)};return ge(()=>{De(()=>{c.value?r():v()})}),Pe(()=>{v()}),{isDragging:d,resetPosition:k,updatePosition:S}},ho=(...e)=>l=>{e.forEach(c=>{c.value=l})},wo=["aria-level"],Eo=["aria-label"],ko=["id"],So=se({name:"ElDialogContent",__name:"dialog-content",props:we,emits:bo,setup(e,{expose:l}){const{t:c}=Ae(),{Close:y}=$e,t=e,{dialogRef:d,headerRef:u,bodyId:g,ns:r,style:v}=ue(he),{focusTrapRef:k}=ue(Oe),S=ho(k,d),f=h(()=>!!t.draggable),m=h(()=>!!t.overflow),{resetPosition:p,updatePosition:b,isDragging:w}=Co(d,u,f,m),T=h(()=>[r.b(),r.is("fullscreen",t.fullscreen),r.is("draggable",f.value),r.is("dragging",w.value),r.is("align-center",!!t.alignCenter),{[r.m("center")]:t.center}]);return l({resetPosition:p,updatePosition:b}),(a,E)=>(N(),ee("div",{ref:o(S),class:_(T.value),style:pe(o(v)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:u,class:_([o(r).e("header"),a.headerClass,{"show-close":a.showClose}])},[P(a.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":a.ariaLevel,class:_(o(r).e("title"))},_e(a.title),11,wo)]),a.showClose?(N(),ee("button",{key:0,"aria-label":o(c)("el.dialog.close"),class:_(o(r).e("headerbtn")),type:"button",onClick:E[0]||(E[0]=M=>a.$emit("close"))},[j(o(ze),{class:_(o(r).e("close"))},{default:F(()=>[(N(),ne(Fe(a.closeIcon||o(y))))]),_:1},8,["class"])],10,Eo)):te("v-if",!0)],2),H("div",{id:o(g),class:_([o(r).e("body"),a.bodyClass])},[P(a.$slots,"default")],10,ko),a.$slots.footer?(N(),ee("footer",{key:0,class:_([o(r).e("footer"),a.footerClass])},[P(a.$slots,"footer")],2)):te("v-if",!0)],6))}});var Io=ye(So,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const To=le({...we,appendToBody:Boolean,appendTo:{type:Ye.to.type,default:"body"},beforeClose:{type:W(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:W([String,Object]),default:void 0}}),Lo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[be]:e=>Ne(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Mo=(e,l={})=>{Re(e)||Ve("[useLockscreen]","You need to pass a ref param to this function");const c=l.ns||ae("popup"),y=h(()=>c.bm("parent","hidden"));let t=0,d=!1,u="0";const g=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=u,We(document.body,y.value))},200)};K(e,r=>{if(!r){g();return}d=!Ue(document.body,y.value),d&&(u=document.body.style.width,Xe(document.body,y.value)),t=He(c.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,k=Ke(document.body,"overflowY");t>0&&(v||k==="scroll")&&d&&(document.body.style.width=`calc(100% - ${t}px)`)}),je(()=>g())},Bo=(e,l)=>{var c;const t=qe().emit,{nextZIndex:d}=Ze();let u="";const g=ce(),r=ce(),v=D(!1),k=D(!1),S=D(!1),f=D((c=e.zIndex)!=null?c:d()),m=D(!1);let p,b;const w=Ge(),T=h(()=>{var n,i;return(i=(n=w.value)==null?void 0:n.namespace)!=null?i:xe}),a=h(()=>{var n;return(n=w.value)==null?void 0:n.dialog}),E=h(()=>{const n={},i=`--${T.value}-dialog`;if(!e.fullscreen){e.top&&(n[`${i}-margin-top`]=e.top);const C=oe(e.width);C&&(n[`${i}-width`]=C)}return n}),M=h(()=>{var n,i,C;return((C=(i=e.draggable)!=null?i:(n=a.value)==null?void 0:n.draggable)!=null?C:!1)&&!e.fullscreen}),A=h(()=>{var n,i,C;return(C=(i=e.alignCenter)!=null?i:(n=a.value)==null?void 0:n.alignCenter)!=null?C:!1}),z=h(()=>{var n,i,C;return(C=(i=e.overflow)!=null?i:(n=a.value)==null?void 0:n.overflow)!=null?C:!1}),Y=h(()=>A.value?{display:"flex"}:{}),R=h(()=>{var n,i,C;const G=(C=(i=e.transition)!=null?i:(n=a.value)==null?void 0:n.transition)!=null?C:me,Te={name:G,onAfterEnter:$,onBeforeLeave:V,onAfterLeave:I};if(Je(G)){const B={...G},x=(X,Le)=>ie=>{Qe(X)?X.forEach(re=>{de(re)&&re(ie)}):de(X)&&X(ie),Le()};return B.onAfterEnter=x(B.onAfterEnter,$),B.onBeforeLeave=x(B.onBeforeLeave,V),B.onAfterLeave=x(B.onAfterLeave,I),B.name||(B.name=me),B}return Te});function $(){t("opened")}function I(){t("closed"),t(be,!1),e.destroyOnClose&&(S.value=!1),m.value=!1}function V(){m.value=!0,t("close")}function q(){b?.(),p?.(),e.openDelay&&e.openDelay>0?{stop:p}=fe(()=>O(),e.openDelay):O()}function s(){p?.(),b?.(),e.closeDelay&&e.closeDelay>0?{stop:b}=fe(()=>Z(),e.closeDelay):Z()}function L(){function n(i){i||(k.value=!0,v.value=!1)}e.beforeClose?e.beforeClose(n):s()}function U(){e.closeOnClickModal&&L()}function O(){eo&&(v.value=!0)}function Z(){v.value=!1}function Ee(){t("openAutoFocus")}function ke(){t("closeAutoFocus")}function Se(n){var i;((i=n.detail)==null?void 0:i.focusReason)==="pointer"&&n.preventDefault()}e.lockScroll&&Mo(v);function Ie(){e.closeOnPressEscape&&L()}return K(()=>e.zIndex,()=>{var n;f.value=(n=e.zIndex)!=null?n:d()}),K(()=>e.modelValue,n=>{var i;n?(k.value=!1,q(),S.value=!0,f.value=(i=e.zIndex)!=null?i:d(),oo(()=>{t("open"),l.value&&(l.value.parentElement.scrollTop=0,l.value.parentElement.scrollLeft=0,l.value.scrollTop=0)})):v.value&&s()}),K(()=>e.fullscreen,n=>{l.value&&(n?(u=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=u)}),ge(()=>{e.modelValue&&(v.value=!0,S.value=!0,q())}),{afterEnter:$,afterLeave:I,beforeLeave:V,handleClose:L,onModalClick:U,close:s,doClose:Z,onOpenAutoFocus:Ee,onCloseAutoFocus:ke,onCloseRequested:Ie,onFocusoutPrevented:Se,titleId:g,bodyId:r,closed:k,style:E,overlayDialogStyle:Y,rendered:S,visible:v,zIndex:f,transitionConfig:R,_draggable:M,_alignCenter:A,_overflow:z,closing:m}},Do=["aria-label","aria-labelledby","aria-describedby"],Po=se({name:"ElDialog",inheritAttrs:!1,__name:"dialog",props:To,emits:Lo,setup(e,{expose:l}){const c=e,y=to();no({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},h(()=>!!y.title));const t=ae("dialog"),d=D(),u=D(),g=D(),{visible:r,titleId:v,bodyId:k,style:S,overlayDialogStyle:f,rendered:m,transitionConfig:p,zIndex:b,_draggable:w,_alignCenter:T,_overflow:a,handleClose:E,onModalClick:M,onOpenAutoFocus:A,onCloseAutoFocus:z,onCloseRequested:Y,onFocusoutPrevented:R,closing:$}=Bo(c,d);co(he,{dialogRef:d,headerRef:u,bodyId:k,ns:t,rendered:m,style:S});const I=Ce(M),V=h(()=>c.modalPenetrable&&!c.modal&&!c.fullscreen);return l({visible:r,dialogContentRef:g,resetPosition:()=>{var s;(s=g.value)==null||s.resetPosition()},handleClose:E}),(s,L)=>(N(),ne(o(uo),{to:s.appendTo,disabled:s.appendTo!=="body"?!1:!s.appendToBody},{default:F(()=>[j(so,ve(o(p),{persisted:""}),{default:F(()=>{var U;return[lo(j(o(po),{"custom-mask-event":"",mask:s.modal,"overlay-class":[(U=s.modalClass)!=null?U:"",`${o(t).namespace.value}-modal-dialog`,o(t).is("penetrable",V.value)],"z-index":o(b)},{default:F(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:o(v),"aria-describedby":o(k),class:_([`${o(t).namespace.value}-overlay-dialog`,o(t).is("closing",o($))]),style:pe(o(f)),onClick:L[0]||(L[0]=(...O)=>o(I).onClick&&o(I).onClick(...O)),onMousedown:L[1]||(L[1]=(...O)=>o(I).onMousedown&&o(I).onMousedown(...O)),onMouseup:L[2]||(L[2]=(...O)=>o(I).onMouseup&&o(I).onMouseup(...O))},[j(o(ao),{loop:"",trapped:o(r),"focus-start-el":"container",onFocusAfterTrapped:o(A),onFocusAfterReleased:o(z),onFocusoutPrevented:o(R),onReleaseRequested:o(Y)},{default:F(()=>[o(m)?(N(),ne(Io,ve({key:0,ref_key:"dialogContentRef",ref:g},s.$attrs,{center:s.center,"align-center":o(T),"close-icon":s.closeIcon,draggable:o(w),overflow:o(a),fullscreen:s.fullscreen,"header-class":s.headerClass,"body-class":s.bodyClass,"footer-class":s.footerClass,"show-close":s.showClose,title:s.title,"aria-level":s.headerAriaLevel,onClose:o(E)}),io({header:F(()=>[s.$slots.title?P(s.$slots,"title",{key:1}):P(s.$slots,"header",{key:0,close:o(E),titleId:o(v),titleClass:o(t).e("title")})]),default:F(()=>[P(s.$slots,"default")]),_:2},[s.$slots.footer?{name:"footer",fn:F(()=>[P(s.$slots,"footer")]),key:"0"}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):te("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Do)]),_:3},8,["mask","overlay-class","z-index"]),[[ro,o(r)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Ao=ye(Po,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const _o=fo(Ao);export{_o as E,To as a,Bo as b,po as c,Lo as d,ho as e,Co as f,Ce as g,Mo as u};
