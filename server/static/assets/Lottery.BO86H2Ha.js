import{n as it,d as se,p as rt,q as Ae,s as _e,w as Le,v as Se,x as ct,y as Ze,z as me,A as pe,_ as be,a as $,B as o,g as u,k as z,F as H,C as he,e as D,b as n,D as ut,G as Qe,H as dt,c as U,l as W,I as T,J as j,j as X,t as fe,K as pt,L as ft,M as xe,N as mt,O as Oe,P as Me,Q as et,R as Ye,S as vt,T as gt,U as tt,V as yt,r as P,W as ht,X as _t,Y as bt,Z as Ve,o as Te,$ as de,f as c,a0 as wt,a1 as kt,a2 as Ct,a3 as le,a4 as St,a5 as Et,a6 as zt,a7 as xt,a8 as $t,a9 as at,aa as Nt,ab as It,ac as Lt,ad as Vt,ae as Ot,af as ye,ag as lt,ah as st,ai as Tt,aj as Rt,ak as Ee,al as Dt,am as Pt,an as Fe,ao as At,ap as Ue,aq as Be,ar as Ut,as as Bt,at as Mt,au as Wt,av as Yt,aw as Ft,ax as Xe,ay as Xt,h as jt,i as Ht,az as je,m as ie,aA as He,aB as Gt,aC as Kt,aD as Ge,aE as qt,aF as Ke,aG as Jt}from"./index.KrHQqm_N.js";import{g as Zt,s as Qt}from"./rds.DSmSYMnS.js";import{E as ea,a as ta}from"./index.qNAgsoTs.js";import{v as aa}from"./directive.DwaZpBqp.js";import{d as la,E as sa,a as na,b as oa}from"./index.By6g3UeZ.js";import{E as ia}from"./index.BYzvKhhC.js";import{u as ra,E as ca}from"./index.BtMcJ_qu.js";import{f as qe}from"./forEach.DGMbEWPg.js";import{E as ua}from"./index.DJ8dOIp6.js";import"./omit.BzkMKP2q.js";import"./_baseEach.auwzeQJ9.js";import"./_createBaseEach.Dv_cNX5C.js";import"./_castFunction.Qx7XLqR1.js";import"./index.BGfKiGcV.js";var da="Expected a function";function Ne(_,b,m){var p=!0,a=!0;if(typeof _!="function")throw new TypeError(da);return it(m)&&(p="leading"in m?!!m.leading:p,a="trailing"in m?!!m.trailing:a),la(_,b,{leading:p,maxWait:b,trailing:a})}const We=Symbol("elDescriptions");var ze=se({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Ze(We,{})}},render(){var _,b,m,p;const a=rt(this.cell),g=(((_=this.cell)==null?void 0:_.dirs)||[]).map(y=>{const{dir:I,arg:O,modifiers:J,value:ne}=y;return[I,ne,O,J]}),{border:w,direction:k}=this.descriptions,r=k==="vertical",f=()=>{var y,I,O;return((O=(I=(y=this.cell)==null?void 0:y.children)==null?void 0:I.label)==null?void 0:O.call(I))||a.label},h=()=>{var y,I,O;return(O=(I=(y=this.cell)==null?void 0:y.children)==null?void 0:I.default)==null?void 0:O.call(I)},v=a.span,C=a.rowspan,V=a.align?`is-${a.align}`:"",R=a.labelAlign?`is-${a.labelAlign}`:V,N=a.className,B=a.labelClassName,A=this.type==="label"&&(m=(b=a.labelWidth)!=null?b:this.descriptions.labelWidth)!=null?m:a.width,x={width:Ae(A),minWidth:Ae(a.minWidth)},L=_e("descriptions");switch(this.type){case"label":return Le(Se(this.tag,{style:x,class:[L.e("cell"),L.e("label"),L.is("bordered-label",w),L.is("vertical-label",r),R,B],colSpan:r?v:1,rowspan:r?1:C},f()),g);case"content":return Le(Se(this.tag,{style:x,class:[L.e("cell"),L.e("content"),L.is("bordered-content",w),L.is("vertical-content",r),V,N],colSpan:r?v:v*2-1,rowspan:r?C*2-1:C},h()),g);default:{const y=f(),I={},O=Ae((p=a.labelWidth)!=null?p:this.descriptions.labelWidth);return O&&(I.width=O,I.display="inline-block"),Le(Se("td",{style:x,class:[L.e("cell"),V],colSpan:v,rowspan:C},[ct(y)?void 0:Se("span",{style:I,class:[L.e("label"),B]},y),Se("span",{class:[L.e("content"),N]},h())]),g)}}}});const pa=me({row:{type:pe(Array),default:()=>[]}}),fa={key:1},ma=se({name:"ElDescriptionsRow",__name:"descriptions-row",props:pa,setup(_){const b=Ze(We,{});return(m,p)=>o(b).direction==="vertical"?(u(),$(H,{key:0},[z("tr",null,[(u(!0),$(H,null,he(m.row,(a,g)=>(u(),D(o(ze),{key:`tr1-${g}`,cell:a,tag:"th",type:"label"},null,8,["cell"]))),128))]),z("tr",null,[(u(!0),$(H,null,he(m.row,(a,g)=>(u(),D(o(ze),{key:`tr2-${g}`,cell:a,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(u(),$("tr",fa,[(u(!0),$(H,null,he(m.row,(a,g)=>(u(),$(H,{key:`tr3-${g}`},[o(b).border?(u(),$(H,{key:0},[n(o(ze),{cell:a,tag:"td",type:"label"},null,8,["cell"]),n(o(ze),{cell:a,tag:"td",type:"content"},null,8,["cell"])],64)):(u(),D(o(ze),{key:1,cell:a,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var va=be(ma,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const ga=me({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:ut,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number]}}),nt="ElDescriptionsItem",ya=se({name:"ElDescriptions",__name:"description",props:ga,setup(_){const b=_,m=_e("descriptions"),p=Qe(),a=dt();ft(We,b);const g=U(()=>[m.b(),m.m(p.value)]),w=(r,f,h,v=!1)=>(r.props||(r.props={}),f>h&&(r.props.span=h),v&&(r.props.span=f),r),k=()=>{if(!a.default)return[];const r=pt(a.default()).filter(R=>{var N;return((N=R?.type)==null?void 0:N.name)===nt}),f=[];let h=[],v=b.column,C=0;const V=[];return r.forEach((R,N)=>{var B,A,x;const L=((B=R.props)==null?void 0:B.span)||1,y=((A=R.props)==null?void 0:A.rowspan)||1,I=f.length;if(V[I]||(V[I]=0),y>1)for(let O=1;O<y;O++)V[x=I+O]||(V[x]=0),V[I+O]++,C++;if(V[I]>0&&(v-=V[I],V[I]=0),N<r.length-1&&(C+=L>v?v:L),N===r.length-1){const O=b.column-C%b.column;h.push(w(R,O,v,!0)),f.push(h);return}L<v?(v-=L,h.push(R)):(h.push(w(R,L,v)),f.push(h),v=b.column,h=[])}),f};return(r,f)=>(u(),$("div",{class:T(g.value)},[r.title||r.extra||r.$slots.title||r.$slots.extra?(u(),$("div",{key:0,class:T(o(m).e("header"))},[z("div",{class:T(o(m).e("title"))},[j(r.$slots,"title",{},()=>[X(fe(r.title),1)])],2),z("div",{class:T(o(m).e("extra"))},[j(r.$slots,"extra",{},()=>[X(fe(r.extra),1)])],2)],2)):W("v-if",!0),z("div",{class:T(o(m).e("body"))},[z("table",{class:T([o(m).e("table"),o(m).is("bordered",r.border)])},[z("tbody",null,[(u(!0),$(H,null,he(k(),(h,v)=>(u(),D(va,{key:v,row:h},null,8,["row"]))),128))])],2)],2)],2))}});var ha=be(ya,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]);const Je=["left","center","right"],_a=me({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number]},align:{type:String,values:Je,default:"left"},labelAlign:{type:String,values:Je},className:{type:String,default:""},labelClassName:{type:String,default:""}}),ot=se({name:nt,props:_a}),ba=xe(ha,{DescriptionsItem:ot}),wa=mt(ot),ka=me({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:pe(String),default:"solid"}}),Ca=se({name:"ElDivider",__name:"divider",props:ka,setup(_){const b=_,m=_e("divider"),p=U(()=>m.cssVar({"border-style":b.borderStyle}));return(a,g)=>(u(),$("div",{class:T([o(m).b(),o(m).m(a.direction)]),style:Oe(p.value),role:"separator"},[a.$slots.default&&a.direction!=="vertical"?(u(),$("div",{key:0,class:T([o(m).e("text"),o(m).is(a.contentPosition)])},[j(a.$slots,"default")],2)):W("v-if",!0)],6))}});var Sa=be(Ca,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const Ea=xe(Sa),za=me({urlList:{type:pe(Array),default:()=>et([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:pe(String)}}),xa={close:()=>!0,error:_=>_ instanceof Event,switch:_=>Me(_),rotate:_=>Me(_)},$a=["src","crossorigin"],Na=se({name:"ElImageViewer",__name:"image-viewer",props:za,emits:xa,setup(_,{expose:b,emit:m}){var p;const a={CONTAIN:{name:"contain",icon:Ye(gt)},ORIGINAL:{name:"original",icon:Ye(vt)}},g=_,w=m;let k;const{t:r}=tt(),f=_e("image-viewer"),{nextZIndex:h}=yt(),v=P(),C=P(),V=ht(),R=U(()=>{const{scale:s,minScale:e,maxScale:i}=g;return _t(s,e,i)}),N=P(!0),B=P(!1),A=P(!1),x=P(g.initialIndex),L=bt(a.CONTAIN),y=P({scale:R.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),I=P((p=g.zIndex)!=null?p:h());ra(A,{ns:f});const O=U(()=>{const{urlList:s}=g;return s.length<=1}),J=U(()=>x.value===0),ne=U(()=>x.value===g.urlList.length-1),oe=U(()=>g.urlList[x.value]),t=U(()=>[f.e("btn"),f.e("prev"),f.is("disabled",!g.infinite&&J.value)]),l=U(()=>[f.e("btn"),f.e("next"),f.is("disabled",!g.infinite&&ne.value)]),S=U(()=>{const{scale:s,deg:e,offsetX:i,offsetY:Z,enableTransition:ee}=y.value;let q=i/s,te=Z/s;const ge=e*Math.PI/180,ue=Math.cos(ge),Ce=Math.sin(ge);q=q*ue+te*Ce,te=te*ue-i/s*Ce;const Pe={transform:`scale(${s}) rotate(${e}deg) translate(${q}px, ${te}px)`,transition:ee?"transform .3s":""};return L.value.name===a.CONTAIN.name&&(Pe.maxWidth=Pe.maxHeight="100%"),Pe}),M=U(()=>`${x.value+1} / ${g.urlList.length}`);function E(){G(),k?.(),A.value=!1,w("close")}function re(){const s=Ne(i=>{switch(Ot(i)){case ye.esc:g.closeOnPressEscape&&E();break;case ye.space:ce();break;case ye.left:we();break;case ye.up:Q("zoomIn");break;case ye.right:ke();break;case ye.down:Q("zoomOut");break}}),e=Ne(i=>{const Z=i.deltaY||i.deltaX;Q(Z<0?"zoomIn":"zoomOut",{zoomRate:g.zoomRate,enableTransition:!1})});V.run(()=>{de(document,"keydown",s),de(v,"wheel",e)})}function G(){V.stop()}function d(){N.value=!1}function Y(s){B.value=!0,N.value=!1,w("error",s),s.target.alt=r("el.image.error")}function F(s){if(N.value||s.button!==0||!v.value)return;y.value.enableTransition=!1;const{offsetX:e,offsetY:i}=y.value,Z=s.pageX,ee=s.pageY,q=Ne(ue=>{y.value={...y.value,offsetX:e+ue.pageX-Z,offsetY:i+ue.pageY-ee}}),te=de(document,"mousemove",q),ge=de(document,"mouseup",()=>{te(),ge()});s.preventDefault()}function ae(s){if(N.value||!v.value||s.touches.length!==1)return;y.value.enableTransition=!1;const{offsetX:e,offsetY:i}=y.value,{pageX:Z,pageY:ee}=s.touches[0],q=Ne(ue=>{const Ce=ue.touches[0];y.value={...y.value,offsetX:e+Ce.pageX-Z,offsetY:i+Ce.pageY-ee}}),te=de(document,"touchmove",q),ge=de(document,"touchend",()=>{te(),ge()});s.preventDefault()}function K(){y.value={scale:R.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function ce(){if(N.value||B.value)return;const s=Vt(a),e=Object.values(a),i=L.value.name,ee=(e.findIndex(q=>q.name===i)+1)%s.length;L.value=a[s[ee]],K()}function ve(s){B.value=!1;const e=g.urlList.length;x.value=(s+e)%e}function we(){J.value&&!g.infinite||ve(x.value-1)}function ke(){ne.value&&!g.infinite||ve(x.value+1)}function Q(s,e={}){if(N.value||B.value)return;const{minScale:i,maxScale:Z}=g,{zoomRate:ee,rotateDeg:q,enableTransition:te}={zoomRate:g.zoomRate,rotateDeg:90,enableTransition:!0,...e};switch(s){case"zoomOut":y.value.scale>i&&(y.value.scale=Number.parseFloat((y.value.scale/ee).toFixed(3)));break;case"zoomIn":y.value.scale<Z&&(y.value.scale=Number.parseFloat((y.value.scale*ee).toFixed(3)));break;case"clockwise":y.value.deg+=q,w("rotate",y.value.deg);break;case"anticlockwise":y.value.deg-=q,w("rotate",y.value.deg);break}y.value.enableTransition=te}function $e(s){var e;((e=s.detail)==null?void 0:e.focusReason)==="pointer"&&s.preventDefault()}function Re(){g.closeOnPressEscape&&E()}function De(s){if(s.ctrlKey){if(s.deltaY<0)return s.preventDefault(),!1;if(s.deltaY>0)return s.preventDefault(),!1}}return Ve(()=>R.value,s=>{y.value.scale=s}),Ve(oe,()=>{lt(()=>{const s=C.value;s?.complete||(N.value=!0)})}),Ve(x,s=>{K(),w("switch",s)}),Te(()=>{A.value=!0,re(),k=de("wheel",De,{passive:!1})}),b({setActiveItem:ve}),(s,e)=>(u(),D(o(Lt),{to:"body",disabled:!s.teleported},{default:c(()=>[n(wt,{name:"viewer-fade",appear:""},{default:c(()=>[z("div",{ref_key:"wrapper",ref:v,tabindex:-1,class:T(o(f).e("wrapper")),style:Oe({zIndex:I.value})},[n(o(kt),{loop:"",trapped:"","focus-trap-el":v.value,"focus-start-el":"container",onFocusoutPrevented:$e,onReleaseRequested:Re},{default:c(()=>[z("div",{class:T(o(f).e("mask")),onClick:e[0]||(e[0]=Ct(i=>s.hideOnClickModal&&E(),["self"]))},null,2),W(" CLOSE "),z("span",{class:T([o(f).e("btn"),o(f).e("close")]),onClick:E},[n(o(le),null,{default:c(()=>[n(o(St))]),_:1})],2),W(" ARROW "),O.value?W("v-if",!0):(u(),$(H,{key:0},[z("span",{class:T(t.value),onClick:we},[n(o(le),null,{default:c(()=>[n(o(Et))]),_:1})],2),z("span",{class:T(l.value),onClick:ke},[n(o(le),null,{default:c(()=>[n(o(zt))]),_:1})],2)],64)),s.$slots.progress||s.showProgress?(u(),$("div",{key:1,class:T([o(f).e("btn"),o(f).e("progress")])},[j(s.$slots,"progress",{activeIndex:x.value,total:s.urlList.length},()=>[X(fe(M.value),1)])],2)):W("v-if",!0),W(" ACTIONS "),z("div",{class:T([o(f).e("btn"),o(f).e("actions")])},[z("div",{class:T(o(f).e("actions__inner"))},[j(s.$slots,"toolbar",{actions:Q,prev:we,next:ke,reset:ce,activeIndex:x.value,setActiveItem:ve},()=>[n(o(le),{onClick:e[1]||(e[1]=i=>Q("zoomOut"))},{default:c(()=>[n(o(xt))]),_:1}),n(o(le),{onClick:e[2]||(e[2]=i=>Q("zoomIn"))},{default:c(()=>[n(o($t))]),_:1}),z("i",{class:T(o(f).e("actions__divider"))},null,2),n(o(le),{onClick:ce},{default:c(()=>[(u(),D(at(L.value.icon)))]),_:1}),z("i",{class:T(o(f).e("actions__divider"))},null,2),n(o(le),{onClick:e[3]||(e[3]=i=>Q("anticlockwise"))},{default:c(()=>[n(o(Nt))]),_:1}),n(o(le),{onClick:e[4]||(e[4]=i=>Q("clockwise"))},{default:c(()=>[n(o(It))]),_:1})])],2)],2),W(" CANVAS "),z("div",{class:T(o(f).e("canvas"))},[B.value&&s.$slots["viewer-error"]?j(s.$slots,"viewer-error",{key:0,activeIndex:x.value,src:oe.value}):(u(),$("img",{ref_key:"imgRef",ref:C,key:oe.value,src:oe.value,style:Oe(S.value),class:T(o(f).e("img")),crossorigin:s.crossorigin,onLoad:d,onError:Y,onMousedown:F,onTouchstart:ae},null,46,$a))],2),j(s.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var Ia=be(Na,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const La=xe(Ia),Va=me({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:pe([String,Object])},previewSrcList:{type:pe(Array),default:()=>et([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:pe(String)}}),Oa={load:_=>_ instanceof Event,error:_=>_ instanceof Event,switch:_=>Me(_),close:()=>!0,show:()=>!0},Ta=["src","loading","crossorigin"],Ra={key:0},Da=se({name:"ElImage",inheritAttrs:!1,__name:"image",props:Va,emits:Oa,setup(_,{expose:b,emit:m}){const p=_,a=m,{t:g}=tt(),w=_e("image"),k=st(),r=U(()=>Tt(Object.entries(k).filter(([d])=>/^(data-|on[A-Z])/i.test(d)||["id","style"].includes(d)))),f=Rt({excludeListeners:!0,excludeKeys:U(()=>Object.keys(r.value))}),h=P(),v=P(!1),C=P(!0),V=P(!1),R=P(),N=P(),B=Ee&&"loading"in HTMLImageElement.prototype;let A;const x=U(()=>[w.e("inner"),y.value&&w.e("preview"),C.value&&w.is("loading")]),L=U(()=>{const{fit:d}=p;return Ee&&d?{objectFit:d}:{}}),y=U(()=>{const{previewSrcList:d}=p;return Dt(d)&&d.length>0}),I=U(()=>{const{previewSrcList:d,initialIndex:Y}=p;let F=Y;return Y>d.length-1&&(F=0),F}),O=U(()=>p.loading==="eager"?!1:!B&&p.loading==="lazy"||p.lazy),J=()=>{Ee&&(C.value=!0,v.value=!1,h.value=p.src)};function ne(d){C.value=!1,v.value=!1,a("load",d)}function oe(d){C.value=!1,v.value=!0,a("error",d)}function t(d){d&&(J(),M())}const l=Pt(t,200,!0);async function S(){var d;if(!Ee)return;await lt();const{scrollContainer:Y}=p;if(Ut(Y))N.value=Y;else if(Bt(Y)&&Y!=="")N.value=(d=document.querySelector(Y))!=null?d:void 0;else if(R.value){const ae=Mt(R.value);N.value=Wt(ae)?void 0:ae}const{stop:F}=Yt(R,([ae])=>{l(ae.isIntersecting)},{root:N});A=F}function M(){!Ee||!l||(A?.(),N.value=void 0,A=void 0)}function E(){y.value&&(V.value=!0,a("show"))}function re(){V.value=!1,a("close")}function G(d){a("switch",d)}return Ve(()=>p.src,()=>{O.value?(C.value=!0,v.value=!1,M(),S()):J()}),Te(()=>{O.value?S():J()}),b({showPreview:E}),(d,Y)=>(u(),$("div",Fe({ref_key:"container",ref:R},r.value,{class:[o(w).b(),d.$attrs.class]}),[v.value?j(d.$slots,"error",{key:0},()=>[z("div",{class:T(o(w).e("error"))},fe(o(g)("el.image.error")),3)]):(u(),$(H,{key:1},[h.value!==void 0?(u(),$("img",Fe({key:0},o(f),{src:h.value,loading:d.loading,style:L.value,class:x.value,crossorigin:d.crossorigin,onClick:E,onLoad:ne,onError:oe}),null,16,Ta)):W("v-if",!0),C.value?(u(),$("div",{key:1,class:T(o(w).e("wrapper"))},[j(d.$slots,"placeholder",{},()=>[z("div",{class:T(o(w).e("placeholder"))},null,2)])],2)):W("v-if",!0)],64)),y.value?(u(),$(H,{key:2},[V.value?(u(),D(o(La),{key:0,"z-index":d.zIndex,"initial-index":I.value,infinite:d.infinite,"zoom-rate":d.zoomRate,"min-scale":d.minScale,"max-scale":d.maxScale,"show-progress":d.showProgress,"url-list":d.previewSrcList,scale:d.scale,crossorigin:d.crossorigin,"hide-on-click-modal":d.hideOnClickModal,teleported:d.previewTeleported,"close-on-press-escape":d.closeOnPressEscape,onClose:re,onSwitch:G},At({toolbar:c(F=>[j(d.$slots,"toolbar",Ue(Be(F)))]),default:c(()=>[d.$slots.viewer?(u(),$("div",Ra,[j(d.$slots,"viewer")])):W("v-if",!0)]),_:2},[d.$slots.progress?{name:"progress",fn:c(F=>[j(d.$slots,"progress",Ue(Be(F)))]),key:"0"}:void 0,d.$slots["viewer-error"]?{name:"viewer-error",fn:c(F=>[j(d.$slots,"viewer-error",Ue(Be(F)))]),key:"1"}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","scale","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):W("v-if",!0)],64)):W("v-if",!0)],16))}});var Pa=be(Da,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Aa=xe(Pa),Ua=me({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Ft,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),Ba=se({name:"ElText",__name:"text",props:Ua,setup(_){const b=_,m=P(),p=Qe(),a=_e("text"),g=U(()=>[a.b(),a.m(b.type),a.m(p.value),a.is("truncated",b.truncated),a.is("line-clamp",!Xe(b.lineClamp))]),w=()=>{var k,r,f,h,v,C,V;if(st().title)return;let N=!1;const B=((k=m.value)==null?void 0:k.textContent)||"";if(b.truncated){const A=(r=m.value)==null?void 0:r.offsetWidth,x=(f=m.value)==null?void 0:f.scrollWidth;A&&x&&x>A&&(N=!0)}else if(!Xe(b.lineClamp)){const A=(h=m.value)==null?void 0:h.offsetHeight,x=(v=m.value)==null?void 0:v.scrollHeight;A&&x&&x>A&&(N=!0)}N?(C=m.value)==null||C.setAttribute("title",B):(V=m.value)==null||V.removeAttribute("title")};return Te(w),Xt(w),(k,r)=>(u(),D(at(k.tag),{ref_key:"textRef",ref:m,class:T(g.value),style:Oe({"-webkit-line-clamp":k.lineClamp})},{default:c(()=>[j(k.$slots,"default")]),_:3},8,["class","style"]))}});var Ma=be(Ba,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const Wa=xe(Ma);async function Ya(_,b={}){const p={...{maxWidth:800,maxHeight:600,quality:.8},...b};if(_.type==="image/svg+xml")return new Promise((g,w)=>{const k=new FileReader;k.onload=r=>{const f=r.target?.result;if(f.startsWith("data:image/svg+xml;base64,"))g(f);else{const h=btoa(new TextEncoder().encode(f).reduce((v,C)=>v+String.fromCharCode(C),""));g(`data:image/svg+xml;base64,${h}`)}},k.onerror=()=>w("SVG读取失败: 文件读取错误"),k.readAsText(_)});const a=_.type==="image/png"?"image/png":"image/jpeg";return new Promise((g,w)=>{const k=new Image;k.src=URL.createObjectURL(_),k.onload=async()=>{const r=document.createElement("canvas"),f=r.getContext("2d");if(!f){w("无法获取 canvas 上下文");return}let[h,v]=[k.width,k.height];if(h>p.maxWidth||v>p.maxHeight){const C=Math.min(p.maxWidth/h,p.maxHeight/v);h=Math.floor(h*C),v=Math.floor(v*C)}r.width=h,r.height=v,f.clearRect(0,0,h,v),f.drawImage(k,0,0,h,v);try{const C=r.toDataURL(a,p.quality);URL.revokeObjectURL(k.src),g(C)}catch(C){w(`压缩失败: ${C instanceof Error?C.message:"未知错误"}`)}},k.onerror=r=>{w(`图片加载失败: ${r instanceof Error?r.message:"未知错误"}`),URL.revokeObjectURL(k.src)}})}const Fa={class:""},Xa={class:"flex w-[400px] items-center mb-2"},ja={class:"flex items-center"},Ha={class:"flex-1 flex items-center justify-end"},Ga={class:"h-24 flex"},Ka={key:0,class:"flex items-center w-24"},qa={key:1,class:"relative z-50 w-full h-full"},Ja={key:1,class:"relative w-24"},Za={class:"flex flex-col"},Qa={class:"flex items-center"},el={class:"flex items-center pl-2"},tl={class:"flex flex-col gap-2 [&_.el-button+_.el-button]:!ml-0"},al={class:"flex items-center"},ll={key:1},sl={class:"flex items-center"},nl={key:1},Ie=10,bl=se({__name:"Lottery",setup(_){const b=P(0),m=U(()=>a.value.find(t=>t.id===b.value)||a.value[0]),p=P({data:[],pageNum:1,pageSize:10,totalCount:0,totalPage:0}),a=P([]),g=P(!1),w=P({fee:10}),k=P(!1),r=P([]),f=async()=>{try{const t=await je("t_gift_category");if(t&&t.data){const l=t.data.data||[];a.value=[...l],a.value.unshift({id:0,name:"全部"}),b.value===0&&a.value.length>0&&(b.value=a.value[0].id),r.value=[],r.value.push({id:-1,name:"",edited:!0}),qe(l,S=>{r.value.push({id:S.id,name:S.name,cost:S.cost,edited:!1})})}}catch(t){console.error(t),ie.error(JSON.stringify(t))}},h=async(t,l,S)=>{g.value=!0;try{let M;t&&t!==0&&(M={cate_id:t});const E=await je("t_gift",M,l,S);if(E&&E.data){const re=E.data.data||[];p.value.data=[],p.value.pageNum=E.data.pageNum??l,p.value.pageSize=E.data.pageSize??S,p.value.totalCount=E.data.totalCount??0,p.value.totalPage=E.data.totalPage??Math.ceil((E.data.totalCount??0)/(E.data.pageSize??S)),qe(re,G=>{p.value.data.push({id:G.id,name:G.name,img:G.image,cate_id:G.cate_id,cost:G.cost,enable:G.enable===1,edited:!1})})}}catch(M){console.error(M),ie.error(JSON.stringify(M))}finally{g.value=!1}},v=async()=>{try{await Qt("lottery",2,JSON.stringify(w.value))}catch(t){console.error("更新费用失败:",t),ie.error("更新费用失败")}},C=()=>{const t=m.value;t&&h(t.id,1,Ie)},V=()=>{p.value.data.unshift({id:-1,name:"",img:"",cate_id:m.value.id,cost:0,enable:!1,edited:!0})},R=(t,l)=>{l.cate_id=t},N=async t=>{try{t.edited=!1,await Ge("t_gift",t.id),await h(m.value.id,p.value.pageNum,p.value.pageSize)}catch(l){console.error("删除奖品失败:",l),ie.error("删除奖品失败")}},B=async(t,l)=>{if(t.id===-1)p.value.data.splice(l,1);else{t.edited=!1;try{const S=await qt("t_gift",t.id);Object.assign(t,{id:S.id,name:S.name,img:S.image,cate_id:S.cate_id,cost:S.cost,enable:S.enable===1})}catch(S){console.error("获取奖品数据失败:",S)}}},A=async t=>{try{const l={id:t.id,name:t.name,image:t.img,cate_id:t.cate_id,enable:t.enable?1:0,cost:t.cost};await Ke("t_gift",l),await h(m.value.id,p.value.pageNum,p.value.pageSize)}catch(l){console.error("保存奖品失败:",l),ie.error("保存奖品失败")}},x=async(t,l)=>{if(t&&t.raw)try{const S=await Ya(t.raw,{quality:.5});console.log("压缩后的base64",S.length),l.img=S}catch(S){console.error("图片压缩失败:",S),ie.error("图片压缩失败")}},L=(t,l)=>{h(m.value.id,t,l)},y=(t,l,S)=>{console.log("handleCateBlur",t,l)},I=async(t,l)=>{try{const S={id:t.id,name:t.name,cost:t.cost};await Ke("t_gift_category",S),await f()}catch(S){console.error("保存类别失败:",S),ie.error("保存类别失败")}},O=async t=>{try{await Ge("t_gift_category",t.id),await f()}catch(l){console.error("删除类别失败:",l),ie.error("删除类别失败")}},J=t=>{t.edited=!0},ne=(t,l)=>{t.id===-1?(t.name="",t.cost=0):t.edited=!1},oe=async()=>{try{const t=await Zt("lottery",2);t&&Object.assign(w.value,JSON.parse(t))}catch(t){console.error("获取抽奖设置失败:",t)}};return Te(async()=>{await f(),await h(0,1,Ie),await oe()}),(t,l)=>{const S=Wa,M=jt,E=Ht,re=Ea,G=ta,d=ea,Y=le,F=ua,ae=Aa,K=na,ce=wa,ve=ba,we=Jt,ke=Kt,Q=oa,$e=sa,Re=ia,De=ca,s=aa;return u(),$(H,null,[z("div",Fa,[z("div",Xa,[n(S,{class:"w-24"},{default:c(()=>[...l[5]||(l[5]=[X("普通抽奖费用",-1)])]),_:1}),n(M,{modelValue:w.value.fee,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value.fee=e),class:"!w-32 ml-2",type:"number"},null,8,["modelValue"]),n(E,{type:"primary",class:"ml-2",onClick:v},{default:c(()=>[...l[6]||(l[6]=[X(" Update ",-1)])]),_:1})]),n(re),z("div",ja,[n(d,{size:"large",modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=e=>b.value=e),class:"",onChange:C},{default:c(()=>[(u(!0),$(H,null,he(a.value,e=>(u(),D(G,{key:e.id,value:e.id},{default:c(()=>[X(fe(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),n(E,{type:"primary",class:"ml-1",onClick:l[2]||(l[2]=e=>k.value=!0)},{default:c(()=>[n(Y,null,{default:c(()=>[n(o(He))]),_:1})]),_:1}),z("div",Ha,[n(E,{type:"primary",class:"",onClick:V},{default:c(()=>[...l[7]||(l[7]=[X("添加奖品",-1)])]),_:1})])]),Le((u(),D($e,{data:p.value.data},{default:c(()=>[n(K,{width:"130",label:"Image"},{default:c(({row:e})=>[z("div",Ga,[e.edited?(u(),$("div",Ka,[e.img?(u(),$("div",qa,[n(ae,{class:"w-24 cursor-pointer !z-[99]",src:e.img,"preview-src-list":[e.img],"preview-teleported":!0,fit:"contain"},null,8,["src","preview-src-list"]),n(F,{class:"absolute bottom-0 right-0 !z-[100]",action:"#","show-file-list":!1,"auto-upload":!1,"on-change":i=>x(i,e)},{default:c(()=>[n(E,{size:"small",type:"primary",circle:""},{default:c(()=>[n(Y,null,{default:c(()=>[n(o(He))]),_:1})]),_:1})]),_:1},8,["on-change"])])):(u(),D(F,{key:0,class:"flex items-center justify-center bg-white w-full h-full",action:"#","list-type":"picture-card",limit:1,"auto-upload":!1,"show-file-list":!1,"on-change":i=>x(i,e)},{default:c(()=>[n(Y,null,{default:c(()=>[n(o(Gt))]),_:1})]),_:1},8,["on-change"]))])):(u(),$("div",Ja,[n(ae,{class:"w-24 cursor-pointer !z-[9999]",src:e.img,"preview-src-list":[e.img],"preview-teleported":!0,fit:"contain"},null,8,["src","preview-src-list"])]))])]),_:1}),n(K,{label:"Info",width:"200"},{default:c(({row:e})=>[z("div",Za,[n(ve,{column:1,size:"small",border:"","label-width":"50"},{default:c(()=>[n(ce,{label:"ID",width:"100"},{default:c(()=>[n(M,{modelValue:e.id,"onUpdate:modelValue":i=>e.id=i,size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n(ce,{label:"名称"},{default:c(()=>[n(M,{modelValue:e.name,"onUpdate:modelValue":i=>e.name=i,size:"small",disabled:!e.edited},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),n(ce,{label:"Cost"},{default:c(()=>[n(M,{modelValue:e.cost,"onUpdate:modelValue":i=>e.cost=i,size:"small",disabled:!e.edited},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)])]),_:1}),n(K,{label:"Category",width:"180"},{default:c(({row:e})=>[z("div",Qa,[n(ke,{disabled:!e.edited,modelValue:e.cate_id,"onUpdate:modelValue":i=>e.cate_id=i,onChange:i=>R(i,e)},{default:c(()=>[(u(!0),$(H,null,he(a.value,i=>(u(),D(we,{key:i.id,label:i.name,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue","onUpdate:modelValue","onChange"])])]),_:1}),n(K,{label:"启用",width:"80"},{default:c(({row:e})=>[z("div",el,[n(Q,{modelValue:e.enable,"onUpdate:modelValue":i=>e.enable=i,size:"large",disabled:!e.edited},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),_:1}),n(K,{label:"Operations"},{default:c(({row:e})=>[z("div",tl,[e.id!==-1?(u(),D(E,{key:0,class:"w-16",size:"small",type:"danger",onClick:i=>N(e)},{default:c(()=>[...l[8]||(l[8]=[X(" Delete ",-1)])]),_:1},8,["onClick"])):W("",!0),e.edited?(u(),D(E,{key:1,class:"w-16",size:"small",onClick:i=>B(e,p.value.data.indexOf(e))},{default:c(()=>[...l[9]||(l[9]=[X(" Cancel ",-1)])]),_:1},8,["onClick"])):(u(),D(E,{key:2,size:"small",class:"w-16",onClick:i=>J(e)},{default:c(()=>[...l[10]||(l[10]=[X(" Edit ",-1)])]),_:1},8,["onClick"])),e.edited?(u(),D(E,{key:3,class:"w-16",size:"small",type:"primary",onClick:i=>A(e)},{default:c(()=>[...l[11]||(l[11]=[X(" Save ",-1)])]),_:1},8,["onClick"])):W("",!0)])]),_:1})]),_:1},8,["data"])),[[s,g.value]]),n(Re,{layout:"prev, pager, next",total:p.value.totalCount,"page-size":Ie,"current-page":p.value.pageNum,class:"mt-2",background:"",onCurrentChange:l[3]||(l[3]=e=>L(e,Ie))},null,8,["total","current-page"])]),n(De,{modelValue:k.value,"onUpdate:modelValue":l[4]||(l[4]=e=>k.value=e),title:"类别管理",width:"800","destroy-on-close":""},{default:c(()=>[n($e,{data:r.value},{default:c(()=>[n(K,{property:"id",label:"ID",width:"50"}),n(K,{property:"name",label:"Name",width:"100"},{default:c(({row:e})=>[z("div",al,[e.edited?(u(),D(M,{key:0,modelValue:e.name,"onUpdate:modelValue":i=>e.name=i,size:"small",onBlur:i=>y(e,"name",r.value.indexOf(e))},null,8,["modelValue","onUpdate:modelValue","onBlur"])):(u(),$("span",ll,fe(e.name),1))])]),_:1}),n(K,{property:"cost",label:"Cost",width:"200"},{default:c(({row:e})=>[z("div",sl,[e.edited?(u(),D(M,{key:0,modelValue:e.cost,"onUpdate:modelValue":i=>e.cost=i,size:"small",clearable:"",onBlur:i=>y(e,"cost",r.value.indexOf(e))},null,8,["modelValue","onUpdate:modelValue","onBlur"])):(u(),$("span",nl,fe(e.cost),1))])]),_:1}),n(K,{label:"OP"},{default:c(({row:e})=>[e.edited?(u(),D(E,{key:0,class:"w-16",size:"small",type:"primary",onClick:i=>I(e,r.value.indexOf(e))},{default:c(()=>[...l[12]||(l[12]=[X(" Save ",-1)])]),_:1},8,["onClick"])):W("",!0),e.edited?(u(),D(E,{key:1,class:"w-16",size:"small",onClick:i=>ne(e,r.value.indexOf(e))},{default:c(()=>[...l[13]||(l[13]=[X(" Cancel ",-1)])]),_:1},8,["onClick"])):(u(),D(E,{key:2,size:"small",class:"w-16",onClick:i=>J(e)},{default:c(()=>[...l[14]||(l[14]=[X(" Edit ",-1)])]),_:1},8,["onClick"])),e.id!==-1?(u(),D(E,{key:3,class:"w-16",size:"small",type:"danger",onClick:i=>O(e)},{default:c(()=>[...l[15]||(l[15]=[X(" Delete ",-1)])]),_:1},8,["onClick"])):W("",!0)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}});export{bl as default};
