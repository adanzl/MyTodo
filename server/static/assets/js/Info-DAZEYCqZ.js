import{g as N}from"./user-DTmD6eNJ.js";import{u as i}from"./utils-C11zrYka.js";import{S as w}from"./date-SVbh1ddk.js";import{x as O,G as Y,F as R,H as M,E as V}from"./element-plus-DKhpzu-P.js";import{m as x,r as p,c as B,A as J,t as l,O as h,a1 as g,Q as u,q as o,N as m,ao as f,o as y,ae as U,W as r,u as F}from"./vue-vendor-DIrWXCnL.js";import"./index-D8BRhcwO.js";import"./vant-CsaYtkgD.js";import"./vendor-DiwfJ622.js";class T{week=[];constructor(){this.week=[]}}class G{id=-1;name="";order=0;score=0;imgIds=[];constructor(){this.id=-1,this.name="",this.order=0,this.score=0,this.imgIds=[]}static Copy(s){return{id:s.id,name:s.name,order:s.order,score:s.score,imgIds:s.imgIds?.concat()||[]}}}class L{id=-1;startTs;endTs;allDay=!0;reminder=0;repeat=0;repeatData=new T;repeatEndTs;title;color=0;priority=-1;groupId=-1;order=0;score;subtasks=[];constructor(){this.id=-1,this.startTs=void 0,this.endTs=void 0,this.allDay=!0,this.reminder=0,this.repeat=0,this.repeatData=new T,this.repeatEndTs=void 0,this.title=void 0,this.color=0,this.priority=-1,this.groupId=-1,this.order=0,this.score=void 0,this.subtasks=[],this.startTs=i().startOf("day"),this.endTs=i().startOf("day")}static Copy(s){const e=JSON.parse(JSON.stringify(s));if(e.startTs=e.startTs?i(e.startTs):void 0,e.endTs=e.endTs?i(e.endTs):void 0,e.repeatEndTs=e.repeatEndTs?i(e.repeatEndTs):void 0,e.subtasks=[],s.subtasks)for(const n of s.subtasks)e.subtasks.push(G.Copy(n));return e}}class v{id=-1;name="";userId=-1;schedules=[];save={};constructor(){this.id=-1,this.name="",this.userId=-1,this.schedules=[],this.save={}}static Copy(s){const e=new v;e.id=s.id,e.name=s.name,e.schedules=[];for(const n of s.schedules)e.schedules.push(L.Copy(n));return e.save=JSON.parse(JSON.stringify(s.save)),e}}const j={class:"m-4"},X=x({__name:"Info",setup(c){const s=p(1),e=p([{id:1,name:"灿灿日程"},{id:2,name:"昭昭日程"}]),n=p(new v),k=B(()=>e.value.find(d=>d.id===s.value)||e.value[0]),D=async()=>{const d=k.value;console.log("onUserChange",d);try{const a=await N(d.id);console.log("getSave",a),n.value=a}catch(a){console.error(a),V.error(JSON.stringify(a))}};return J(()=>{console.log("Info组件已挂载")}),(d,a)=>{const E=R,S=O,C=M,I=Y;return o(),l("div",j,[a[1]||(a[1]=h("h1",null,"选择用户",-1)),g(S,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),size:"large",class:"mt-4",onChange:D},{default:u(()=>[(o(!0),l(m,null,f(e.value,t=>(o(),y(E,{key:t.id,value:t.id},{default:u(()=>[U(r(t.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),g(I,null,{default:u(()=>[(o(!0),l(m,null,f(n.value.schedules,t=>(o(),y(C,{key:t.id,title:"["+t.id+"]"+t.title},{default:u(()=>[h("p",null," range: "+r(t?.startTs?.format("YYYY-MM-DD"))+" - "+r(t?.endTs?.format("YYYY-MM-DD"))+" allDay:"+r(t.allDay)+" order:"+r(t.order),1),h("p",null," Remind: "+r(t.reminder)+" | Repeat: "+r(t.repeat)+" | RepeatEnd: "+r(F(w)(t.repeatEndTs)),1),(o(!0),l(m,null,f(t.subtasks,(_,b)=>(o(),l("p",{key:b},"["+r(_.id)+"]"+r(_.name),1))),128))]),_:2},1032,["title"]))),128))]),_:1})])}}});export{X as default};
