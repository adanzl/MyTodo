import{a as c}from"./utils-BjcahYMR.js";import{U as p}from"./types-shared-Ce9iq5aR.js";import{l as i,a as r}from"./utils-shared-DQS5Jh_s.js";const u={url:"https://leo-zhao.natapp4.cc/"},d=u.url,l=d.endsWith("/api")?d:d.endsWith("/")?`${d}api`:`${d}/api`;function P(){return d}const s=c.create({baseURL:l,timeout:3e4});s.interceptors.request.use(t=>(i.debug("API Request:",t.method?.toUpperCase(),t.url,t.params||t.data),t),t=>(i.error("API Request Error:",t),Promise.reject(t)));s.interceptors.response.use(t=>{if(t.data&&typeof t.data=="object"&&"code"in t.data&&t.data.code!==0){const a=new Error(t.data.msg||"请求失败");return a.response=t,Promise.reject(a)}return t},t=>{if(t.response){const a=t.response.status,n=t.response.data?.msg||`请求失败 (${a})`;a>=500?r(t,"服务器错误",{context:"API"}):a===404?r(t,"资源未找到",{context:"API"}):a===403?r(t,"无权限访问",{context:"API"}):a===401?r(t,"未授权，请重新登录",{context:"API"}):r(t,n,{context:"API"})}else t.request?r(t,"网络错误，请检查网络连接",{context:"API"}):r(t,"请求配置错误",{context:"API"});return Promise.reject(t)});async function v(t,a,e,n){const o={table:t};return a&&(o.conditions=JSON.stringify(a)),e&&(o.pageNum=e),n&&(o.pageSize=n),(await s.get("/getAll",{params:o})).data}async function E(t,a,e){const n={table:t,id:a};return(await s.get("/getData",{params:n})).data.data}async function I(t,a){return a.id===-1&&(a.id=null),(await s.post("/setData",{table:t,data:a})).data.data}async function L(t,a){return(await s.post("/delData",{table:t,id:a})).data.data}async function b(t){if(t===void 0)throw new Error("id is undefined");const a=await s.get("/getData",{params:{id:t,table:"t_schedule",fields:"data,user_id"}});if(a.data.code!==0)throw new Error(a.data.msg);const e=p.parseUserData(a.data.data.data);return e.userId=a.data.data.user_id,e}async function $(t,a){const e=await s.post("/setData",{table:"t_user",data:{id:t,score:a}});if(console.log("setUserInfo",e.data),e.data.code!==0)throw new Error(e.data.msg);return e.data.data}async function F(t){const a=await s.get("/getData",{params:{table:"t_user",id:t,fields:"id,score"}});if(a.data.code!==0)throw new Error(a.data.msg);return a.data.data}async function x(t,a,e,n){const o=await s.post("/addScore",{user:t,action:a,value:e,msg:n});if(console.log("addScore",o.data),o.data.code!==0)throw new Error(o.data.msg);return o.data.data}async function C(t,a,e){const n=await s.get("/getRdsList",{params:{key:t,pageSize:e,startId:a}});if(n.data.code!==0)throw new Error(n.data.msg);return n.data.data}async function S(t,a){const e=await s.get("/getRdsData",{params:{table:t,id:a}});if(e.data.code!==0)throw new Error(e.data.msg);return e.data.data}async function j(t,a,e){const n=await s.post("/setRdsData",{table:t,data:{id:a,value:e}});if(console.log("setRdsData",n.data),n.data.code!==0)throw new Error(n.data.msg);return n.data.data}async function q(t,a,e){let n;const o="bluetooth";return a==="GET"?n=await s.get(`/${o}/${t}`,{params:e}):n=await s.post(`/${o}/${t}`,e),n.data}async function B(t,a,e={}){let n;return a==="GET"?n=await s.get(`/playlist/${t}`,{params:e}):n=await s.post(`/playlist/${t}`,e),n.data}async function G(){return(await s.get("/pdf/list")).data}async function z(t){const a=new FormData;return a.append("file",t),(await s.post("/pdf/upload",a,{headers:{"Content-Type":"multipart/form-data"}})).data}async function J(t,a){const e={task_id:t};return a!=null&&a!==""&&(e.password=a),(await s.post("/pdf/decrypt",e)).data}async function N(t){return(await s.get(`/pdf/task/${encodeURIComponent(t)}`)).data}function O(t,a){return`${s.defaults.baseURL||""}/pdf/download/${encodeURIComponent(t)}?type=${a}`}async function W(t){return(await s.post("/pdf/delete",{task_id:t})).data}async function f(){return(await s.get("/media/merge/list")).data}async function g(){return(await s.post("/media/merge/create",{})).data}async function m(t){return(await s.post("/media/merge/get",{task_id:t})).data}async function w(t){return(await s.post("/media/merge/delete",{task_id:t})).data}async function y(t,a){return(await s.post("/media/merge/addFileByPath",{task_id:t,file_path:a})).data}async function k(t,a){return(await s.post("/media/merge/deleteFile",{task_id:t,file_index:a})).data}async function T(t){return(await s.post("/media/merge/start",{task_id:t})).data}async function A(t,a){return(await s.post("/media/merge/reorderFiles",{task_id:t,file_indices:a})).data}function _(t){return`${s.defaults.baseURL||""}/media/merge/download?task_id=${t}`}async function R(t,a){return(await s.post("/media/merge/save",{task_id:t,target_path:a})).data}const H=f,K=g,Q=m,V=w,X=y,Y=k,Z=T,tt=A,at=_,et=R;async function st(){return(await s.get("/media/convert/list")).data}async function nt(t){return(await s.post("/media/convert/create",t||{})).data}async function ot(t){return(await s.post("/media/convert/get",{task_id:t})).data}async function rt(t){return(await s.post("/media/convert/delete",{task_id:t})).data}async function dt(t,a){return(await s.post("/media/convert/update",{task_id:t,...a})).data}async function it(t){return(await s.post("/media/convert/start",{task_id:t})).data}export{et as A,tt as B,V as C,Y as D,at as E,st as F,nt as G,dt as H,ot as I,it as J,rt as K,s as a,v as b,x as c,S as d,L as e,E as f,F as g,I as h,j as i,b as j,C as k,P as l,q as m,G as n,J as o,B as p,O as q,W as r,$ as s,N as t,z as u,X as v,H as w,K as x,Q as y,Z as z};
