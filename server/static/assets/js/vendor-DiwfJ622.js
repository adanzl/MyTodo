var C="top",I="bottom",F="right",M="left",dt="auto",Ae=[C,I,F,M],fe="start",xe="end",$r="clippingParents",or="viewport",ye="popper",Yr="reference",qt=Ae.reduce(function(t,e){return t.concat([e+"-"+fe,e+"-"+xe])},[]),ar=[].concat(Ae,[dt]).reduce(function(t,e){return t.concat([e,e+"-"+fe,e+"-"+xe])},[]),Kr="beforeRead",Jr="read",Gr="afterRead",zr="beforeMain",Zr="main",Qr="afterMain",en="beforeWrite",tn="write",rn="afterWrite",nn=[Kr,Jr,Gr,zr,Zr,Qr,en,tn,rn];function Y(t){return t?(t.nodeName||"").toLowerCase():null}function X(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ce(t){var e=X(t).Element;return t instanceof e||t instanceof Element}function q(t){var e=X(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function gt(t){if(typeof ShadowRoot>"u")return!1;var e=X(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function sn(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},s=e.elements[r];!q(s)||!Y(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function on(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],s=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),a=o.reduce(function(f,c){return f[c]="",f},{});!q(i)||!Y(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(f){i.removeAttribute(f)}))})}}var fr={name:"applyStyles",enabled:!0,phase:"write",fn:sn,effect:on,requires:["computeStyles"]};function j(t){return t.split("-")[0]}var oe=Math.max,Ve=Math.min,ue=Math.round;function he(t,e){e===void 0&&(e=!1);var r=t.getBoundingClientRect(),n=1,i=1;if(q(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(n=ue(r.width)/o||1),s>0&&(i=ue(r.height)/s||1)}return{width:r.width/n,height:r.height/i,top:r.top/i,right:r.right/n,bottom:r.bottom/i,left:r.left/n,x:r.left/n,y:r.top/i}}function mt(t){var e=he(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function cr(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&gt(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function z(t){return X(t).getComputedStyle(t)}function an(t){return["table","td","th"].indexOf(Y(t))>=0}function ee(t){return((ce(t)?t.ownerDocument:t.document)||window.document).documentElement}function Xe(t){return Y(t)==="html"?t:t.assignedSlot||t.parentNode||(gt(t)?t.host:null)||ee(t)}function It(t){return!q(t)||z(t).position==="fixed"?null:t.offsetParent}function fn(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&q(t)){var n=z(t);if(n.position==="fixed")return null}var i=Xe(t);for(gt(i)&&(i=i.host);q(i)&&["html","body"].indexOf(Y(i))<0;){var s=z(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function _e(t){for(var e=X(t),r=It(t);r&&an(r)&&z(r).position==="static";)r=It(r);return r&&(Y(r)==="html"||Y(r)==="body"&&z(r).position==="static")?e:r||fn(t)||e}function yt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function be(t,e,r){return oe(t,Ve(e,r))}function cn(t,e,r){var n=be(t,e,r);return n>r?r:n}function ur(){return{top:0,right:0,bottom:0,left:0}}function hr(t){return Object.assign({},ur(),t)}function lr(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var un=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,hr(typeof t!="number"?t:lr(t,Ae))};function hn(t){var e,r=t.state,n=t.name,i=t.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=j(r.placement),f=yt(a),c=[M,F].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var l=un(i.padding,r),d=mt(s),p=f==="y"?C:M,y=f==="y"?I:F,h=r.rects.reference[u]+r.rects.reference[f]-o[f]-r.rects.popper[u],v=o[f]-r.rects.reference[f],E=_e(s),b=E?f==="y"?E.clientHeight||0:E.clientWidth||0:0,_=h/2-v/2,g=l[p],w=b-d[u]-l[y],x=b/2-d[u]/2+_,A=be(g,x,w),O=f;r.modifiersData[n]=(e={},e[O]=A,e.centerOffset=A-x,e)}}function ln(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!cr(e.elements.popper,i)||(e.elements.arrow=i))}var pn={name:"arrow",enabled:!0,phase:"main",fn:hn,effect:ln,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function le(t){return t.split("-")[1]}var dn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gn(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:ue(e*i)/i||0,y:ue(r*i)/i||0}}function Ft(t){var e,r=t.popper,n=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,f=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,l=t.isFixed,d=o.x,p=d===void 0?0:d,y=o.y,h=y===void 0?0:y,v=typeof u=="function"?u({x:p,y:h}):{x:p,y:h};p=v.x,h=v.y;var E=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),_=M,g=C,w=window;if(c){var x=_e(r),A="clientHeight",O="clientWidth";if(x===X(r)&&(x=ee(r),z(x).position!=="static"&&a==="absolute"&&(A="scrollHeight",O="scrollWidth")),x=x,i===C||(i===M||i===F)&&s===xe){g=I;var R=l&&x===w&&w.visualViewport?w.visualViewport.height:x[A];h-=R-n.height,h*=f?1:-1}if(i===M||(i===C||i===I)&&s===xe){_=F;var B=l&&x===w&&w.visualViewport?w.visualViewport.width:x[O];p-=B-n.width,p*=f?1:-1}}var k=Object.assign({position:a},c&&dn),U=u===!0?gn({x:p,y:h}):{x:p,y:h};if(p=U.x,h=U.y,f){var P;return Object.assign({},k,(P={},P[g]=b?"0":"",P[_]=E?"0":"",P.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",P))}return Object.assign({},k,(e={},e[g]=b?h+"px":"",e[_]=E?p+"px":"",e.transform="",e))}function mn(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,f=a===void 0?!0:a,c={placement:j(e.placement),variation:le(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ft(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ft(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var pr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mn,data:{}},Be={passive:!0};function yn(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,s=i===void 0?!0:i,o=n.resize,a=o===void 0?!0:o,f=X(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",r.update,Be)}),a&&f.addEventListener("resize",r.update,Be),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",r.update,Be)}),a&&f.removeEventListener("resize",r.update,Be)}}var dr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yn,data:{}},vn={left:"right",right:"left",bottom:"top",top:"bottom"};function He(t){return t.replace(/left|right|bottom|top/g,function(e){return vn[e]})}var bn={start:"end",end:"start"};function Ut(t){return t.replace(/start|end/g,function(e){return bn[e]})}function vt(t){var e=X(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function bt(t){return he(ee(t)).left+vt(t).scrollLeft}function wn(t){var e=X(t),r=ee(t),n=e.visualViewport,i=r.clientWidth,s=r.clientHeight,o=0,a=0;return n&&(i=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,a=n.offsetTop)),{width:i,height:s,x:o+bt(t),y:a}}function xn(t){var e,r=ee(t),n=vt(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=oe(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=oe(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+bt(t),f=-n.scrollTop;return z(i||r).direction==="rtl"&&(a+=oe(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:f}}function wt(t){var e=z(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function gr(t){return["html","body","#document"].indexOf(Y(t))>=0?t.ownerDocument.body:q(t)&&wt(t)?t:gr(Xe(t))}function we(t,e){var r;e===void 0&&(e=[]);var n=gr(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),s=X(n),o=i?[s].concat(s.visualViewport||[],wt(n)?n:[]):n,a=e.concat(o);return i?a:a.concat(we(Xe(o)))}function et(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function En(t){var e=he(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Vt(t,e){return e===or?et(wn(t)):ce(e)?En(e):et(xn(ee(t)))}function An(t){var e=we(Xe(t)),r=["absolute","fixed"].indexOf(z(t).position)>=0,n=r&&q(t)?_e(t):t;return ce(n)?e.filter(function(i){return ce(i)&&cr(i,n)&&Y(i)!=="body"}):[]}function _n(t,e,r){var n=e==="clippingParents"?An(t):[].concat(e),i=[].concat(n,[r]),s=i[0],o=i.reduce(function(a,f){var c=Vt(t,f);return a.top=oe(c.top,a.top),a.right=Ve(c.right,a.right),a.bottom=Ve(c.bottom,a.bottom),a.left=oe(c.left,a.left),a},Vt(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function mr(t){var e=t.reference,r=t.element,n=t.placement,i=n?j(n):null,s=n?le(n):null,o=e.x+e.width/2-r.width/2,a=e.y+e.height/2-r.height/2,f;switch(i){case C:f={x:o,y:e.y-r.height};break;case I:f={x:o,y:e.y+e.height};break;case F:f={x:e.x+e.width,y:a};break;case M:f={x:e.x-r.width,y:a};break;default:f={x:e.x,y:e.y}}var c=i?yt(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case fe:f[c]=f[c]-(e[u]/2-r[u]/2);break;case xe:f[c]=f[c]+(e[u]/2-r[u]/2);break}}return f}function Ee(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,s=r.boundary,o=s===void 0?$r:s,a=r.rootBoundary,f=a===void 0?or:a,c=r.elementContext,u=c===void 0?ye:c,l=r.altBoundary,d=l===void 0?!1:l,p=r.padding,y=p===void 0?0:p,h=hr(typeof y!="number"?y:lr(y,Ae)),v=u===ye?Yr:ye,E=t.rects.popper,b=t.elements[d?v:u],_=_n(ce(b)?b:b.contextElement||ee(t.elements.popper),o,f),g=he(t.elements.reference),w=mr({reference:g,element:E,placement:i}),x=et(Object.assign({},E,w)),A=u===ye?x:g,O={top:_.top-A.top+h.top,bottom:A.bottom-_.bottom+h.bottom,left:_.left-A.left+h.left,right:A.right-_.right+h.right},R=t.modifiersData.offset;if(u===ye&&R){var B=R[i];Object.keys(O).forEach(function(k){var U=[F,I].indexOf(k)>=0?1:-1,P=[C,I].indexOf(k)>=0?"y":"x";O[k]+=B[P]*U})}return O}function On(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,f=r.allowedAutoPlacements,c=f===void 0?ar:f,u=le(n),l=u?a?qt:qt.filter(function(y){return le(y)===u}):Ae,d=l.filter(function(y){return c.indexOf(y)>=0});d.length===0&&(d=l);var p=d.reduce(function(y,h){return y[h]=Ee(t,{placement:h,boundary:i,rootBoundary:s,padding:o})[j(h)],y},{});return Object.keys(p).sort(function(y,h){return p[y]-p[h]})}function Sn(t){if(j(t)===dt)return[];var e=He(t);return[Ut(t),e,Ut(e)]}function kn(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!0:o,f=r.fallbackPlacements,c=r.padding,u=r.boundary,l=r.rootBoundary,d=r.altBoundary,p=r.flipVariations,y=p===void 0?!0:p,h=r.allowedAutoPlacements,v=e.options.placement,E=j(v),b=E===v,_=f||(b||!y?[He(v)]:Sn(v)),g=[v].concat(_).reduce(function(re,J){return re.concat(j(J)===dt?On(e,{placement:J,boundary:u,rootBoundary:l,padding:c,flipVariations:y,allowedAutoPlacements:h}):J)},[]),w=e.rects.reference,x=e.rects.popper,A=new Map,O=!0,R=g[0],B=0;B<g.length;B++){var k=g[B],U=j(k),P=le(k)===fe,pe=[C,I].indexOf(U)>=0,de=pe?"width":"height",H=Ee(e,{placement:k,boundary:u,rootBoundary:l,altBoundary:d,padding:c}),V=pe?P?F:M:P?I:C;w[de]>x[de]&&(V=He(V));var Oe=He(V),te=[];if(s&&te.push(H[U]<=0),a&&te.push(H[V]<=0,H[Oe]<=0),te.every(function(re){return re})){R=k,O=!1;break}A.set(k,te)}if(O)for(var Se=y?3:1,je=function(re){var J=g.find(function(Te){var me=A.get(Te);if(me)return me.slice(0,re).every(function(ae){return ae})});if(J)return R=J,"break"},ge=Se;ge>0;ge--){var ke=je(ge);if(ke==="break")break}e.placement!==R&&(e.modifiersData[n]._skip=!0,e.placement=R,e.reset=!0)}}var Tn={name:"flip",enabled:!0,phase:"main",fn:kn,requiresIfExists:["offset"],data:{_skip:!1}};function Wt(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Xt(t){return[C,F,I,M].some(function(e){return t[e]>=0})}function Rn(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Ee(e,{elementContext:"reference"}),a=Ee(e,{altBoundary:!0}),f=Wt(o,n),c=Wt(a,i,s),u=Xt(f),l=Xt(c);e.modifiersData[r]={referenceClippingOffsets:f,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:l},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":l})}var Bn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Rn};function Nn(t,e,r){var n=j(t),i=[M,C].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[M,F].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function Cn(t){var e=t.state,r=t.options,n=t.name,i=r.offset,s=i===void 0?[0,0]:i,o=ar.reduce(function(u,l){return u[l]=Nn(l,e.rects,s),u},{}),a=o[e.placement],f=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=o}var Mn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Cn};function Pn(t){var e=t.state,r=t.name;e.modifiersData[r]=mr({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var yr={name:"popperOffsets",enabled:!0,phase:"read",fn:Pn,data:{}};function Hn(t){return t==="x"?"y":"x"}function Ln(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!1:o,f=r.boundary,c=r.rootBoundary,u=r.altBoundary,l=r.padding,d=r.tether,p=d===void 0?!0:d,y=r.tetherOffset,h=y===void 0?0:y,v=Ee(e,{boundary:f,rootBoundary:c,padding:l,altBoundary:u}),E=j(e.placement),b=le(e.placement),_=!b,g=yt(E),w=Hn(g),x=e.modifiersData.popperOffsets,A=e.rects.reference,O=e.rects.popper,R=typeof h=="function"?h(Object.assign({},e.rects,{placement:e.placement})):h,B=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(x){if(s){var P,pe=g==="y"?C:M,de=g==="y"?I:F,H=g==="y"?"height":"width",V=x[g],Oe=V+v[pe],te=V-v[de],Se=p?-O[H]/2:0,je=b===fe?A[H]:O[H],ge=b===fe?-O[H]:-A[H],ke=e.elements.arrow,re=p&&ke?mt(ke):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ur(),Te=J[pe],me=J[de],ae=be(0,A[H],re[H]),Ir=_?A[H]/2-Se-ae-Te-B.mainAxis:je-ae-Te-B.mainAxis,Fr=_?-A[H]/2+Se+ae+me+B.mainAxis:ge+ae+me+B.mainAxis,$e=e.elements.arrow&&_e(e.elements.arrow),Ur=$e?g==="y"?$e.clientTop||0:$e.clientLeft||0:0,Rt=(P=k?.[g])!=null?P:0,Vr=V+Ir-Rt-Ur,Wr=V+Fr-Rt,Bt=be(p?Ve(Oe,Vr):Oe,V,p?oe(te,Wr):te);x[g]=Bt,U[g]=Bt-V}if(a){var Nt,Xr=g==="x"?C:M,jr=g==="x"?I:F,ne=x[w],Re=w==="y"?"height":"width",Ct=ne+v[Xr],Mt=ne-v[jr],Ye=[C,M].indexOf(E)!==-1,Pt=(Nt=k?.[w])!=null?Nt:0,Ht=Ye?Ct:ne-A[Re]-O[Re]-Pt+B.altAxis,Lt=Ye?ne+A[Re]+O[Re]-Pt-B.altAxis:Mt,Dt=p&&Ye?cn(Ht,ne,Lt):be(p?Ht:Ct,ne,p?Lt:Mt);x[w]=Dt,U[w]=Dt-ne}e.modifiersData[n]=U}}var Dn={name:"preventOverflow",enabled:!0,phase:"main",fn:Ln,requiresIfExists:["offset"]};function qn(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function In(t){return t===X(t)||!q(t)?vt(t):qn(t)}function Fn(t){var e=t.getBoundingClientRect(),r=ue(e.width)/t.offsetWidth||1,n=ue(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Un(t,e,r){r===void 0&&(r=!1);var n=q(e),i=q(e)&&Fn(e),s=ee(e),o=he(t,i),a={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(n||!n&&!r)&&((Y(e)!=="body"||wt(s))&&(a=In(e)),q(e)?(f=he(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):s&&(f.x=bt(s))),{x:o.left+a.scrollLeft-f.x,y:o.top+a.scrollTop-f.y,width:o.width,height:o.height}}function Vn(t){var e=new Map,r=new Set,n=[];t.forEach(function(s){e.set(s.name,s)});function i(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var f=e.get(a);f&&i(f)}}),n.push(s)}return t.forEach(function(s){r.has(s.name)||i(s)}),n}function Wn(t){var e=Vn(t);return nn.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function Xn(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function jn(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var jt={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function xt(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,s=i===void 0?jt:i;return function(o,a,f){f===void 0&&(f=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},jt,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],l=!1,d={state:c,setOptions:function(h){var v=typeof h=="function"?h(c.options):h;y(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:ce(o)?we(o):o.contextElement?we(o.contextElement):[],popper:we(a)};var E=Wn(jn([].concat(n,c.options.modifiers)));return c.orderedModifiers=E.filter(function(b){return b.enabled}),p(),d.update()},forceUpdate:function(){if(!l){var h=c.elements,v=h.reference,E=h.popper;if($t(v,E)){c.rects={reference:Un(v,_e(E),c.options.strategy==="fixed"),popper:mt(E)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var _=c.orderedModifiers[b],g=_.fn,w=_.options,x=w===void 0?{}:w,A=_.name;typeof g=="function"&&(c=g({state:c,options:x,name:A,instance:d})||c)}}}},update:Xn(function(){return new Promise(function(h){d.forceUpdate(),h(c)})}),destroy:function(){y(),l=!0}};if(!$t(o,a))return d;d.setOptions(f).then(function(h){!l&&f.onFirstUpdate&&f.onFirstUpdate(h)});function p(){c.orderedModifiers.forEach(function(h){var v=h.name,E=h.options,b=E===void 0?{}:E,_=h.effect;if(typeof _=="function"){var g=_({state:c,name:v,instance:d,options:b}),w=function(){};u.push(g||w)}})}function y(){u.forEach(function(h){return h()}),u=[]}return d}}xt();var $n=[dr,yr,pr,fr];xt({defaultModifiers:$n});var Yn=[dr,yr,pr,fr,Mn,Tn,Dn,pn,Bn],is=xt({defaultModifiers:Yn});function T(t,e){Kn(t)&&(t="100%");var r=Jn(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Ne(t){return Math.min(1,Math.max(0,t))}function Kn(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Jn(t){return typeof t=="string"&&t.indexOf("%")!==-1}function vr(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ce(t){return t<=1?"".concat(Number(t)*100,"%"):t}function se(t){return t.length===1?"0"+t:String(t)}function Gn(t,e,r){return{r:T(t,255)*255,g:T(e,255)*255,b:T(r,255)*255}}function Yt(t,e,r){t=T(t,255),e=T(e,255),r=T(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),s=0,o=0,a=(n+i)/2;if(n===i)o=0,s=0;else{var f=n-i;switch(o=a>.5?f/(2-n-i):f/(n+i),n){case t:s=(e-r)/f+(e<r?6:0);break;case e:s=(r-t)/f+2;break;case r:s=(t-e)/f+4;break}s/=6}return{h:s,s:o,l:a}}function Ke(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*(6*r):r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function zn(t,e,r){var n,i,s;if(t=T(t,360),e=T(e,100),r=T(r,100),e===0)i=r,s=r,n=r;else{var o=r<.5?r*(1+e):r+e-r*e,a=2*r-o;n=Ke(a,o,t+1/3),i=Ke(a,o,t),s=Ke(a,o,t-1/3)}return{r:n*255,g:i*255,b:s*255}}function Kt(t,e,r){t=T(t,255),e=T(e,255),r=T(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),s=0,o=n,a=n-i,f=n===0?0:a/n;if(n===i)s=0;else{switch(n){case t:s=(e-r)/a+(e<r?6:0);break;case e:s=(r-t)/a+2;break;case r:s=(t-e)/a+4;break}s/=6}return{h:s,s:f,v:o}}function Zn(t,e,r){t=T(t,360)*6,e=T(e,100),r=T(r,100);var n=Math.floor(t),i=t-n,s=r*(1-e),o=r*(1-i*e),a=r*(1-(1-i)*e),f=n%6,c=[r,o,s,s,a,r][f],u=[a,r,r,o,s,s][f],l=[s,s,a,r,r,o][f];return{r:c*255,g:u*255,b:l*255}}function Jt(t,e,r,n){var i=[se(Math.round(t).toString(16)),se(Math.round(e).toString(16)),se(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Qn(t,e,r,n,i){var s=[se(Math.round(t).toString(16)),se(Math.round(e).toString(16)),se(Math.round(r).toString(16)),se(ei(n))];return i&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function ei(t){return Math.round(parseFloat(t)*255).toString(16)}function Gt(t){return L(t)/255}function L(t){return parseInt(t,16)}function ti(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var tt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ri(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,s=null,o=!1,a=!1;return typeof t=="string"&&(t=si(t)),typeof t=="object"&&(G(t.r)&&G(t.g)&&G(t.b)?(e=Gn(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):G(t.h)&&G(t.s)&&G(t.v)?(n=Ce(t.s),i=Ce(t.v),e=Zn(t.h,n,i),o=!0,a="hsv"):G(t.h)&&G(t.s)&&G(t.l)&&(n=Ce(t.s),s=Ce(t.l),e=zn(t.h,n,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(r=t.a)),r=vr(r),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}var ni="[-\\+]?\\d+%?",ii="[-\\+]?\\d*\\.\\d+%?",Z="(?:".concat(ii,")|(?:").concat(ni,")"),Je="[\\s|\\(]+(".concat(Z,")[,|\\s]+(").concat(Z,")[,|\\s]+(").concat(Z,")\\s*\\)?"),Ge="[\\s|\\(]+(".concat(Z,")[,|\\s]+(").concat(Z,")[,|\\s]+(").concat(Z,")[,|\\s]+(").concat(Z,")\\s*\\)?"),W={CSS_UNIT:new RegExp(Z),rgb:new RegExp("rgb"+Je),rgba:new RegExp("rgba"+Ge),hsl:new RegExp("hsl"+Je),hsla:new RegExp("hsla"+Ge),hsv:new RegExp("hsv"+Je),hsva:new RegExp("hsva"+Ge),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function si(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(tt[t])t=tt[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=W.rgb.exec(t);return r?{r:r[1],g:r[2],b:r[3]}:(r=W.rgba.exec(t),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=W.hsl.exec(t),r?{h:r[1],s:r[2],l:r[3]}:(r=W.hsla.exec(t),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=W.hsv.exec(t),r?{h:r[1],s:r[2],v:r[3]}:(r=W.hsva.exec(t),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=W.hex8.exec(t),r?{r:L(r[1]),g:L(r[2]),b:L(r[3]),a:Gt(r[4]),format:e?"name":"hex8"}:(r=W.hex6.exec(t),r?{r:L(r[1]),g:L(r[2]),b:L(r[3]),format:e?"name":"hex"}:(r=W.hex4.exec(t),r?{r:L(r[1]+r[1]),g:L(r[2]+r[2]),b:L(r[3]+r[3]),a:Gt(r[4]+r[4]),format:e?"name":"hex8"}:(r=W.hex3.exec(t),r?{r:L(r[1]+r[1]),g:L(r[2]+r[2]),b:L(r[3]+r[3]),format:e?"name":"hex"}:!1)))))))))}function G(t){return!!W.CSS_UNIT.exec(String(t))}var ss=(function(){function t(e,r){e===void 0&&(e=""),r===void 0&&(r={});var n;if(e instanceof t)return e;typeof e=="number"&&(e=ti(e)),this.originalInput=e;var i=ri(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=r.format)!==null&&n!==void 0?n:i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),r,n,i,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?r=s/12.92:r=Math.pow((s+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),.2126*r+.7152*n+.0722*i},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=vr(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=Kt(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=Kt(this.r,this.g,this.b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsva(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=Yt(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=Yt(this.r,this.g,this.b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(r,", ").concat(n,"%, ").concat(i,"%)"):"hsla(".concat(r,", ").concat(n,"%, ").concat(i,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),Jt(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),Qn(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),r=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(r,", ").concat(n,")"):"rgba(".concat(e,", ").concat(r,", ").concat(n,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(r){return"".concat(Math.round(T(r,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(r){return Math.round(T(r,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Jt(this.r,this.g,this.b,!1),r=0,n=Object.entries(tt);r<n.length;r++){var i=n[r],s=i[0],o=i[1];if(e===o)return s}return!1},t.prototype.toString=function(e){var r=!!e;e=e??this.format;var n=!1,i=this.a<1&&this.a>=0,s=!r&&i&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.l+=e/100,r.l=Ne(r.l),new t(r)},t.prototype.brighten=function(e){e===void 0&&(e=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),new t(r)},t.prototype.darken=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.l-=e/100,r.l=Ne(r.l),new t(r)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.s-=e/100,r.s=Ne(r.s),new t(r)},t.prototype.saturate=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.s+=e/100,r.s=Ne(r.s),new t(r)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var r=this.toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,new t(r)},t.prototype.mix=function(e,r){r===void 0&&(r=50);var n=this.toRgb(),i=new t(e).toRgb(),s=r/100,o={r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a};return new t(o)},t.prototype.analogous=function(e,r){e===void 0&&(e=6),r===void 0&&(r=30);var n=this.toHsl(),i=360/r,s=[this];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,s.push(new t(n));return s},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var r=this.toHsv(),n=r.h,i=r.s,s=r.v,o=[],a=1/e;e--;)o.push(new t({h:n,s:i,v:s})),s=(s+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),r=e.h;return[this,new t({h:(r+72)%360,s:e.s,l:e.l}),new t({h:(r+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var r=this.toRgb(),n=new t(e).toRgb(),i=r.a+n.a*(1-r.a);return new t({r:(r.r*r.a+n.r*n.a*(1-r.a))/i,g:(r.g*r.a+n.g*n.a*(1-r.a))/i,b:(r.b*r.a+n.b*n.a*(1-r.a))/i,a:i})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var r=this.toHsl(),n=r.h,i=[this],s=360/e,o=1;o<e;o++)i.push(new t({h:(n+o*s)%360,s:r.s,l:r.l}));return i},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t})(),zt=!1,ie,rt,nt,Le,De,br,qe,it,st,ot,wr,at,ft,xr,Er;function N(){if(!zt){zt=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(at=/\b(iPhone|iP[ao]d)/.exec(t),ft=/\b(iP[ao]d)/.exec(t),ot=/Android/i.exec(t),xr=/FBAN\/\w+;/i.exec(t),Er=/Mobile/i.exec(t),wr=!!/Win64/.exec(t),e){ie=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,ie&&document&&document.documentMode&&(ie=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);br=n?parseFloat(n[1])+4:ie,rt=e[2]?parseFloat(e[2]):NaN,nt=e[3]?parseFloat(e[3]):NaN,Le=e[4]?parseFloat(e[4]):NaN,Le?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),De=e&&e[1]?parseFloat(e[1]):NaN):De=NaN}else ie=rt=nt=De=Le=NaN;if(r){if(r[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);qe=i?parseFloat(i[1].replace("_",".")):!0}else qe=!1;it=!!r[2],st=!!r[3]}else qe=it=st=!1}}var ct={ie:function(){return N()||ie},ieCompatibilityMode:function(){return N()||br>ie},ie64:function(){return ct.ie()&&wr},firefox:function(){return N()||rt},opera:function(){return N()||nt},webkit:function(){return N()||Le},safari:function(){return ct.webkit()},chrome:function(){return N()||De},windows:function(){return N()||it},osx:function(){return N()||qe},linux:function(){return N()||st},iphone:function(){return N()||at},mobile:function(){return N()||at||ft||ot||Er},nativeApp:function(){return N()||xr},android:function(){return N()||ot},ipad:function(){return N()||ft}},oi=ct,ai=!!(typeof window<"u"&&window.document&&window.document.createElement),fi={canUseDOM:ai},Ar=fi,_r;Ar.canUseDOM&&(_r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ci(t,e){if(!Ar.canUseDOM||e&&!("addEventListener"in document))return!1;var r="on"+t,n=r in document;if(!n){var i=document.createElement("div");i.setAttribute(r,"return;"),n=typeof i[r]=="function"}return!n&&_r&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var ui=ci,Zt=10,Qt=40,er=800;function Or(t){var e=0,r=0,n=0,i=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),n=e*Zt,i=r*Zt,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||i)&&t.deltaMode&&(t.deltaMode==1?(n*=Qt,i*=Qt):(n*=er,i*=er)),n&&!e&&(e=n<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:e,spinY:r,pixelX:n,pixelY:i}}Or.getEventType=function(){return oi.firefox()?"DOMMouseScroll":ui("wheel")?"wheel":"mousewheel"};var os=Or;const K=Object.create(null);K.open="0";K.close="1";K.ping="2";K.pong="3";K.message="4";K.upgrade="5";K.noop="6";const Ie=Object.create(null);Object.keys(K).forEach(t=>{Ie[K[t]]=t});const ut={type:"error",data:"parser error"},Sr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kr=typeof ArrayBuffer=="function",Tr=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Et=({type:t,data:e},r,n)=>Sr&&e instanceof Blob?r?n(e):tr(e,n):kr&&(e instanceof ArrayBuffer||Tr(e))?r?n(e):tr(new Blob([e]),n):n(K[t]+(e||"")),tr=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(t)};function rr(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ze;function hi(t,e){if(Sr&&t.data instanceof Blob)return t.data.arrayBuffer().then(rr).then(e);if(kr&&(t.data instanceof ArrayBuffer||Tr(t.data)))return e(rr(t.data));Et(t,!1,r=>{ze||(ze=new TextEncoder),e(ze.encode(r))})}const nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<nr.length;t++)ve[nr.charCodeAt(t)]=t;const li=t=>{let e=t.length*.75,r=t.length,n,i=0,s,o,a,f;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(n=0;n<r;n+=4)s=ve[t.charCodeAt(n)],o=ve[t.charCodeAt(n+1)],a=ve[t.charCodeAt(n+2)],f=ve[t.charCodeAt(n+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|f&63;return c},pi=typeof ArrayBuffer=="function",At=(t,e)=>{if(typeof t!="string")return{type:"message",data:Rr(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:di(t.substring(1),e)}:Ie[r]?t.length>1?{type:Ie[r],data:t.substring(1)}:{type:Ie[r]}:ut},di=(t,e)=>{if(pi){const r=li(t);return Rr(r,e)}else return{base64:!0,data:t}},Rr=(t,e)=>e==="blob"?t instanceof Blob?t:new Blob([t]):t instanceof ArrayBuffer?t:t.buffer,Br="",gi=(t,e)=>{const r=t.length,n=new Array(r);let i=0;t.forEach((s,o)=>{Et(s,!1,a=>{n[o]=a,++i===r&&e(n.join(Br))})})},mi=(t,e)=>{const r=t.split(Br),n=[];for(let i=0;i<r.length;i++){const s=At(r[i],e);if(n.push(s),s.type==="error")break}return n};function yi(){return new TransformStream({transform(t,e){hi(t,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(r)})}})}let Ze;function Me(t){return t.reduce((e,r)=>e+r.length,0)}function Pe(t,e){if(t[0].length===e)return t.shift();const r=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)r[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function vi(t,e){Ze||(Ze=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(Me(r)<1)break;const f=Pe(r,1);s=(f[0]&128)===128,i=f[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Me(r)<2)break;const f=Pe(r,2);i=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),n=3}else if(n===2){if(Me(r)<8)break;const f=Pe(r,8),c=new DataView(f.buffer,f.byteOffset,f.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(ut);break}i=u*Math.pow(2,32)+c.getUint32(4),n=3}else{if(Me(r)<i)break;const f=Pe(r,i);a.enqueue(At(s?f:Ze.decode(f),e)),n=0}if(i===0||i>t){a.enqueue(ut);break}}}})}const Nr=4;function S(t){if(t)return bi(t)}function bi(t){for(var e in S.prototype)t[e]=S.prototype[e];return t}S.prototype.on=S.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};S.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===e||n.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};S.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,e)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};S.prototype.hasListeners=function(t){return!!this.listeners(t).length};const _t=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),D=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),wi="arraybuffer";function Cr(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const xi=D.setTimeout,Ei=D.clearTimeout;function Ot(t,e){e.useNativeTimers?(t.setTimeoutFn=xi.bind(D),t.clearTimeoutFn=Ei.bind(D)):(t.setTimeoutFn=D.setTimeout.bind(D),t.clearTimeoutFn=D.clearTimeout.bind(D))}const Ai=1.33;function _i(t){return typeof t=="string"?Oi(t):Math.ceil((t.byteLength||t.size)*Ai)}function Oi(t){let e=0,r=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function Mr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Si(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function ki(t){let e={},r=t.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Ti extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}class St extends S{constructor(e){super(),this.writable=!1,Ot(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,r,n){return super.emitReserved("error",new Ti(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=At(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=Si(e);return r.length?"?"+r:""}}class Ri extends St{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};mi(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,gi(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Mr()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}}let Pr=!1;try{Pr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Bi=Pr;function Ni(){}class Ci extends Ri{constructor(e){if(super(e),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}class $ extends S{constructor(e,r,n){super(),this.createRequest=e,Ot(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const r=Cr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=$.requestsCount++,$.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ni,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$.requestsCount=0;$.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ir);else if(typeof addEventListener=="function"){const t="onpagehide"in D?"pagehide":"unload";addEventListener(t,ir,!1)}}function ir(){for(let t in $.requests)$.requests.hasOwnProperty(t)&&$.requests[t].abort()}const Mi=(function(){const t=Hr({xdomain:!1});return t&&t.responseType!==null})();class Pi extends Ci{constructor(e){super(e);const r=e&&e.forceBase64;this.supportsBinary=Mi&&!r}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $(Hr,this.uri(),e)}}function Hr(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Bi))return new XMLHttpRequest}catch{}if(!e)try{return new D[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Lr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Hi extends St{get name(){return"websocket"}doOpen(){const e=this.uri(),r=this.opts.protocols,n=Lr?{}:Cr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;Et(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}i&&_t(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Mr()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}}const Qe=D.WebSocket||D.MozWebSocket;class Li extends Hi{createSocket(e,r,n){return Lr?new Qe(e,r,n):r?new Qe(e,r):new Qe(e)}doWrite(e,r){this.ws.send(r)}}class Di extends St{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const r=vi(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),i=yi();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{n.read().then(({done:a,value:f})=>{a||(this.onPacket(f),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],i=r===e.length-1;this._writer.write(n).then(()=>{i&&_t(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const qi={websocket:Li,webtransport:Di,polling:Pi},Ii=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Fi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sr(t){if(t.length>8e3)throw"URI too long";const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let i=Ii.exec(t||""),s={},o=14;for(;o--;)s[Fi[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Ui(s,s.path),s.queryKey=Vi(s,s.query),s}function Ui(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Vi(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}const ht=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fe=[];ht&&addEventListener("offline",()=>{Fe.forEach(t=>t())},!1);class Q extends S{constructor(e,r){if(super(),this.binaryType=wi,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){const n=sr(e);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=sr(r.host).host);Ot(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ki(this.opts.query)),ht&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=Nr,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Q.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Q.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=_i(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,_t(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,n){return this._sendPacket("message",e,r,n),this}send(e,r,n){return this._sendPacket("message",e,r,n),this}_sendPacket(e,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:e,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Q.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ht&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Fe.indexOf(this._offlineEventListener);n!==-1&&Fe.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}Q.protocol=Nr;class Wi extends Q{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let r=this.createTransport(e),n=!1;Q.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",l=>{if(!n)if(l.type==="pong"&&l.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Q.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function s(){n||(n=!0,u(),r.close(),r=null)}const o=l=>{const d=new Error("probe error: "+l);d.transport=r.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function f(){o("socket closed")}function c(l){r&&l.name!==r.name&&s()}const u=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",f),this.off("upgrading",c)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",f),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const r=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}}class as extends Wi{constructor(e,r={}){const n=typeof e=="object"?e:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>qi[i]).filter(i=>!!i)),super(e,n)}}const Xi=typeof ArrayBuffer=="function",ji=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Dr=Object.prototype.toString,$i=typeof Blob=="function"||typeof Blob<"u"&&Dr.call(Blob)==="[object BlobConstructor]",Yi=typeof File=="function"||typeof File<"u"&&Dr.call(File)==="[object FileConstructor]";function kt(t){return Xi&&(t instanceof ArrayBuffer||ji(t))||$i&&t instanceof Blob||Yi&&t instanceof File}function Ue(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Ue(t[r]))return!0;return!1}if(kt(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ue(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Ue(t[r]))return!0;return!1}function Ki(t){const e=[],r=t.data,n=t;return n.data=lt(r,e),n.attachments=e.length,{packet:n,buffers:e}}function lt(t,e){if(!t)return t;if(kt(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=lt(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=lt(t[n],e));return r}return t}function Ji(t,e){return t.data=pt(t.data,e),delete t.attachments,t}function pt(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=pt(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=pt(t[r],e));return t}const qr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Gi=5;var m;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(m||(m={}));class zi{constructor(e){this.replacer=e}encode(e){return(e.type===m.EVENT||e.type===m.ACK)&&Ue(e)?this.encodeAsBinary({type:e.type===m.EVENT?m.BINARY_EVENT:m.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===m.BINARY_EVENT||e.type===m.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=Ki(e),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}class Tt extends S{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===m.BINARY_EVENT;n||r.type===m.BINARY_ACK?(r.type=n?m.EVENT:m.ACK,this.reconstructor=new Zi(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(kt(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(m[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===m.BINARY_EVENT||n.type===m.BINARY_ACK){const s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(s,r)}else n.nsp="/";const i=e.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}n.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){const s=this.tryParse(e.substr(r));if(Tt.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case m.CONNECT:return We(r);case m.DISCONNECT:return r===void 0;case m.CONNECT_ERROR:return typeof r=="string"||We(r);case m.EVENT:case m.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&qr.indexOf(r[0])===-1);case m.ACK:case m.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zi{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=Ji(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Qi(t){return typeof t=="string"}const es=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function ts(t){return t===void 0||es(t)}function We(t){return Object.prototype.toString.call(t)==="[object Object]"}function rs(t,e){switch(t){case m.CONNECT:return e===void 0||We(e);case m.DISCONNECT:return e===void 0;case m.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&qr.indexOf(e[0])===-1);case m.ACK:return Array.isArray(e);case m.CONNECT_ERROR:return typeof e=="string"||We(e);default:return!1}}function ns(t){return Qi(t.nsp)&&ts(t.id)&&rs(t.type,t.data)}const fs=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Tt,Encoder:zi,get PacketType(){return m},isPacketValid:ns,protocol:Gi},Symbol.toStringTag,{value:"Module"}));export{ar as E,m as P,as as S,ss as T,os as Y,S as a,fs as b,Ot as i,_t as n,sr as p,is as y};
