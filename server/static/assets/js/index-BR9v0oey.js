import{j as ne,r as $,t as ye,n as v,o as d,s as o,Q as c,D as S,G as r,$ as h,J as b,M as qe,l as M,u as P,aa as Ke,ah as Ge,c as L,y as Je,q as U,F as fe,a6 as pe,E as _e,I}from"./vue-vendor-BHHKG5q1.js";import{c as xe,K as Qe,q as We,z as He,C as Xe,a7 as he,u as Ze,A as es,a0 as be,f as ke,E as i,ak as G,L as ss,i as as,a9 as ts,a8 as ls,ab as ns,aj as os,ah as is}from"./element-plus-DeIauL_s.js";import{m as we,a as x,k as ve}from"./utils-shared-CndaLcYB.js";import{n as rs,u as ds,o as us,q as cs,r as fs,t as ps,v as _s,w as vs,x as gs,y as ms,z as ys,A as xs,B as hs,C as bs,D as ks,E as ws}from"./api-shared-Cud_9YyQ.js";import{u as Ts,b as Ms,M as ge,_ as me}from"./useInterval-CJygNucu.js";import{c as Cs}from"./constants-shared-hfZtc6Y5.js";import"./utils-C3h80Bc3.js";import"./vendor-ClcY5Lvr.js";import"./types-shared-D7b4dn-C.js";import"./index-CMozoOv3.js";import"./vant-Dc30gN_b.js";const Fs={class:"p-4 flex flex-col h-full"},Ds={class:"mb-4 flex-shrink-0 border rounded p-3 bg-gray-50"},Ps={class:"flex items-center gap-3"},$s={key:0,class:"flex-1 min-w-0"},Ss=["title"],Bs={class:"flex items-center justify-between"},Es={class:"flex-1 overflow-auto"},zs=["onClick"],Ls={key:1,class:"text-gray-400"},Rs={key:0,class:"flex flex-col gap-1"},Us={class:"text-sm"},As={class:"text-xs text-gray-500"},js={key:1,class:"text-gray-400"},Vs={key:0,class:"flex flex-col gap-1"},Ns={class:"text-sm"},Is={class:"text-xs text-gray-500"},Os={key:1,class:"text-gray-400"},Ys={class:"flex flex-col gap-1 items-center"},qs=["onClick"],Ks=["title"],Gs={class:"flex items-center gap-2"},Js=ne({__name:"PdfTool",setup(H){const u=$(!1),C=$([]),a=$(null),D=$(""),w=async()=>{try{u.value=!0;const l=await rs();if(l.code===0){const n=l.data||[];C.value=n.map(p=>({...p,_decrypting:p.status==="processing"||!1,_password:""}))}else i.error(l.msg||"获取任务列表失败")}catch(l){x(l,"获取任务列表失败")}finally{u.value=!1}},y=l=>{l.raw&&(a.value=l.raw,D.value=l.raw.name)},j=async()=>{if(!a.value){i.warning("请选择要上传的文件");return}const l=a.value;if(!l.name.toLowerCase().endsWith(".pdf")){i.error("只支持 PDF 文件");return}try{u.value=!0;const n=await ds(l);n.code===0?(i.success("文件上传成功"),a.value=null,D.value="",await w()):i.error(n.msg||"文件上传失败")}catch(n){x(n,"文件上传失败")}finally{u.value=!1}},m=async l=>{if(!l.uploaded_info){i.warning("请先上传文件");return}if(!(l._decrypting||l.status==="processing")&&!(l.status==="success"&&!await G.confirm("已解密的文件已存在，是否重新解密？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(()=>!1)))try{l._decrypting=!0;const n=l._password?.trim()||void 0,p=await us(l.task_id,n);p.code===0?(i.success(p.data?.message||"解密任务已提交，正在后台处理"),l._password="",await Y(l)):i.error(p.msg||"提交解密任务失败")}catch(n){x(n,"提交解密任务失败")}finally{l._decrypting=!1}},Y=async(l,n=30)=>{let p=0;const B=async()=>{if(p>=n){i.warning("任务处理超时，请手动刷新查看状态"),await w();return}try{const k=await ps(l.task_id);if(k.code===0){const T=k.data;l.status=T.status,l.unlocked_info=T.unlocked_info,l.error_message=T.error_message,T.status==="success"?(i.success("文件解密成功"),l._decrypting=!1,await w()):T.status==="failed"?(i.error(T.error_message||"文件解密失败"),l._decrypting=!1):T.status==="processing"?(p++,setTimeout(B,1e3)):l._decrypting=!1}}catch(k){x(k,"查询任务状态失败"),l._decrypting=!1}};B()},O=async(l,n)=>{const p=n==="uploaded"?l.uploaded_info:l.unlocked_info;if(!p){i.warning("文件不存在");return}try{const B=cs(p.name,n);window.open(B,"_blank")}catch(B){x(B,"下载文件失败")}},q=async l=>{if(!l.uploaded_info){i.warning("请先上传文件");return}if(l.status==="processing"){i.warning("任务正在处理中，无法删除");return}if(await G.confirm("确定要删除该任务吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(()=>!1))try{u.value=!0;const p=await fs(l.task_id);p.code===0?(i.success(p.data?.message||"任务删除成功"),await w()):i.error(p.msg||"任务删除失败")}catch(p){x(p,"删除任务失败")}finally{u.value=!1}},J=we,A=l=>l?new Date(l*1e3).toLocaleString():"-";return ye(()=>{w()}),(l,n)=>{const p=xe,B=Qe,k=ke,T=Xe,V=he,X=Ze,Z=es,ee=We,Q=He;return d(),v("div",Fs,[n[11]||(n[11]=o("h2",{class:"text-xl font-semibold mb-4"},"PDF 解密工具",-1)),o("div",Ds,[o("div",Ps,[o("div",null,[c(p,{type:"success",size:"small",onClick:j,loading:u.value,disabled:!a.value},{default:r(()=>[...n[0]||(n[0]=[h(" 上传 ",-1)])]),_:1},8,["loading","disabled"])]),c(B,{"auto-upload":!1,"on-change":y,"show-file-list":!1,accept:".pdf"},{trigger:r(()=>[c(p,{type:"primary",size:"small",class:"!m-0"},{default:r(()=>[...n[1]||(n[1]=[h("选择文件",-1)])]),_:1})]),_:1}),a.value?(d(),v("div",$s,[o("div",{class:"text-sm text-gray-600 truncate",title:D.value||a.value.name},b(D.value||a.value.name),9,Ss)])):S("",!0)])]),c(ee,{class:"flex-1 flex flex-col overflow-hidden",shadow:"hover"},{header:r(()=>[o("div",Bs,[n[3]||(n[3]=o("span",null,"文件列表",-1)),c(p,{type:"info",size:"small",plain:"",onClick:w,loading:u.value},{default:r(()=>[u.value?S("",!0):(d(),M(k,{key:0},{default:r(()=>[c(P(be))]),_:1})),n[2]||(n[2]=h(" 刷新 ",-1))]),_:1},8,["loading"])])]),default:r(()=>[o("div",Es,[qe((d(),M(Z,{data:C.value,stripe:"",class:"w-full"},{empty:r(()=>[...n[10]||(n[10]=[o("div",{class:"text-center text-gray-400 py-8"},"暂无文件，请上传 PDF 文件",-1)])]),default:r(()=>[c(T,{prop:"filename",label:"文件名","min-width":"200"},{default:r(({row:f})=>[f.uploaded_info?(d(),v("span",{key:0,class:"text-blue-600 cursor-pointer hover:underline",onClick:R=>O(f,"uploaded")},b(f.filename),9,zs)):(d(),v("span",Ls,"-"))]),_:1}),c(T,{label:"上传文件","min-width":"150"},{default:r(({row:f})=>[f.uploaded_info?(d(),v("div",Rs,[o("span",Us,b(P(J)(f.uploaded_info.size)),1),o("span",As,b(A(f.uploaded_info.modified)),1)])):(d(),v("span",js,"-"))]),_:1}),c(T,{label:"已解密文件","min-width":"150"},{default:r(({row:f})=>[f.unlocked_info?(d(),v("div",Vs,[o("span",Ns,b(P(J)(f.unlocked_info.size)),1),o("span",Is,b(A(f.unlocked_info.modified)),1)])):(d(),v("span",Os,"未解密"))]),_:1}),c(T,{label:"状态",width:"140",align:"center"},{default:r(({row:f})=>[o("div",Ys,[f.status==="success"?(d(),M(V,{key:0,type:"success",size:"small"},{default:r(()=>[...n[4]||(n[4]=[h("已解密",-1)])]),_:1})):f.status==="processing"?(d(),M(V,{key:1,type:"warning",size:"small"},{default:r(()=>[...n[5]||(n[5]=[h("处理中",-1)])]),_:1})):f.status==="pending"?(d(),M(V,{key:2,type:"info",size:"small"},{default:r(()=>[...n[6]||(n[6]=[h("等待中",-1)])]),_:1})):f.status==="failed"?(d(),M(V,{key:3,type:"danger",size:"small"},{default:r(()=>[...n[7]||(n[7]=[h("失败",-1)])]),_:1})):(d(),M(V,{key:4,type:"info",size:"small"},{default:r(()=>[...n[8]||(n[8]=[h("已上传",-1)])]),_:1})),f.unlocked_info?(d(),v("span",{key:5,class:"text-xs text-blue-600 cursor-pointer hover:underline",onClick:R=>O(f,"unlocked")}," 下载 ",8,qs)):S("",!0),f.error_message?(d(),v("span",{key:6,class:"text-xs text-red-500",title:f.error_message}," 错误 ",8,Ks)):S("",!0)])]),_:1}),c(T,{label:"操作",width:"280",fixed:"right"},{default:r(({row:f})=>[o("div",Gs,[f.uploaded_info?(d(),M(X,{key:0,modelValue:f._password,"onUpdate:modelValue":R=>f._password=R,type:"password",size:"small",placeholder:"密码（可选）","show-password":"",clearable:"",class:"w-30",disabled:f._decrypting||f.status==="processing",onKeyup:Ke(R=>m(f),["enter"])},null,8,["modelValue","onUpdate:modelValue","disabled","onKeyup"])):S("",!0),f.uploaded_info&&f.status!=="processing"?(d(),M(p,{key:1,type:"primary",size:"small",onClick:R=>m(f),loading:f._decrypting,disabled:f._decrypting||f.status==="processing"},{default:r(()=>[h(b(f.status==="success"?"重新解密":"解密"),1)]),_:2},1032,["onClick","loading","disabled"])):S("",!0),f.uploaded_info?(d(),M(p,{key:2,type:"danger",size:"small",plain:"",onClick:R=>q(f),disabled:f.status==="processing"},{default:r(()=>[...n[9]||(n[9]=[h(" 删除 ",-1)])]),_:1},8,["onClick","disabled"])):S("",!0)])]),_:1})]),_:1},8,["data"])),[[Q,u.value]])])]),_:1})])}}}),Qs={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Ws(H,u){return d(),v("svg",Qs,[...u[0]||(u[0]=[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-width":"48",d:"m136 208l120-104l120 104m-240 96l120 104l120-104"},null,-1)])])}const Hs=Ge({name:"ion-chevron-expand-sharp",render:Ws}),Xs={class:"flex gap-4 h-full"},Zs={class:"w-64 border rounded p-3 flex flex-col"},ea={class:"flex items-center justify-between mb-3"},sa={class:"flex items-center gap-1"},aa={key:0,class:"flex-1 overflow-y-auto space-y-2 pr-1 min-h-[400px]"},ta=["onClick"],la={class:"flex items-center justify-between gap-2"},na={class:"text-sm font-medium truncate flex-1 min-w-0"},oa={class:"text-xs text-gray-500 whitespace-nowrap flex items-center gap-1 flex-shrink-0"},ia={class:"whitespace-nowrap w-5 flex items-center justify-center"},ra={class:"flex items-center justify-between gap-2 min-h-[20px]"},da={class:"flex items-center gap-1 flex-shrink-0"},ua={key:1,class:"flex-1 flex items-center justify-center text-sm text-gray-400"},ca={key:0,class:"flex-1 border rounded p-3 flex flex-col max-w-2xl"},fa={class:"flex items-center justify-between mb-3 flex-shrink-0"},pa={class:"text-base font-semibold"},_a={class:"text-sm text-gray-500"},va={class:"flex-1 overflow-auto flex flex-col gap-3"},ga={class:"flex items-center justify-between gap-4 flex-shrink-0"},ma={class:"flex items-center gap-4"},ya={key:1,class:"text-red-500 text-xs"},xa={class:"flex items-center gap-2"},ha={class:"border rounded p-2 flex-1 flex flex-col overflow-hidden"},ba={class:"flex items-center justify-between mb-2 flex-shrink-0"},ka={class:"flex items-center gap-1 pr-1"},wa={class:"flex-1 overflow-auto"},Ta={key:0},Ma=["draggable","onDragstart","onDrop"],Ca={class:"text-xs text-gray-500 w-8"},Fa=["title"],Da={key:0,class:"text-xs text-gray-500 whitespace-nowrap w-20 text-right"},Pa={key:1,class:"w-20"},$a={key:1,class:"text-sm text-gray-400 text-center py-1"},Sa={key:1,class:"flex-1 border rounded p-3 flex flex-col max-w-2xl"},Ba=ne({__name:"MediaTool",setup(H){const u=$(!1),C=$([]),a=$(null),D=$(!1),w=$(!1),y=$(!1),j=$(null),m=Ts({callbacks:{onPlay:()=>{i.success("开始播放")},onError:()=>{x(new Error("音频播放失败"),"播放失败"),N()},onEnded:()=>{N()}}}),Y={size:"small",plain:!0,class:"!w-8 !h-6 !p-0"},O={size:"small",plain:!0,class:"!h-5 !text-xs !px-2"},q={size:"small",plain:!0,class:"!h-7 !text-xs"},J=["bg-gray-100","border-t-2","border-b-2","border-blue-500"],A=e=>{e&&e.classList.remove(...J)},l=e=>{if(!e)return;e.querySelectorAll('[draggable="true"]').forEach(t=>A(t))},n=async e=>{if(a.value&&e.length!==0)try{u.value=!0;for(const s of e){const t=await _s(a.value.task_id,s);if(t.code!==0){i.error(`添加文件失败: ${t.msg||"未知错误"}`);break}}i.success(`成功添加 ${e.length} 个文件`),await k(a.value.task_id)}catch(s){x(s,"添加文件失败")}finally{u.value=!1}},p=async()=>{try{u.value=!0;const e=await vs();e.code===0?(C.value=e.data.tasks||[],C.value.length>0&&!a.value&&await k(C.value[0].task_id)):i.error(e.msg||"获取任务列表失败")}catch(e){x(e,"获取任务列表失败")}finally{u.value=!1}},B=async()=>{try{u.value=!0;const e=await gs();e.code===0?(i.success("任务创建成功"),await p(),k(e.data.task_id)):i.error(e.msg||"创建任务失败")}catch(e){x(e,"创建任务失败")}finally{u.value=!1}},k=async e=>{a.value&&a.value.task_id!==e&&se();try{u.value=!0;const s=await ms(e);s.code===0?a.value=s.data:i.error(s.msg||"获取任务信息失败")}catch(s){x(s,"获取任务信息失败")}finally{u.value=!1}},T=async e=>{if(await G.confirm("确定要删除该任务吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(()=>!1))try{u.value=!0;const t=await bs(e);t.code===0?(i.success("任务删除成功"),await p(),a.value&&a.value.task_id===e&&(C.value&&C.value.length>0?await k(C.value[0].task_id):a.value=null)):i.error(t.msg||"删除任务失败")}catch(t){x(t,"删除任务失败")}finally{u.value=!1}},V=()=>{if(!a.value){i.warning("请先创建或选择任务");return}D.value=!0},X=async e=>{if(!(!a.value||!await G.confirm("确定要删除该文件吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(()=>!1)))try{u.value=!0;const t=await ks(a.value.task_id,e);t.code===0?(m.playingFileIndex.value===e?se():m.playingFileIndex.value!==null&&m.playingFileIndex.value>e&&(m.playingFileIndex.value=m.playingFileIndex.value-1),i.success("文件删除成功"),await k(a.value.task_id)):i.error(t.msg||"删除文件失败")}catch(t){x(t,"删除文件失败")}finally{u.value=!1}},Z=async()=>{if(!(!a.value||!await G.confirm(`确定要开始合成吗？将合并 ${ue.value} 个音频文件。`,"确认合成",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(()=>!1)))try{u.value=!0;const s=await ys(a.value.task_id);s.code===0?(i.success("合成任务已启动"),await p(),await k(a.value.task_id),f()):i.error(s.msg||"启动任务失败")}catch(s){x(s,"启动任务失败")}finally{u.value=!1}},{start:ee,stop:Q}=Ms(async()=>{if(!a.value||a.value.status!=="processing"){Q();return}await p(),await k(a.value.task_id)},Cs,{immediate:!1}),f=()=>{ee()},R=e=>{if(!e)return;const s=ws(e);window.open(s,"_blank")},Te=()=>{a.value?.result_file&&R(a.value.task_id)},Me=e=>{e?.result_file&&R(e.task_id)},N=()=>{m.clear()},oe=(e,s)=>{if(!e)return;const t=e?.path||e?.name||"";m.seekFile(t,s)},Ce=(e,s)=>{a.value?.result_file&&oe({path:a.value.result_file},s)},Fe=e=>{if(!a.value||!a.value.files||e<0||e>=a.value.files.length)return;const s=a.value.files[e],t=s.path||s.name||"";if(!t){i.warning("文件路径不存在");return}if(m.playingFilePath.value===t&&m.audio&&!m.audio.paused){N(),i.info("已停止播放");return}const g=ve(t);if(!g){i.error("无法生成媒体文件URL");return}m.load(g,{playingFilePath:t,playingFileIndex:e}),m.play().catch(E=>{x(E,"播放失败"),N()})},se=()=>{N()},De=()=>{if(!a.value||!a.value.result_file){i.warning("结果文件不存在");return}const e=a.value.result_file;if(m.playingFilePath.value===e&&m.audio&&!m.audio.paused){N(),i.info("已停止播放");return}const s=ve(e);if(!s){i.error("无法生成媒体文件URL");return}m.load(s,{playingFilePath:e}),m.play().catch(t=>{x(t,"播放失败"),N()})},Pe=()=>{if(!a.value||!a.value.result_file){i.warning("结果文件不存在");return}w.value=!0},$e=async e=>{if(!a.value||!a.value.result_file)return;if(e.length===0){i.warning("请选择转存目录");return}const s=e[0];try{u.value=!0;const t=await xs(a.value.task_id,s);t.code===0?(i.success("转存成功"),w.value=!1):i.error(t.msg||"转存失败")}catch(t){x(t,"转存失败")}finally{u.value=!1}},Se=we,ie={pending:{tag:"info",text:"等待中"},processing:{tag:"warning",text:"处理中"},success:{tag:"success",text:"成功"},failed:{tag:"danger",text:"失败"}},re=e=>ie[e]?.tag||"info",de=e=>ie[e]?.text||"未知",W=L(()=>a.value?.status==="processing"),ae=L(()=>(a.value?.files||[]).length>0),ue=L(()=>(a.value?.files||[]).length),te=L(()=>a.value?.result_file),ce=L(()=>!te.value||a.value?.status!=="success"||y.value),Be=L(()=>!ae.value||W.value||y.value),le=L(()=>W.value||y.value),Ee=L(()=>!a.value||!ae.value||W.value),ze=L(()=>y.value?"点击退出拖拽排序模式":"点击进入拖拽排序模式"),Le=L(()=>({path:te.value||""})),Re=(e,s)=>!e||!s||e.length!==s.length?!0:e.some((t,g)=>{const E=t?.path||t?.name,K=s[g]?.path||s[g]?.name;return E!==K}),Ue=async()=>{if(y.value){if(a.value&&a.value.files&&a.value.files.length>0){if(Re(j.value||[],a.value.files))try{u.value=!0;const s=a.value.files.map((g,E)=>E),t=await hs(a.value.task_id,s);t.code===0?(i.success("排序已保存"),await k(a.value.task_id)):i.error(t.msg||"保存排序失败")}catch(s){x(s,"保存排序失败")}finally{u.value=!1}j.value=null}}else a.value&&a.value.files&&a.value.files.length>0&&(j.value=[...a.value.files||[]]);y.value=!y.value},Ae=(e,s)=>{if(!y.value)return e.preventDefault(),!1;try{e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",s.toString()))}catch(t){console.error("拖拽开始失败:",t)}},je=e=>{e.currentTarget&&A(e.currentTarget)},Ve=e=>{e.currentTarget&&A(e.currentTarget)},Ne=e=>{if(y.value&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.currentTarget)){const s=e.currentTarget.getBoundingClientRect(),t=e.clientY,g=s.top+s.height/2;A(e.currentTarget),t<g?e.currentTarget.classList.add("border-t-2","border-blue-500"):e.currentTarget.classList.add("border-b-2","border-blue-500")}},Ie=(e,s)=>{if(!y.value||(e.preventDefault(),e.currentTarget&&(A(e.currentTarget),l(e.currentTarget.parentElement)),!e.dataTransfer))return;const t=parseInt(e.dataTransfer.getData("text/plain"),10);if(t===s||isNaN(t)||!a.value||!a.value.files||t<0||t>=a.value.files.length||s<0||s>=a.value.files.length)return;const g=e.currentTarget?.getBoundingClientRect(),E=e.clientY,K=g?g.top+g.height/2:0,_=E<K?s:s+1,F=[...a.value.files||[]],[z]=F.splice(t,1),Ye=t<_?_-1:_;F.splice(Ye,0,z),a.value={...a.value,files:F}},Oe=()=>{D.value=!1};return ye(()=>{p()}),Je(()=>{se(),Q()}),(e,s)=>{const t=ke,g=xe,E=he,K=Hs;return d(),v("div",Xs,[o("div",Zs,[o("div",ea,[s[7]||(s[7]=o("h3",{class:"text-base font-semibold"},"任务列表",-1)),o("div",sa,[c(g,U({type:"info"},Y,{onClick:p,loading:u.value}),{default:r(()=>[u.value?S("",!0):(d(),M(t,{key:0},{default:r(()=>[c(P(be))]),_:1}))]),_:1},16,["loading"]),c(g,U({type:"success"},Y,{onClick:B,loading:u.value}),{default:r(()=>[c(t,null,{default:r(()=>[c(P(ss))]),_:1})]),_:1},16,["loading"])])]),C.value&&C.value.length>0?(d(),v("div",aa,[(d(!0),v(fe,null,pe(C.value,_=>(d(),v("div",{key:_.task_id,class:_e(["border rounded px-3 py-2 cursor-pointer hover:bg-gray-50 group min-h-[60px] flex flex-col justify-between",{"border-blue-500 bg-blue-50":a.value&&_.task_id===a.value.task_id}]),onClick:F=>k(_.task_id)},[o("div",la,[o("div",na,b(_.name),1),o("span",oa,[c(t,null,{default:r(()=>[c(P(as),{class:"!w-3 !h-3"})]),_:1}),o("span",ia,b(_.files?_.files.length:0),1)])]),o("div",ra,[c(E,{type:re(_.status),size:"small",class:"!h-5 !text-xs w-16 text-center"},{default:r(()=>[h(b(de(_.status)),1)]),_:2},1032,["type"]),o("div",da,[_.status==="success"&&_.result_file?(d(),M(g,U({key:0,type:"primary"},{ref_for:!0},O,{onClick:I(F=>Me(_),["stop"])}),{default:r(()=>[...s[8]||(s[8]=[h(" 下载 ",-1)])]),_:1},16,["onClick"])):S("",!0),c(g,U({type:"danger"},{ref_for:!0},O,{onClick:I(F=>T(_.task_id),["stop"]),disabled:_.status==="processing"}),{default:r(()=>[c(t,null,{default:r(()=>[c(P(ts))]),_:1})]),_:1},16,["onClick","disabled"])])])],10,ta))),128))])):(d(),v("div",ua,' 暂无任务，请点击"新建"创建 '))]),a.value?(d(),v("div",ca,[o("div",fa,[o("h3",pa,"任务详情: "+b(a.value.name),1),o("span",_a," 共 "+b(ue.value)+" 个文件 ",1)]),o("div",va,[o("div",ga,[o("div",ma,[c(E,{type:re(a.value.status),size:"small",class:"w-16 text-center"},{default:r(()=>[h(b(de(a.value.status)),1)]),_:1},8,["type"]),te.value?(d(),M(ge,{key:0,file:Le.value,player:P(m),disabled:y.value,onPlay:De,onSeek:Ce},null,8,["file","player","disabled"])):S("",!0),c(g,U({type:"primary"},q,{onClick:Te,disabled:ce.value}),{default:r(()=>[...s[9]||(s[9]=[h(" 下载 ",-1)])]),_:1},16,["disabled"]),c(g,U({type:"success"},q,{onClick:Pe,disabled:ce.value}),{default:r(()=>[...s[10]||(s[10]=[h(" 转存 ",-1)])]),_:1},16,["disabled"]),a.value.error_message?(d(),v("span",ya," 错误: "+b(a.value.error_message),1)):S("",!0)]),o("div",xa,[c(g,U({type:"success"},q,{onClick:Z,disabled:Be.value,loading:W.value}),{default:r(()=>[...s[11]||(s[11]=[h(" 开始合成 ",-1)])]),_:1},16,["disabled","loading"])])]),o("div",ha,[o("div",ba,[s[13]||(s[13]=o("h4",{class:"text-sm font-semibold"},"文件列表",-1)),o("div",ka,[c(g,U({type:"primary"},O,{disabled:le.value,onClick:V}),{default:r(()=>[...s[12]||(s[12]=[h(" + ",-1)])]),_:1},16,["disabled"]),c(g,U({type:y.value?"success":"default"},Y,{onClick:Ue,disabled:Ee.value,title:ze.value}),{default:r(()=>[y.value?(d(),M(t,{key:0},{default:r(()=>[c(P(ls))]),_:1})):(d(),M(K,{key:1,class:"!w-3.5 !h-3.5"}))]),_:1},16,["type","disabled","title"])])]),o("div",wa,[ae.value?(d(),v("div",Ta,[(d(!0),v(fe,null,pe(a.value.files,(_,F)=>(d(),v("div",{key:F,class:_e(["flex items-center gap-2 p-1 hover:bg-gray-100 rounded",{"cursor-move":y.value,"cursor-default":!y.value,"select-none":!0}]),draggable:y.value,onDragstart:z=>Ae(z,Number(F)),onDragend:s[2]||(s[2]=z=>je(z)),onDragover:s[3]||(s[3]=I(z=>Ne(z),["prevent"])),onDragleave:Ve,onDrop:I(z=>Ie(z,Number(F)),["prevent"])},[o("span",Ca,b(Number(F)+1),1),o("span",{class:"flex-1 text-sm truncate",title:_.path||_.name},b(_.name),9,Fa),_.size?(d(),v("span",Da,b(P(Se)(_.size)),1)):(d(),v("div",Pa)),o("div",{class:"flex items-center gap-1 flex-shrink-0",onMousedown:s[0]||(s[0]=I(()=>{},["stop"])),onClick:s[1]||(s[1]=I(()=>{},["stop"]))},[c(ge,{file:_,player:P(m),disabled:le.value,onPlay:()=>Fe(Number(F)),onSeek:oe},null,8,["file","player","disabled","onPlay"]),c(g,{type:"info",size:"small",plain:"",circle:"",onClick:I(z=>X(Number(F)),["stop"]),disabled:le.value,class:"!h-6 !text-xs"},{default:r(()=>[c(t,null,{default:r(()=>[c(P(ns))]),_:1})]),_:1},8,["onClick","disabled"])],32)],42,Ma))),128))])):(d(),v("div",$a,"文件列表为空"))])])])])):(d(),v("div",Sa,[...s[14]||(s[14]=[o("div",{class:"flex items-center justify-between mb-3 flex-shrink-0"},[o("h3",{class:"text-base font-semibold"},"任务详情")],-1),o("div",{class:"flex-1 flex items-center justify-center text-sm text-gray-400"}," 请从左侧选择一个任务查看详情 ",-1)])])),c(me,{visible:D.value,"onUpdate:visible":s[4]||(s[4]=_=>D.value=_),title:"选择文件添加到任务","confirm-button-text":"添加","confirm-loading":u.value,onConfirm:n,onClose:Oe},null,8,["visible","confirm-loading"]),c(me,{visible:w.value,"onUpdate:visible":s[5]||(s[5]=_=>w.value=_),title:"选择转存目录","confirm-button-text":"转存",mode:"directory","confirm-loading":u.value,onConfirm:$e,onClose:s[6]||(s[6]=_=>w.value=!1)},null,8,["visible","confirm-loading"])])}}}),Ea={class:"p-1"},qa=ne({__name:"index",setup(H){const u=$("pdf_tool"),C=a=>{console.log("切换到页签:",a)};return(a,D)=>{const w=is,y=os;return d(),v("div",Ea,[c(y,{modelValue:u.value,"onUpdate:modelValue":D[0]||(D[0]=j=>u.value=j),onTabChange:C,class:"flex-1 flex flex-col overflow-hidden h-[calc(100vh-150px)]"},{default:r(()=>[c(w,{label:"PDF 工具",name:"pdf_tool"},{default:r(()=>[c(Js)]),_:1}),c(w,{label:"音频合成",name:"audio_merge"},{default:r(()=>[c(Ba)]),_:1})]),_:1},8,["modelValue"])])}}});export{qa as default};
